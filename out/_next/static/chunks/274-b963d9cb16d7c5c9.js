(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[274],{6432:function(e,n,i){"use strict";i.d(n,{d7:function(){return K},Qr:function(){return detectFaces_detectAllFaces},ii:function(){return m},qB:function(){return ed}});var o,a,s,c,u,l,f,d,p,m={};i.r(m),i.d(m,{AnchorPosition:function(){return f},DrawBox:function(){return M},DrawBoxOptions:function(){return DrawBoxOptions},DrawFaceLandmarks:function(){return V},DrawFaceLandmarksOptions:function(){return DrawFaceLandmarksOptions},DrawTextField:function(){return D},DrawTextFieldOptions:function(){return DrawTextFieldOptions},drawContour:function(){return drawContour},drawDetections:function(){return drawDetections},drawFaceExpressions:function(){return drawFaceExpressions},drawFaceLandmarks:function(){return drawFaceLandmarks}});var g=i(4277);function drawContour(e,n,i){if(void 0===i&&(i=!1),e.beginPath(),n.slice(1).forEach(function(i,o){var a=i.x,s=i.y,c=n[o];e.moveTo(c.x,c.y),e.lineTo(a,s)}),i){var o=n[n.length-1],a=n[0];if(!o||!a)return;e.moveTo(o.x,o.y),e.lineTo(a.x,a.y)}e.stroke()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(e,n){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])})(e,n)};function __extends(e,n){function __(){this.constructor=e}extendStatics(e,n),e.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(e){for(var n,i=1,o=arguments.length;i<o;i++)for(var a in n=arguments[i])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};function tslib_es6_awaiter(e,n,i,o){function adopt(e){return e instanceof i?e:new i(function(n){n(e)})}return new(i||(i=Promise))(function(i,a){function fulfilled(e){try{step(o.next(e))}catch(e){a(e)}}function rejected(e){try{step(o.throw(e))}catch(e){a(e)}}function step(e){e.done?i(e.value):adopt(e.value).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}function tslib_es6_generator(e,n){var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(e){return function(n){return step([e,n])}}function step(s){if(i)throw TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=2&s[0]?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,o=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){c=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){c.label=s[1];break}if(6===s[0]&&c.label<a[1]){c.label=a[1],a=s;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(s);break}a[2]&&c.ops.pop(),c.trys.pop();continue}s=n.call(e,c)}catch(e){s=[6,e],o=0}finally{i=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function __spreadArrays(){for(var e=0,n=0,i=arguments.length;n<i;n++)e+=arguments[n].length;for(var o=Array(e),a=0,n=0;n<i;n++)for(var s=arguments[n],c=0,u=s.length;c<u;c++,a++)o[a]=s[c];return o}var v=function(){function Dimensions(e,n){if(!isValidNumber(e)||!isValidNumber(n))throw Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(Dimensions.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(Dimensions.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Dimensions.prototype.reverse=function(){return new Dimensions(1/this.width,1/this.height)},Dimensions}();function isTensor(e,n){return e instanceof g.esB&&e.shape.length===n}function isTensor2D(e){return isTensor(e,2)}function isTensor4D(e){return isTensor(e,4)}function isFloat(e){return e%1!=0}function round(e,n){void 0===n&&(n=2);var i=Math.pow(10,n);return Math.floor(e*i)/i}function isDimensions(e){return e&&e.width&&e.height}function computeReshapedDimensions(e,n){var i=e.width,o=e.height,a=n/Math.max(o,i);return new v(Math.round(i*a),Math.round(o*a))}function getCenterPoint(e){return e.reduce(function(e,n){return e.add(n)},new y(0,0)).div(new y(e.length,e.length))}function range(e,n,i){return Array(e).fill(0).map(function(e,o){return n+o*i})}function isValidNumber(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function utils_isValidProbablitiy(e){return isValidNumber(e)&&0<=e&&e<=1}var y=function(){function Point(e,n){this._x=e,this._y=n}return Object.defineProperty(Point.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(Point.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Point.prototype.add=function(e){return new Point(this.x+e.x,this.y+e.y)},Point.prototype.sub=function(e){return new Point(this.x-e.x,this.y-e.y)},Point.prototype.mul=function(e){return new Point(this.x*e.x,this.y*e.y)},Point.prototype.div=function(e){return new Point(this.x/e.x,this.y/e.y)},Point.prototype.abs=function(){return new Point(Math.abs(this.x),Math.abs(this.y))},Point.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},Point.prototype.floor=function(){return new Point(Math.floor(this.x),Math.floor(this.y))},Point}(),b=function(){function Box(e,n){void 0===n&&(n=!0);var i=e||{},o=[i.left,i.top,i.right,i.bottom].every(isValidNumber),a=[i.x,i.y,i.width,i.height].every(isValidNumber);if(!a&&!o)throw Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(i));var s=a?[i.x,i.y,i.width,i.height]:[i.left,i.top,i.right-i.left,i.bottom-i.top],c=s[0],u=s[1],l=s[2],f=s[3];Box.assertIsValidBox({x:c,y:u,width:l,height:f},"Box.constructor",n),this._x=c,this._y=u,this._width=l,this._height=f}return Box.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(isValidNumber)},Box.assertIsValidBox=function(e,n,i){if(void 0===i&&(i=!1),!Box.isRect(e))throw Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!i&&(e.width<0||e.height<0))throw Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(Box.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"topLeft",{get:function(){return new y(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"topRight",{get:function(){return new y(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"bottomLeft",{get:function(){return new y(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"bottomRight",{get:function(){return new y(this.right,this.bottom)},enumerable:!0,configurable:!0}),Box.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(e){return Math.round(e)});return new Box({x:e[0],y:e[1],width:e[2],height:e[3]})},Box.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(e){return Math.floor(e)});return new Box({x:e[0],y:e[1],width:e[2],height:e[3]})},Box.prototype.toSquare=function(){var e=this.x,n=this.y,i=this.width,o=this.height,a=Math.abs(i-o);return i<o&&(e-=a/2,i+=a),o<i&&(n-=a/2,o+=a),new Box({x:e,y:n,width:i,height:o})},Box.prototype.rescale=function(e){var n=isDimensions(e)?e.width:e,i=isDimensions(e)?e.height:e;return new Box({x:this.x*n,y:this.y*i,width:this.width*n,height:this.height*i})},Box.prototype.pad=function(e,n){var i=[this.x-e/2,this.y-n/2,this.width+e,this.height+n];return new Box({x:i[0],y:i[1],width:i[2],height:i[3]})},Box.prototype.clipAtImageBorders=function(e,n){var i=this.x,o=this.y,a=this.right,s=this.bottom,c=Math.max(i,0),u=Math.max(o,0);return new Box({x:c,y:u,width:Math.min(a-c,e-c),height:Math.min(s-u,n-u)}).floor()},Box.prototype.shift=function(e,n){var i=this.width,o=this.height;return new Box({x:this.x+e,y:this.y+n,width:i,height:o})},Box.prototype.padAtBorders=function(e,n){var i=this.width+1,o=this.height+1,a=i,s=o,c=this.left,u=this.top,l=this.right,f=this.bottom;return l>n&&(a=-l+n+i,l=n),f>e&&(s=-f+e+o,f=e),c<1&&(s=2-c,c=1),u<1&&(s=2-u,u=1),{dy:1,edy:s,dx:1,edx:a,y:u,ey:f,x:c,ex:l,w:i,h:o}},Box.prototype.calibrate=function(e){return new Box({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},Box}(),_=function(e){function BoundingBox(n,i,o,a,s){return void 0===s&&(s=!1),e.call(this,{left:n,top:i,right:o,bottom:a},s)||this}return __extends(BoundingBox,e),BoundingBox}(b),x=function(){function ObjectDetection(e,n,i,o,a){this._imageDims=new v(a.width,a.height),this._score=e,this._classScore=n,this._className=i,this._box=new b(o).rescale(this._imageDims)}return Object.defineProperty(ObjectDetection.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"relativeBox",{get:function(){return new b(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),ObjectDetection.prototype.forSize=function(e,n){return new ObjectDetection(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},ObjectDetection}(),w=function(e){function FaceDetection(n,i,o){return e.call(this,n,n,"",i,o)||this}return __extends(FaceDetection,e),FaceDetection.prototype.forSize=function(n,i){var o=e.prototype.forSize.call(this,n,i);return new FaceDetection(o.score,o.relativeBox,o.imageDims)},FaceDetection}(x);function minBbox(e){var n=e.map(function(e){return e.x}),i=e.map(function(e){return e.y});return new _(n.reduce(function(e,n){return n<e?n:e},1/0),i.reduce(function(e,n){return n<e?n:e},1/0),n.reduce(function(e,n){return e<n?n:e},0),i.reduce(function(e,n){return e<n?n:e},0))}function iou(e,n,i){void 0===i&&(i=!0);var o=Math.max(0,Math.min(e.right,n.right)-Math.max(e.left,n.left))*Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top));return i?o/(e.area+n.area-o):o/Math.min(e.area,n.area)}function nonMaxSuppression(e,n,i,o){void 0===o&&(o=!0);for(var a=n.map(function(e,n){return{score:e,boxIndex:n}}).sort(function(e,n){return e.score-n.score}).map(function(e){return e.boxIndex}),s=[];a.length>0;)!function(){var n=a.pop();s.push(n);for(var c=a,u=[],l=0;l<c.length;l++){var f=c[l],d=e[n],p=e[f];u.push(iou(d,p,o))}a=a.filter(function(e,n){return u[n]<=i})}();return s}function normalize(e,n){return g.lub(function(){var i=n[0],o=n[1],a=n[2],s=g.hlL(__spreadArrays(e.shape.slice(0,3),[1]),i),c=g.hlL(__spreadArrays(e.shape.slice(0,3),[1]),o),u=g.hlL(__spreadArrays(e.shape.slice(0,3),[1]),a),l=g.zoF([s,c,u],3);return g.luU(e,l)})}function padToSquare(e,n){return void 0===n&&(n=!1),g.lub(function(){var i=e.shape.slice(1),o=i[0],a=i[1];if(o===a)return e;var s=Math.abs(o-a),c=o>a?2:1,createPaddingTensor=function(n){var i=e.shape.slice();return i[c]=n,g.hlL(i,0)},u=createPaddingTensor(Math.round(s*(n?.5:1))),l=s-u.shape[c],f=[n&&l?createPaddingTensor(l):null,e,u].filter(function(e){return!!e}).map(function(e){return e.toFloat()});return g.zoF(f,c)})}function sigmoid(e){return 1/(1+Math.exp(-e))}var P=function(e){function Rect(n,i,o,a,s){return void 0===s&&(s=!1),e.call(this,{x:n,y:i,width:o,height:a},s)||this}return __extends(Rect,e),Rect}(b),F=function(){function FaceLandmarks(e,n,i){void 0===i&&(i=new y(0,0));var o=n.width,a=n.height;this._imgDims=new v(o,a),this._shift=i,this._positions=e.map(function(e){return e.mul(new y(o,a)).add(i)})}return Object.defineProperty(FaceLandmarks.prototype,"shift",{get:function(){return new y(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(FaceLandmarks.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(FaceLandmarks.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(FaceLandmarks.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(FaceLandmarks.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new y(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),FaceLandmarks.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},FaceLandmarks.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new y(e,n))},FaceLandmarks.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},FaceLandmarks.prototype.align=function(e,n){if(void 0===n&&(n={}),e){var i=e instanceof w?e.box.floor():new b(e);return this.shiftBy(i.x,i.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),a=o.useDlibAlignment,s=o.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(s)},FaceLandmarks.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],i=e[1],o=e[2],distToMouth=function(e){return o.sub(e).magnitude()},a=Math.floor((distToMouth(n)+distToMouth(i))/2/.45),s=getCenterPoint(e),c=Math.floor(Math.max(0,s.x-.5*a)),u=Math.floor(Math.max(0,s.y-.43*a));return new P(c,u,Math.min(a,this.imageWidth+c),Math.min(a,this.imageHeight+u))},FaceLandmarks.prototype.alignMinBbox=function(e){var n=minBbox(this.positions);return n.pad(n.width*e,n.height*e)},FaceLandmarks.prototype.getRefPointsForAlignment=function(){throw Error("getRefPointsForAlignment not implemented by base class")},FaceLandmarks}(),T=function(e){function FaceLandmarks5(){return null!==e&&e.apply(this,arguments)||this}return __extends(FaceLandmarks5,e),FaceLandmarks5.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],getCenterPoint([e[3],e[4]])]},FaceLandmarks5}(F),A=function(e){function FaceLandmarks68(){return null!==e&&e.apply(this,arguments)||this}return __extends(FaceLandmarks68,e),FaceLandmarks68.prototype.getJawOutline=function(){return this.positions.slice(0,17)},FaceLandmarks68.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},FaceLandmarks68.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},FaceLandmarks68.prototype.getNose=function(){return this.positions.slice(27,36)},FaceLandmarks68.prototype.getLeftEye=function(){return this.positions.slice(36,42)},FaceLandmarks68.prototype.getRightEye=function(){return this.positions.slice(42,48)},FaceLandmarks68.prototype.getMouth=function(){return this.positions.slice(48,68)},FaceLandmarks68.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(getCenterPoint)},FaceLandmarks68}(F),S=function(){function FaceMatch(e,n){this._label=e,this._distance=n}return Object.defineProperty(FaceMatch.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(FaceMatch.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),FaceMatch.prototype.toString=function(e){return void 0===e&&(e=!0),""+this.label+(e?" ("+round(this.distance)+")":"")},FaceMatch}(),k=function(e){function LabeledBox(n,i){var o=e.call(this,n)||this;return o._label=i,o}return __extends(LabeledBox,e),LabeledBox.assertIsValidLabeledBox=function(e,n){if(b.assertIsValidBox(e,n),!isValidNumber(e.label))throw Error(n+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(LabeledBox.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),LabeledBox}(b),C=function(){function LabeledFaceDescriptors(e,n){if("string"!=typeof e)throw Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(e){return!(e instanceof Float32Array)}))throw Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(LabeledFaceDescriptors.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(LabeledFaceDescriptors.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),LabeledFaceDescriptors.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},LabeledFaceDescriptors.fromJSON=function(e){var n=e.descriptors.map(function(e){return new Float32Array(e)});return new LabeledFaceDescriptors(e.label,n)},LabeledFaceDescriptors}();function WithFaceDetection_isWithFaceDetection(e){return e.detection instanceof w}function WithFaceDetection_extendWithFaceDetection(e,n){return Object.assign({},e,{detection:n})}function createBrowserEnv(){var e=window.fetch||function(){throw Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw Error("readFile - filesystem not available for browser environment")}}}function createFileSystem(e){var n="";if(!e)try{e=i(8730)}catch(e){n=e.toString()}return{readFile:e?function(n){return new Promise(function(i,o){e.readFile(n,function(e,n){return e?o(e):i(n)})})}:function(){throw Error("readFile - failed to require fs in nodejs environment with error: "+n)}}}function createNodejsEnv(){var e=i.g.Canvas||i.g.HTMLCanvasElement,n=i.g.Image||i.g.HTMLImageElement,o=i.g.fetch||function(){throw Error("fetch - missing fetch implementation for nodejs environment")},a=createFileSystem();return __assign({Canvas:e||function(){},CanvasRenderingContext2D:i.g.CanvasRenderingContext2D||function(){},Image:n||function(){},ImageData:i.g.ImageData||function(){},Video:i.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(n)return new n;throw Error("createImageElement - missing Image implementation for nodejs environment")},fetch:o},a)}function isBrowser(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}!function(e){function PredictedBox(n,i,o,a){var s=e.call(this,n,i)||this;return s._score=o,s._classScore=a,s}__extends(PredictedBox,e),PredictedBox.assertIsValidPredictedBox=function(e,n){if(k.assertIsValidLabeledBox(e,n),!utils_isValidProbablitiy(e.score)||!utils_isValidProbablitiy(e.classScore))throw Error(n+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(PredictedBox.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(PredictedBox.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(k);var E=i(2601);function isNodejs(){return"object"==typeof i.g&&void 0!==E&&!!E.version}function initialize(){isBrowser()&&(l=createBrowserEnv()),isNodejs()&&(l=createNodejsEnv())}function monkeyPatch(e){if(l||initialize(),!l)throw Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=e.Canvas,i=void 0===n?l.Canvas:n,o=e.Image,a=void 0===o?l.Image:o;l.Canvas=i,l.Image=a,l.createCanvasElement=e.createCanvasElement||function(){return new i},l.createImageElement=e.createImageElement||function(){return new a},l.ImageData=e.ImageData||l.ImageData,l.Video=e.Video||l.Video,l.fetch=e.fetch||l.fetch,l.readFile=e.readFile||l.readFile}var B={getEnv:function(){if(!l)throw Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return l},setEnv:function(e){l=e},initialize:initialize,createBrowserEnv:createBrowserEnv,createFileSystem:createFileSystem,createNodejsEnv:createNodejsEnv,monkeyPatch:monkeyPatch,isBrowser:isBrowser,isNodejs:isNodejs};function resolveInput(e){return B.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function getContext2dOrThrow(e){var n=B.getEnv(),i=n.Canvas;if(e instanceof n.CanvasRenderingContext2D)return e;var o=resolveInput(e);if(!(o instanceof i))throw Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=o.getContext("2d");if(!a)throw Error("resolveContext2d - canvas 2d context is null");return a}initialize(),(s=f||(f={})).TOP_LEFT="TOP_LEFT",s.TOP_RIGHT="TOP_RIGHT",s.BOTTOM_LEFT="BOTTOM_LEFT",s.BOTTOM_RIGHT="BOTTOM_RIGHT";var DrawTextFieldOptions=function(e){void 0===e&&(e={});var n=e.anchorPosition,i=e.backgroundColor,o=e.fontColor,a=e.fontSize,s=e.fontStyle,c=e.padding;this.anchorPosition=n||f.TOP_LEFT,this.backgroundColor=i||"rgba(0, 0, 0, 0.5)",this.fontColor=o||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=s||"Georgia",this.padding=c||4},D=function(){function DrawTextField(e,n,i){void 0===i&&(i={}),this.text="string"==typeof e?[e]:e instanceof DrawTextField?e.text:e,this.anchor=n,this.options=new DrawTextFieldOptions(i)}return DrawTextField.prototype.measureWidth=function(e){var n=this.options.padding;return this.text.map(function(n){return e.measureText(n).width}).reduce(function(e,n){return e<n?n:e},0)+2*n},DrawTextField.prototype.measureHeight=function(){var e=this.options,n=e.fontSize,i=e.padding;return this.text.length*n+2*i},DrawTextField.prototype.getUpperLeft=function(e,n){var i=this.options.anchorPosition,o=i===f.BOTTOM_RIGHT||i===f.TOP_RIGHT,a=i===f.BOTTOM_LEFT||i===f.BOTTOM_RIGHT,s=this.measureWidth(e),c=this.measureHeight(),u=o?this.anchor.x-s:this.anchor.x,l=a?this.anchor.y-c:this.anchor.y;return n?{x:Math.max(Math.min(u,n.width-s),0),y:Math.max(Math.min(l,n.height-c),0)}:{x:u,y:l}},DrawTextField.prototype.draw=function(e){var n=resolveInput(e),i=getContext2dOrThrow(n),o=this.options,a=o.backgroundColor,s=o.fontColor,c=o.fontSize,u=o.fontStyle,l=o.padding;i.font=c+"px "+u;var f=this.measureWidth(i),d=this.measureHeight();i.fillStyle=a;var p=this.getUpperLeft(i,n);i.fillRect(p.x,p.y,f,d),i.fillStyle=s,this.text.forEach(function(e,n){var o=l+p.x,a=l+p.y+(n+1)*c;i.fillText(e,o,a)})},DrawTextField}(),DrawBoxOptions=function(e){void 0===e&&(e={});var n=e.boxColor,i=e.lineWidth,o=e.label,a=e.drawLabelOptions;this.boxColor=n||"rgba(0, 0, 255, 1)",this.lineWidth=i||2,this.label=o;var s={anchorPosition:f.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new DrawTextFieldOptions(Object.assign({},s,a))},M=function(){function DrawBox(e,n){void 0===n&&(n={}),this.box=new b(e),this.options=new DrawBoxOptions(n)}return DrawBox.prototype.draw=function(e){var n=getContext2dOrThrow(e),i=this.options,o=i.boxColor,a=i.lineWidth,s=this.box,c=s.x,u=s.y,l=s.width,f=s.height;n.strokeStyle=o,n.lineWidth=a,n.strokeRect(c,u,l,f);var d=this.options.label;d&&new D([d],{x:c-a/2,y:u},this.options.drawLabelOptions).draw(e)},DrawBox}();function drawDetections(e,n){(Array.isArray(n)?n:[n]).forEach(function(n){var i=n instanceof w?n.score:WithFaceDetection_isWithFaceDetection(n)?n.detection.score:void 0;new M(n instanceof w?n.box:WithFaceDetection_isWithFaceDetection(n)?n.detection.box:new b(n),{label:i?""+round(i):void 0}).draw(e)})}function isMediaLoaded(e){var n=B.getEnv(),i=n.Image,o=n.Video;return e instanceof i&&e.complete||e instanceof o&&e.readyState>=3}function awaitMediaLoaded(e){return new Promise(function(n,i){if(e instanceof B.getEnv().Canvas||isMediaLoaded(e))return n();function onLoad(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",onLoad),e.currentTarget.removeEventListener("error",onError),n(e))}function onError(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",onLoad),e.currentTarget.removeEventListener("error",onError),i(e))}e.addEventListener("load",onLoad),e.addEventListener("error",onError)})}function getMediaDimensions_getMediaDimensions(e){var n=B.getEnv(),i=n.Image,o=n.Video;return e instanceof i?new v(e.naturalWidth,e.naturalHeight):e instanceof o?new v(e.videoWidth,e.videoHeight):new v(e.width,e.height)}function createCanvas(e){var n=e.width,i=e.height,o=(0,B.getEnv().createCanvasElement)();return o.width=n,o.height=i,o}function createCanvasFromMedia(e,n){var i=B.getEnv().ImageData;if(!(e instanceof i)&&!isMediaLoaded(e))throw Error("createCanvasFromMedia - media has not finished loading yet");var o=n||getMediaDimensions_getMediaDimensions(e),a=o.width,s=o.height,c=createCanvas({width:a,height:s});return e instanceof i?getContext2dOrThrow(c).putImageData(e,0,0):getContext2dOrThrow(c).drawImage(e,0,0,a,s),c}function imageTensorToCanvas(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){var i,o,a,s,c,u;return tslib_es6_generator(this,function(l){switch(l.label){case 0:return i=n||B.getEnv().createCanvasElement(),a=(o=e.shape.slice(isTensor4D(e)?1:0))[0],s=o[1],c=o[2],u=g.lub(function(){return e.as3D(a,s,c).toInt()}),[4,g.Xhn.toPixels(u,i)];case 1:return l.sent(),u.dispose(),[2,i]}})})}function isMediaElement(e){var n=B.getEnv(),i=n.Image,o=n.Canvas,a=n.Video;return e instanceof i||e instanceof o||e instanceof a}function imageToSquare(e,n,i){void 0===i&&(i=!1);var o=B.getEnv(),a=o.Image,s=o.Canvas;if(!(e instanceof a||e instanceof s))throw Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var c=getMediaDimensions_getMediaDimensions(e),u=n/Math.max(c.height,c.width),l=u*c.width,f=u*c.height,d=createCanvas({width:n,height:n}),p=e instanceof s?e:createCanvasFromMedia(e),m=Math.abs(l-f)/2,g=i&&l<f?m:0,v=i&&f<l?m:0;return getContext2dOrThrow(d).drawImage(p,g,v,l,f),d}var O=function(){function NetInput(e,n){var i=this;if(void 0===n&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(e,n){if(isTensor(e,3)){i._imageTensors[n]=e,i._inputDimensions[n]=e.shape;return}if(isTensor4D(e)){var o=e.shape[0];if(1!==o)throw Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");i._imageTensors[n]=e,i._inputDimensions[n]=e.shape.slice(1);return}var a=e instanceof B.getEnv().Canvas?e:createCanvasFromMedia(e);i._canvases[n]=a,i._inputDimensions[n]=[a.height,a.width,3]})}return Object.defineProperty(NetInput.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"reshapedInputDimensions",{get:function(){var e=this;return range(this.batchSize,0,1).map(function(n,i){return e.getReshapedInputDimensions(i)})},enumerable:!0,configurable:!0}),NetInput.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},NetInput.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},NetInput.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},NetInput.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},NetInput.prototype.getReshapedInputDimensions=function(e){if("number"!=typeof this.inputSize)throw Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return computeReshapedDimensions({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},NetInput.prototype.toBatchTensor=function(e,n){var i=this;return void 0===n&&(n=!0),this._inputSize=e,g.lub(function(){var o=range(i.batchSize,0,1).map(function(o){var a=i.getInput(o);if(a instanceof g.esB){var s=isTensor4D(a)?a:a.expandDims();return((s=padToSquare(s,n)).shape[1]!==e||s.shape[2]!==e)&&(s=g.BHj.resizeBilinear(s,[e,e])),s.as3D(e,e,3)}if(a instanceof B.getEnv().Canvas)return g.Xhn.fromPixels(imageToSquare(a,e,n));throw Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)});return g.knu(o.map(function(e){return e.toFloat()})).as4D(i.batchSize,e,e,3)})},NetInput}();function toNetInput(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o;return tslib_es6_generator(this,function(a){switch(a.label){case 0:if(e instanceof O)return[2,e];if(!(n=Array.isArray(e)?e:[e]).length)throw Error("toNetInput - empty array passed as input");return i=function(n){return Array.isArray(e)?" at input index "+n+":":""},(o=n.map(resolveInput)).forEach(function(e,o){if(!isMediaElement(e)&&!isTensor(e,3)&&!isTensor4D(e)){if("string"==typeof n[o])throw Error("toNetInput -"+i(o)+" string passed, but could not resolve HTMLElement for element id "+n[o]);throw Error("toNetInput -"+i(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(isTensor4D(e)){var a=e.shape[0];if(1!==a)throw Error("toNetInput -"+i(o)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(o.map(function(e){return isMediaElement(e)&&awaitMediaLoaded(e)}))];case 1:return a.sent(),[2,new O(o,Array.isArray(e))]}})})}function extractFaces(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){var i,o,a,s,c,u;return tslib_es6_generator(this,function(l){switch(l.label){case 0:if(i=B.getEnv().Canvas,o=e,e instanceof i)return[3,5];return[4,toNetInput(e)];case 1:if((a=l.sent()).batchSize>1)throw Error("extractFaces - batchSize > 1 not supported");if(!((s=a.getInput(0))instanceof i))return[3,2];return c=s,[3,4];case 2:return[4,imageTensorToCanvas(s)];case 3:c=l.sent(),l.label=4;case 4:o=c,l.label=5;case 5:return u=getContext2dOrThrow(o),[2,n.map(function(e){return e instanceof w?e.forSize(o.width,o.height).box.floor():e}).map(function(e){return e.clipAtImageBorders(o.width,o.height)}).map(function(e){var n=e.x,i=e.y,o=e.width,a=e.height,s=createCanvas({width:o,height:a});return getContext2dOrThrow(s).putImageData(u.getImageData(n,i,o,a),0,0),s})]}})})}function extractFaceTensors(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(i){if(!isTensor(e,3)&&!isTensor4D(e))throw Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(isTensor4D(e)&&e.shape[0]>1)throw Error("extractFaceTensors - batchSize > 1 not supported");return[2,g.lub(function(){var i=e.shape.slice(isTensor4D(e)?1:0),o=i[0],a=i[1],s=i[2];return n.map(function(e){return e instanceof w?e.forSize(a,o).box:e}).map(function(e){return e.clipAtImageBorders(a,o)}).map(function(n){var i=n.x,c=n.y,u=n.width,l=n.height;return g.CnO(e.as3D(o,a,s),[c,i,0],[l,u,s])})})]})})}function fetchOrThrow_fetchOrThrow(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){var i;return tslib_es6_generator(this,function(o){switch(o.label){case 0:return[4,(0,B.getEnv().fetch)(e,n)];case 1:if(!((i=o.sent()).status<400))throw Error("failed to fetch: ("+i.status+") "+i.statusText+", from url: "+i.url);return[2,i]}})})}function fetchJson(e){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,fetchOrThrow_fetchOrThrow(e)];case 1:return[2,n.sent().json()]}})})}function getModelUris(e,n){var i=n+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:i};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+i};var o=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(o,"")).split("/").filter(function(e){return e}),s=e.endsWith(".json")?a[a.length-1]:i,c=o+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return{modelBaseUri:c=e.startsWith("/")?"/"+c:c,manifestUri:"/"===c?"/"+s:c+"/"+s}}function loadWeightMap(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){var i,o,a,s;return tslib_es6_generator(this,function(c){switch(c.label){case 0:return o=(i=getModelUris(e,n)).manifestUri,a=i.modelBaseUri,[4,fetchJson(o)];case 1:return s=c.sent(),[2,g.io.loadWeights(s,a)]}})})}var L=function(){function NeuralNetwork(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(NeuralNetwork.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(NeuralNetwork.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(NeuralNetwork.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),NeuralNetwork.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e);return n.obj[n.objProp]},NeuralNetwork.prototype.reassignParamFromPath=function(e,n){var i=this.traversePropertyPath(e),o=i.obj,a=i.objProp;o[a].dispose(),o[a]=n},NeuralNetwork.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var i=n.paramPath;return{path:i,tensor:e.getParamFromPath(i)}})},NeuralNetwork.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof g._wD})},NeuralNetwork.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof g._wD)})},NeuralNetwork.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var i=n.path,o=n.tensor;e.reassignParamFromPath(i,o.variable())})},NeuralNetwork.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var i=n.path,o=n.tensor,a=g.XeE(o.dataSync());o.dispose(),e.reassignParamFromPath(i,a)})},NeuralNetwork.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},NeuralNetwork.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){return Array.from(e.tensor.dataSync())}).reduce(function(e,n){return e.concat(n)}))},NeuralNetwork.prototype.load=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(n){switch(n.label){case 0:if(e instanceof Float32Array)return this.extractWeights(e),[2];return[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},NeuralNetwork.prototype.loadFromUri=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:if(e&&"string"!=typeof e)throw Error(this._name+".loadFromUri - expected model uri");return[4,loadWeightMap(e,this.getDefaultModelName())];case 1:return n=i.sent(),this.loadFromWeightMap(n),[2]}})})},NeuralNetwork.prototype.loadFromDisk=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a,s,c,u,l,f,d;return tslib_es6_generator(this,function(p){switch(p.label){case 0:if(e&&"string"!=typeof e)throw Error(this._name+".loadFromDisk - expected model file path");return n=B.getEnv().readFile,o=(i=getModelUris(e,this.getDefaultModelName())).manifestUri,a=i.modelBaseUri,s=function(e){return Promise.all(e.map(function(e){return n(e).then(function(e){return e.buffer})}))},c=g.io.weightsLoaderFactory(s),f=(l=JSON).parse,[4,n(o)];case 1:return u=f.apply(l,[p.sent().toString()]),[4,c(u,a)];case 2:return d=p.sent(),this.loadFromWeightMap(d),[2]}})})},NeuralNetwork.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),i=n.paramMappings,o=n.params;this._paramMappings=i,this._params=o},NeuralNetwork.prototype.extractWeights=function(e){var n=this.extractParams(e),i=n.paramMappings,o=n.params;this._paramMappings=i,this._params=o},NeuralNetwork.prototype.traversePropertyPath=function(e){if(!this.params)throw Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(n,i){if(!n.nextObj.hasOwnProperty(i))throw Error("traversePropertyPath - object does not have property "+i+", for path "+e);return{obj:n.nextObj,objProp:i,nextObj:n.nextObj[i]}},{nextObj:this.params}),i=n.obj,o=n.objProp;if(!i||!o||!(i[o]instanceof g.esB))throw Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:i,objProp:o}},NeuralNetwork}();function depthwiseSeparableConv(e,n,i){return g.lub(function(){var o=g.U_I(e,n.depthwise_filter,n.pointwise_filter,i,"same");return g.IHx(o,n.bias)})}function denseBlock3(e,n,i){return void 0===i&&(i=!1),g.lub(function(){var o=g.UYe(i?g.IHx(g.Tek(e,n.conv0.filters,[2,2],"same"),n.conv0.bias):depthwiseSeparableConv(e,n.conv0,[2,2])),a=depthwiseSeparableConv(o,n.conv1,[1,1]),s=depthwiseSeparableConv(g.UYe(g.IHx(o,a)),n.conv2,[1,1]);return g.UYe(g.IHx(o,g.IHx(a,s)))})}function denseBlock4(e,n,i,o){return void 0===i&&(i=!1),void 0===o&&(o=!0),g.lub(function(){var a=g.UYe(i?g.IHx(g.Tek(e,n.conv0.filters,o?[2,2]:[1,1],"same"),n.conv0.bias):depthwiseSeparableConv(e,n.conv0,o?[2,2]:[1,1])),s=depthwiseSeparableConv(a,n.conv1,[1,1]),c=depthwiseSeparableConv(g.UYe(g.IHx(a,s)),n.conv2,[1,1]),u=depthwiseSeparableConv(g.UYe(g.IHx(a,g.IHx(s,c))),n.conv3,[1,1]);return g.UYe(g.IHx(a,g.IHx(s,g.IHx(c,u))))})}function convLayer(e,n,i,o){return void 0===i&&(i="same"),void 0===o&&(o=!1),g.lub(function(){var a=g.IHx(g.Tek(e,n.filters,[1,1],i),n.bias);return o?g.UYe(a):a})}function disposeUnusedWeightTensors(e,n){Object.keys(e).forEach(function(i){n.some(function(e){return e.originalPath===i})||e[i].dispose()})}function extractConvParamsFactory(e,n){return function(i,o,a,s){var c=g.yXz(e(i*o*a*a),[a,a,i,o]),u=g.RRF(e(o));return n.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:c,bias:u}}}function extractFCParamsFactory(e,n){return function(i,o,a){var s=g.odF(e(i*o),[i,o]),c=g.RRF(e(o));return n.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:s,bias:c}}}var SeparableConvParams=function(e,n,i){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=i};function extractSeparableConvParamsFactory(e,n){return function(i,o,a){var s=g.yXz(e(9*i),[3,3,i,1]),c=g.yXz(e(i*o),[1,1,i,o]),u=g.RRF(e(o));return n.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new SeparableConvParams(s,c,u)}}function loadSeparableConvParamsFactory(e){return function(n){return new SeparableConvParams(e(n+"/depthwise_filter",4),e(n+"/pointwise_filter",4),e(n+"/bias",1))}}function extractWeightEntryFactory(e,n){return function(i,o,a){var s=e[i];if(!isTensor(s,o))throw Error("expected weightMap["+i+"] to be a Tensor"+o+"D, instead have "+s);return n.push({originalPath:i,paramPath:a||i}),s}}function extractWeightsFactory(e){var n=e;return{extractWeights:function(e){var i=n.slice(0,e);return n=n.slice(e),i},getRemainingWeights:function(){return n}}}function extractorsFactory(e,n){var i=extractConvParamsFactory(e,n),o=extractSeparableConvParamsFactory(e,n);function extractDenseBlock3Params(e,n,a,s){return void 0===s&&(s=!1),{conv0:s?i(e,n,3,a+"/conv0"):o(e,n,a+"/conv0"),conv1:o(n,n,a+"/conv1"),conv2:o(n,n,a+"/conv2")}}function extractDenseBlock4Params(e,n,i,a){void 0===a&&(a=!1);var s=extractDenseBlock3Params(e,n,i,a);return{conv0:s.conv0,conv1:s.conv1,conv2:s.conv2,conv3:o(n,n,i+"/conv3")}}return{extractDenseBlock3Params:extractDenseBlock3Params,extractDenseBlock4Params:extractDenseBlock4Params}}function extractParams(e){var n=[],i=extractWeightsFactory(e),o=i.extractWeights,a=i.getRemainingWeights,s=extractorsFactory(o,n).extractDenseBlock4Params,c=s(3,32,"dense0",!0),u=s(32,64,"dense1"),l=s(64,128,"dense2"),f=s(128,256,"dense3");if(0!==a().length)throw Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:c,dense1:u,dense2:l,dense3:f}}}function loadConvParamsFactory(e){return function(n){return{filters:e(n+"/filters",4),bias:e(n+"/bias",1)}}}function loadParamsFactory(e,n){var i=extractWeightEntryFactory(e,n),o=loadConvParamsFactory(i),a=loadSeparableConvParamsFactory(i);return{extractDenseBlock3Params:function(e,n){return void 0===n&&(n=!1),{conv0:n?o(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2")}},extractDenseBlock4Params:function(e,n){return void 0===n&&(n=!1),{conv0:n?o(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2"),conv3:a(e+"/conv3")}}}}function extractParamsFromWeigthMap(e){var n=[],i=loadParamsFactory(e,n).extractDenseBlock4Params,o={dense0:i("dense0",!0),dense1:i("dense1"),dense2:i("dense2"),dense3:i("dense3")};return disposeUnusedWeightTensors(e,n),{params:o,paramMappings:n}}var I=function(e){function FaceFeatureExtractor(){return e.call(this,"FaceFeatureExtractor")||this}return __extends(FaceFeatureExtractor,e),FaceFeatureExtractor.prototype.forwardInput=function(e){var n=this.params;if(!n)throw Error("FaceFeatureExtractor - load model before inference");return g.lub(function(){var i=denseBlock4(normalize(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(g.iD$(255)),n.dense0,!0);return i=denseBlock4(i,n.dense1),i=denseBlock4(i,n.dense2),i=denseBlock4(i,n.dense3),i=g.wS1(i,[7,7],[2,2],"valid")})},FaceFeatureExtractor.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent()])]}})})},FaceFeatureExtractor.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},FaceFeatureExtractor.prototype.extractParamsFromWeigthMap=function(e){return extractParamsFromWeigthMap(e)},FaceFeatureExtractor.prototype.extractParams=function(e){return extractParams(e)},FaceFeatureExtractor}(L);function fullyConnectedLayer(e,n){return g.lub(function(){return g.IHx(g.OI3(e,n.weights),n.bias)})}function extractParams_extractParams(e,n,i){var o=[],a=extractWeightsFactory(e),s=a.extractWeights,c=a.getRemainingWeights,u=extractFCParamsFactory(s,o)(n,i,"fc");if(0!==c().length)throw Error("weights remaing after extract: "+c().length);return{paramMappings:o,params:{fc:u}}}function extractParamsFromWeigthMap_extractParamsFromWeigthMap(e){var n=[],i=extractWeightEntryFactory(e,n),o={fc:{weights:i("fc/weights",2),bias:i("fc/bias",1)}};return disposeUnusedWeightTensors(e,n),{params:o,paramMappings:n}}function seperateWeightMaps(e){var n={},i={};return Object.keys(e).forEach(function(o){(o.startsWith("fc")?i:n)[o]=e[o]}),{featureExtractorMap:n,classifierMap:i}}var N=function(e){function FaceProcessor(n,i){var o=e.call(this,n)||this;return o._faceFeatureExtractor=i,o}return __extends(FaceProcessor,e),Object.defineProperty(FaceProcessor.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),FaceProcessor.prototype.runNet=function(e){var n=this,i=this.params;if(!i)throw Error(this._name+" - load model before inference");return g.lub(function(){var o=e instanceof O?n.faceFeatureExtractor.forwardInput(e):e;return fullyConnectedLayer(o.as2D(o.shape[0],-1),i.fc)})},FaceProcessor.prototype.dispose=function(n){void 0===n&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},FaceProcessor.prototype.loadClassifierParams=function(e){var n=this.extractClassifierParams(e),i=n.params,o=n.paramMappings;this._params=i,this._paramMappings=o},FaceProcessor.prototype.extractClassifierParams=function(e){return extractParams_extractParams(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},FaceProcessor.prototype.extractParamsFromWeigthMap=function(e){var n=seperateWeightMaps(e),i=n.featureExtractorMap,o=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),extractParamsFromWeigthMap_extractParamsFromWeigthMap(o)},FaceProcessor.prototype.extractParams=function(e){var n=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*n+i,a=e.slice(0,e.length-o),s=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},FaceProcessor}(L),R=["neutral","happy","sad","angry","fearful","disgusted","surprised"],W=function(){function FaceExpressions(e){var n=this;if(7!==e.length)throw Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);R.forEach(function(i,o){n[i]=e[o]})}return FaceExpressions.prototype.asSortedArray=function(){var e=this;return R.map(function(n){return{expression:n,probability:e[n]}}).sort(function(e,n){return n.probability-e.probability})},FaceExpressions}(),j=function(e){function FaceExpressionNet(n){return void 0===n&&(n=new I),e.call(this,"FaceExpressionNet",n)||this}return __extends(FaceExpressionNet,e),FaceExpressionNet.prototype.forwardInput=function(e){var n=this;return g.lub(function(){return g.XAC(n.runNet(e))})},FaceExpressionNet.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent()])]}})})},FaceExpressionNet.prototype.predictExpressions=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a,s=this;return tslib_es6_generator(this,function(c){switch(c.label){case 0:return[4,toNetInput(e)];case 1:return n=c.sent(),[4,this.forwardInput(n)];case 2:return i=c.sent(),[4,Promise.all(g.HHK(i).map(function(e){return tslib_es6_awaiter(s,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,e.data()];case 1:return n=i.sent(),e.dispose(),[2,n]}})})}))];case 3:return o=c.sent(),i.dispose(),a=o.map(function(e){return new W(e)}),[2,n.isBatchInput?a:a[0]]}})})},FaceExpressionNet.prototype.getDefaultModelName=function(){return"face_expression_model"},FaceExpressionNet.prototype.getClassifierChannelsIn=function(){return 256},FaceExpressionNet.prototype.getClassifierChannelsOut=function(){return 7},FaceExpressionNet}(N);function isWithFaceExpressions(e){return e.expressions instanceof W}function extendWithFaceExpressions(e,n){return Object.assign({},e,{expressions:n})}function drawFaceExpressions(e,n,i,o){void 0===i&&(i=.1),(Array.isArray(n)?n:[n]).forEach(function(n){var a=n instanceof W?n:isWithFaceExpressions(n)?n.expressions:void 0;if(!a)throw Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var s=a.asSortedArray().filter(function(e){return e.probability>i}),c=WithFaceDetection_isWithFaceDetection(n)?n.detection.box.bottomLeft:o||new y(0,0);new D(s.map(function(e){return e.expression+" ("+round(e.probability)+")"}),c).draw(e)})}function WithFaceLandmarks_isWithFaceLandmarks(e){return WithFaceDetection_isWithFaceDetection(e)&&e.landmarks instanceof F&&e.unshiftedLandmarks instanceof F&&e.alignedRect instanceof w}function WithFaceLandmarks_extendWithFaceLandmarks(e,n){var i=e.detection.box,o=n.shiftBy(i.x,i.y),a=o.align(),s=e.detection.imageDims,c=new w(e.detection.score,a.rescale(s.reverse()),s);return Object.assign({},e,{landmarks:o,unshiftedLandmarks:n,alignedRect:c})}var DrawFaceLandmarksOptions=function(e){void 0===e&&(e={});var n=e.drawLines,i=e.drawPoints,o=e.lineWidth,a=e.lineColor,s=e.pointSize,c=e.pointColor;this.drawLines=void 0===n||n,this.drawPoints=void 0===i||i,this.lineWidth=o||1,this.pointSize=s||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=c||"rgba(255, 0, 255, 1)"},V=function(){function DrawFaceLandmarks(e,n){void 0===n&&(n={}),this.faceLandmarks=e,this.options=new DrawFaceLandmarksOptions(n)}return DrawFaceLandmarks.prototype.draw=function(e){var n=getContext2dOrThrow(e),i=this.options,o=i.drawLines,a=i.drawPoints,s=i.lineWidth,c=i.lineColor,u=i.pointSize,l=i.pointColor;o&&this.faceLandmarks instanceof A&&(n.strokeStyle=c,n.lineWidth=s,drawContour(n,this.faceLandmarks.getJawOutline()),drawContour(n,this.faceLandmarks.getLeftEyeBrow()),drawContour(n,this.faceLandmarks.getRightEyeBrow()),drawContour(n,this.faceLandmarks.getNose()),drawContour(n,this.faceLandmarks.getLeftEye(),!0),drawContour(n,this.faceLandmarks.getRightEye(),!0),drawContour(n,this.faceLandmarks.getMouth(),!0)),a&&(n.strokeStyle=l,n.fillStyle=l,this.faceLandmarks.positions.forEach(function(e){n.beginPath(),n.arc(e.x,e.y,u,0,2*Math.PI),n.fill()}))},DrawFaceLandmarks}();function drawFaceLandmarks(e,n){(Array.isArray(n)?n:[n]).forEach(function(n){var i=n instanceof F?n:WithFaceLandmarks_isWithFaceLandmarks(n)?n.landmarks:void 0;if(!i)throw Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new V(i).draw(e)})}function extractParams_extractorsFactory(e,n){var i=extractConvParamsFactory(e,n),o=extractSeparableConvParamsFactory(e,n);function extractReductionBlockParams(e,n,a){return{separable_conv0:o(e,n,a+"/separable_conv0"),separable_conv1:o(n,n,a+"/separable_conv1"),expansion_conv:i(e,n,1,a+"/expansion_conv")}}function extractMainBlockParams(e,n){return{separable_conv0:o(e,e,n+"/separable_conv0"),separable_conv1:o(e,e,n+"/separable_conv1"),separable_conv2:o(e,e,n+"/separable_conv2")}}return{extractConvParams:i,extractSeparableConvParams:o,extractReductionBlockParams:extractReductionBlockParams,extractMainBlockParams:extractMainBlockParams}}function xception_extractParams_extractParams(e,n){var i=[],o=extractWeightsFactory(e),a=o.extractWeights,s=o.getRemainingWeights,c=extractParams_extractorsFactory(a,i),u=c.extractConvParams,l=c.extractSeparableConvParams,f=c.extractReductionBlockParams,d=c.extractMainBlockParams,p=u(3,32,3,"entry_flow/conv_in"),m=f(32,64,"entry_flow/reduction_block_0"),g=f(64,128,"entry_flow/reduction_block_1"),v={};range(n,0,1).forEach(function(e){v["main_block_"+e]=d(128,"middle_flow/main_block_"+e)});var y=f(128,256,"exit_flow/reduction_block"),b=l(256,512,"exit_flow/separable_conv");if(0!==s().length)throw Error("weights remaing after extract: "+s().length);return{paramMappings:i,params:{entry_flow:{conv_in:p,reduction_block_0:m,reduction_block_1:g},middle_flow:v,exit_flow:{reduction_block:y,separable_conv:b}}}}function extractParamsFromWeigthMap_loadParamsFactory(e,n){var i=extractWeightEntryFactory(e,n),o=loadConvParamsFactory(i),a=loadSeparableConvParamsFactory(i);function extractReductionBlockParams(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),expansion_conv:o(e+"/expansion_conv")}}function extractMainBlockParams(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),separable_conv2:a(e+"/separable_conv2")}}return{extractConvParams:o,extractSeparableConvParams:a,extractReductionBlockParams:extractReductionBlockParams,extractMainBlockParams:extractMainBlockParams}}function xception_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e,n){var i=[],o=extractParamsFromWeigthMap_loadParamsFactory(e,i),a=o.extractConvParams,s=o.extractSeparableConvParams,c=o.extractReductionBlockParams,u=o.extractMainBlockParams,l=a("entry_flow/conv_in"),f=c("entry_flow/reduction_block_0"),d=c("entry_flow/reduction_block_1"),p={};range(n,0,1).forEach(function(e){p["main_block_"+e]=u("middle_flow/main_block_"+e)});var m=c("exit_flow/reduction_block"),g=s("exit_flow/separable_conv");return disposeUnusedWeightTensors(e,i),{params:{entry_flow:{conv_in:l,reduction_block_0:f,reduction_block_1:d},middle_flow:p,exit_flow:{reduction_block:m,separable_conv:g}},paramMappings:i}}function conv(e,n,i){return g.IHx(g.Tek(e,n.filters,i,"same"),n.bias)}function reductionBlock(e,n,i){void 0===i&&(i=!0);var o=i?g.UYe(e):e;return o=depthwiseSeparableConv(o,n.separable_conv0,[1,1]),o=depthwiseSeparableConv(g.UYe(o),n.separable_conv1,[1,1]),o=g._sB(o,[3,3],[2,2],"same"),o=g.IHx(o,conv(e,n.expansion_conv,[2,2]))}function mainBlock(e,n){var i=depthwiseSeparableConv(g.UYe(e),n.separable_conv0,[1,1]);return i=depthwiseSeparableConv(g.UYe(i),n.separable_conv1,[1,1]),i=depthwiseSeparableConv(g.UYe(i),n.separable_conv2,[1,1]),i=g.IHx(i,e)}var U=function(e){function TinyXception(n){var i=e.call(this,"TinyXception")||this;return i._numMainBlocks=n,i}return __extends(TinyXception,e),TinyXception.prototype.forwardInput=function(e){var n=this,i=this.params;if(!i)throw Error("TinyXception - load model before inference");return g.lub(function(){var o=normalize(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(g.iD$(256)),a=g.UYe(conv(o,i.entry_flow.conv_in,[2,2]));return a=reductionBlock(a,i.entry_flow.reduction_block_0,!1),a=reductionBlock(a,i.entry_flow.reduction_block_1),range(n._numMainBlocks,0,1).forEach(function(e){a=mainBlock(a,i.middle_flow["main_block_"+e])}),a=reductionBlock(a,i.exit_flow.reduction_block),a=g.UYe(depthwiseSeparableConv(a,i.exit_flow.separable_conv,[1,1]))})},TinyXception.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent()])]}})})},TinyXception.prototype.getDefaultModelName=function(){return"tiny_xception_model"},TinyXception.prototype.extractParamsFromWeigthMap=function(e){return xception_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e,this._numMainBlocks)},TinyXception.prototype.extractParams=function(e){return xception_extractParams_extractParams(e,this._numMainBlocks)},TinyXception}(L);function ageGenderNet_extractParams_extractParams(e){var n=[],i=extractWeightsFactory(e),o=i.extractWeights,a=i.getRemainingWeights,s=extractFCParamsFactory(o,n),c=s(512,1,"fc/age"),u=s(512,2,"fc/gender");if(0!==a().length)throw Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{fc:{age:c,gender:u}}}}function ageGenderNet_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e){var n=[],i=extractWeightEntryFactory(e,n);function extractFcParams(e){return{weights:i(e+"/weights",2),bias:i(e+"/bias",1)}}var o={fc:{age:extractFcParams("fc/age"),gender:extractFcParams("fc/gender")}};return disposeUnusedWeightTensors(e,n),{params:o,paramMappings:n}}(c=d||(d={})).FEMALE="female",c.MALE="male";var z=function(e){function AgeGenderNet(n){void 0===n&&(n=new U(2));var i=e.call(this,"AgeGenderNet")||this;return i._faceFeatureExtractor=n,i}return __extends(AgeGenderNet,e),Object.defineProperty(AgeGenderNet.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),AgeGenderNet.prototype.runNet=function(e){var n=this,i=this.params;if(!i)throw Error(this._name+" - load model before inference");return g.lub(function(){var o=e instanceof O?n.faceFeatureExtractor.forwardInput(e):e,a=g.wS1(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1);return{age:fullyConnectedLayer(a,i.fc.age).as1D(),gender:fullyConnectedLayer(a,i.fc.gender)}})},AgeGenderNet.prototype.forwardInput=function(e){var n=this;return g.lub(function(){var i=n.runNet(e),o=i.age,a=i.gender;return{age:o,gender:g.XAC(a)}})},AgeGenderNet.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent()])]}})})},AgeGenderNet.prototype.predictAgeAndGender=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a,s,c=this;return tslib_es6_generator(this,function(u){switch(u.label){case 0:return[4,toNetInput(e)];case 1:return n=u.sent(),[4,this.forwardInput(n)];case 2:return i=u.sent(),o=g.HHK(i.age),a=g.HHK(i.gender),[4,Promise.all(o.map(function(e,n){return{ageTensor:e,genderTensor:a[n]}}).map(function(e){var n=e.ageTensor,i=e.genderTensor;return tslib_es6_awaiter(c,void 0,void 0,function(){var e,o,a,s,c;return tslib_es6_generator(this,function(u){switch(u.label){case 0:return[4,n.data()];case 1:return e=u.sent()[0],[4,i.data()];case 2:return s=(a=(o=u.sent()[0])>.5)?d.MALE:d.FEMALE,c=a?o:1-o,n.dispose(),i.dispose(),[2,{age:e,gender:s,genderProbability:c}]}})})}))];case 3:return s=u.sent(),i.age.dispose(),i.gender.dispose(),[2,n.isBatchInput?s:s[0]]}})})},AgeGenderNet.prototype.getDefaultModelName=function(){return"age_gender_model"},AgeGenderNet.prototype.dispose=function(n){void 0===n&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},AgeGenderNet.prototype.loadClassifierParams=function(e){var n=this.extractClassifierParams(e),i=n.params,o=n.paramMappings;this._params=i,this._paramMappings=o},AgeGenderNet.prototype.extractClassifierParams=function(e){return ageGenderNet_extractParams_extractParams(e)},AgeGenderNet.prototype.extractParamsFromWeigthMap=function(e){var n=seperateWeightMaps(e),i=n.featureExtractorMap,o=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),ageGenderNet_extractParamsFromWeigthMap_extractParamsFromWeigthMap(o)},AgeGenderNet.prototype.extractParams=function(e){var n=e.slice(0,e.length-1539),i=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(n),this.extractClassifierParams(i)},AgeGenderNet}(L),H=function(e){function FaceLandmark68NetBase(){return null!==e&&e.apply(this,arguments)||this}return __extends(FaceLandmark68NetBase,e),FaceLandmark68NetBase.prototype.postProcess=function(e,n,i){var o=i.map(function(e){var i=e.width,o=e.height,a=n/Math.max(o,i);return{width:i*a,height:o*a}}),a=o.length;return g.lub(function(){var createInterleavedTensor=function(e,n){return g.knu([g.hlL([68],e),g.hlL([68],n)],1).as2D(1,136).as1D()},getPadding=function(e,n){var i=o[e],a=i.width,s=i.height;return n(a,s)?Math.abs(a-s)/2:0};return e.mul(g.hlL([a,136],n)).sub(g.knu(Array.from(Array(a),function(e,n){return createInterleavedTensor(getPadding(n,function(e,n){return e<n}),getPadding(n,function(e,n){return n<e}))}))).div(g.knu(Array.from(Array(a),function(e,n){return createInterleavedTensor(o[n].width,o[n].height)})))})},FaceLandmark68NetBase.prototype.forwardInput=function(e){var n=this;return g.lub(function(){var i=n.runNet(e);return n.postProcess(i,e.inputSize,e.inputDimensions.map(function(e){return{height:e[0],width:e[1]}}))})},FaceLandmark68NetBase.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent()])]}})})},FaceLandmark68NetBase.prototype.detectLandmarks=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a=this;return tslib_es6_generator(this,function(s){switch(s.label){case 0:return[4,toNetInput(e)];case 1:return n=s.sent(),[4,Promise.all((i=g.lub(function(){return g.HHK(a.forwardInput(n))})).map(function(e,i){return tslib_es6_awaiter(a,void 0,void 0,function(){var o,a,s,c,u;return tslib_es6_generator(this,function(l){switch(l.label){case 0:return s=(a=Array).from,[4,e.data()];case 1:return c=(o=s.apply(a,[l.sent()])).filter(function(e,n){return n%2==0}),u=o.filter(function(e,n){return n%2!=0}),[2,new A(Array(68).fill(0).map(function(e,n){return new y(c[n],u[n])}),{height:n.getInputHeight(i),width:n.getInputWidth(i)})]}})})}))];case 2:return o=s.sent(),i.forEach(function(e){return e.dispose()}),[2,n.isBatchInput?o:o[0]]}})})},FaceLandmark68NetBase.prototype.getClassifierChannelsOut=function(){return 136},FaceLandmark68NetBase}(N),G=function(e){function FaceLandmark68Net(n){return void 0===n&&(n=new I),e.call(this,"FaceLandmark68Net",n)||this}return __extends(FaceLandmark68Net,e),FaceLandmark68Net.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},FaceLandmark68Net.prototype.getClassifierChannelsIn=function(){return 256},FaceLandmark68Net}(H);function extractParamsFromWeigthMapTiny(e){var n=[],i=loadParamsFactory(e,n).extractDenseBlock3Params,o={dense0:i("dense0",!0),dense1:i("dense1"),dense2:i("dense2")};return disposeUnusedWeightTensors(e,n),{params:o,paramMappings:n}}function extractParamsTiny(e){var n=[],i=extractWeightsFactory(e),o=i.extractWeights,a=i.getRemainingWeights,s=extractorsFactory(o,n).extractDenseBlock3Params,c=s(3,32,"dense0",!0),u=s(32,64,"dense1"),l=s(64,128,"dense2");if(0!==a().length)throw Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:c,dense1:u,dense2:l}}}var Y=function(e){function TinyFaceFeatureExtractor(){return e.call(this,"TinyFaceFeatureExtractor")||this}return __extends(TinyFaceFeatureExtractor,e),TinyFaceFeatureExtractor.prototype.forwardInput=function(e){var n=this.params;if(!n)throw Error("TinyFaceFeatureExtractor - load model before inference");return g.lub(function(){var i=denseBlock3(normalize(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(g.iD$(255)),n.dense0,!0);return i=denseBlock3(i,n.dense1),i=denseBlock3(i,n.dense2),i=g.wS1(i,[14,14],[2,2],"valid")})},TinyFaceFeatureExtractor.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent()])]}})})},TinyFaceFeatureExtractor.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},TinyFaceFeatureExtractor.prototype.extractParamsFromWeigthMap=function(e){return extractParamsFromWeigthMapTiny(e)},TinyFaceFeatureExtractor.prototype.extractParams=function(e){return extractParamsTiny(e)},TinyFaceFeatureExtractor}(L),Q=function(e){function FaceLandmark68TinyNet(n){return void 0===n&&(n=new Y),e.call(this,"FaceLandmark68TinyNet",n)||this}return __extends(FaceLandmark68TinyNet,e),FaceLandmark68TinyNet.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},FaceLandmark68TinyNet.prototype.getClassifierChannelsIn=function(){return 128},FaceLandmark68TinyNet}(H);function scale(e,n){return g.IHx(g.dC7(e,n.weights),n.biases)}function convLayer_convLayer(e,n,i,o,a){void 0===a&&(a="same");var s=n.conv,c=s.filters,u=s.bias,l=g.Tek(e,c,i,a);return l=scale(l=g.IHx(l,u),n.scale),o?g.UYe(l):l}function convLayer_conv(e,n){return convLayer_convLayer(e,n,[1,1],!0)}function convNoRelu(e,n){return convLayer_convLayer(e,n,[1,1],!1)}function convDown(e,n){return convLayer_convLayer(e,n,[2,2],!0,"valid")}function faceRecognitionNet_extractParams_extractorsFactory(e,n){function extractFilterValues(n,i,o){var a=e(n),s=a.length/(i*o*o);if(isFloat(s))throw Error("depth has to be an integer: "+s+", weights.length: "+a.length+", numFilters: "+i+", filterSize: "+o);return g.lub(function(){return g.p4s(g.yXz(a,[i,s,o,o]),[2,3,1,0])})}function extractConvParams(i,o,a,s){var c=extractFilterValues(i,o,a),u=g.RRF(e(o));return n.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:c,bias:u}}function extractScaleLayerParams(i,o){var a=g.RRF(e(i)),s=g.RRF(e(i));return n.push({paramPath:o+"/weights"},{paramPath:o+"/biases"}),{weights:a,biases:s}}function extractConvLayerParams(e,n,i,o){return{conv:extractConvParams(e,n,i,o+"/conv"),scale:extractScaleLayerParams(n,o+"/scale")}}function extractResidualLayerParams(e,n,i,o,a){return void 0===a&&(a=!1),{conv1:extractConvLayerParams((a?.5:1)*e,n,i,o+"/conv1"),conv2:extractConvLayerParams(e,n,i,o+"/conv2")}}return{extractConvLayerParams:extractConvLayerParams,extractResidualLayerParams:extractResidualLayerParams}}function faceRecognitionNet_extractParams_extractParams(e){var n=extractWeightsFactory(e),i=n.extractWeights,o=n.getRemainingWeights,a=[],s=faceRecognitionNet_extractParams_extractorsFactory(i,a),c=s.extractConvLayerParams,u=s.extractResidualLayerParams,l=c(4704,32,7,"conv32_down"),f=u(9216,32,3,"conv32_1"),d=u(9216,32,3,"conv32_2"),p=u(9216,32,3,"conv32_3"),m=u(36864,64,3,"conv64_down",!0),v=u(36864,64,3,"conv64_1"),y=u(36864,64,3,"conv64_2"),b=u(36864,64,3,"conv64_3"),_=u(147456,128,3,"conv128_down",!0),x=u(147456,128,3,"conv128_1"),w=u(147456,128,3,"conv128_2"),P=u(589824,256,3,"conv256_down",!0),F=u(589824,256,3,"conv256_1"),T=u(589824,256,3,"conv256_2"),A=u(589824,256,3,"conv256_down_out"),S=g.lub(function(){return g.p4s(g.odF(i(32768),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),0!==o().length)throw Error("weights remaing after extract: "+o().length);return{params:{conv32_down:l,conv32_1:f,conv32_2:d,conv32_3:p,conv64_down:m,conv64_1:v,conv64_2:y,conv64_3:b,conv128_down:_,conv128_1:x,conv128_2:w,conv256_down:P,conv256_1:F,conv256_2:T,conv256_down_out:A,fc:S},paramMappings:a}}function extractParamsFromWeigthMap_extractorsFactory(e,n){var i=extractWeightEntryFactory(e,n);function extractScaleLayerParams(e){return{weights:i(e+"/scale/weights",1),biases:i(e+"/scale/biases",1)}}function extractConvLayerParams(e){return{conv:{filters:i(e+"/conv/filters",4),bias:i(e+"/conv/bias",1)},scale:extractScaleLayerParams(e)}}function extractResidualLayerParams(e){return{conv1:extractConvLayerParams(e+"/conv1"),conv2:extractConvLayerParams(e+"/conv2")}}return{extractConvLayerParams:extractConvLayerParams,extractResidualLayerParams:extractResidualLayerParams}}function faceRecognitionNet_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e){var n=[],i=extractParamsFromWeigthMap_extractorsFactory(e,n),o=i.extractConvLayerParams,a=i.extractResidualLayerParams,s=o("conv32_down"),c=a("conv32_1"),u=a("conv32_2"),l=a("conv32_3"),f=a("conv64_down"),d=a("conv64_1"),p=a("conv64_2"),m=a("conv64_3"),g=a("conv128_down"),v=a("conv128_1"),y=a("conv128_2"),b=a("conv256_down"),_=a("conv256_1"),x=a("conv256_2"),w=a("conv256_down_out"),P=e.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!isTensor2D(P))throw Error("expected weightMap[fc] to be a Tensor2D, instead have "+P);return disposeUnusedWeightTensors(e,n),{params:{conv32_down:s,conv32_1:c,conv32_2:u,conv32_3:l,conv64_down:f,conv64_1:d,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:y,conv256_down:b,conv256_1:_,conv256_2:x,conv256_down_out:w,fc:P},paramMappings:n}}function residual(e,n){var i=convLayer_conv(e,n.conv1);return i=convNoRelu(i,n.conv2),i=g.IHx(i,e),i=g.UYe(i)}function residualDown(e,n){var i=convDown(e,n.conv1);i=convNoRelu(i,n.conv2);var o=g.wS1(e,2,2,"valid"),a=g.lls(o.shape),s=o.shape[3]!==i.shape[3];if(o.shape[1]!==i.shape[1]||o.shape[2]!==i.shape[2]){var c=__spreadArrays(i.shape);c[1]=1;var u=g.lls(c),l=__spreadArrays((i=g.zoF([i,u],1)).shape);l[2]=1;var f=g.lls(l);i=g.zoF([i,f],2)}return o=s?g.zoF([o,a],3):o,i=g.IHx(o,i),i=g.UYe(i)}__extends(function(){return null!==o&&o.apply(this,arguments)||this},o=G);var $=function(e){function FaceRecognitionNet(){return e.call(this,"FaceRecognitionNet")||this}return __extends(FaceRecognitionNet,e),FaceRecognitionNet.prototype.forwardInput=function(e){var n=this.params;if(!n)throw Error("FaceRecognitionNet - load model before inference");return g.lub(function(){var i=convDown(normalize(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(g.iD$(256)),n.conv32_down);i=residual(i=g._sB(i,3,2,"valid"),n.conv32_1),i=residual(i,n.conv32_2),i=residualDown(i=residual(i,n.conv32_3),n.conv64_down),i=residual(i,n.conv64_1),i=residual(i,n.conv64_2),i=residualDown(i=residual(i,n.conv64_3),n.conv128_down),i=residual(i,n.conv128_1),i=residualDown(i=residual(i,n.conv128_2),n.conv256_down),i=residual(i,n.conv256_1);var o=(i=residualDown(i=residual(i,n.conv256_2),n.conv256_down_out)).mean([1,2]);return g.OI3(o,n.fc)})},FaceRecognitionNet.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent()])]}})})},FaceRecognitionNet.prototype.computeFaceDescriptor=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a=this;return tslib_es6_generator(this,function(s){switch(s.label){case 0:return[4,toNetInput(e)];case 1:return n=s.sent(),[4,Promise.all((i=g.lub(function(){return g.HHK(a.forwardInput(n))})).map(function(e){return e.data()}))];case 2:return o=s.sent(),i.forEach(function(e){return e.dispose()}),[2,n.isBatchInput?o:o[0]]}})})},FaceRecognitionNet.prototype.getDefaultModelName=function(){return"face_recognition_model"},FaceRecognitionNet.prototype.extractParamsFromWeigthMap=function(e){return faceRecognitionNet_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e)},FaceRecognitionNet.prototype.extractParams=function(e){return faceRecognitionNet_extractParams_extractParams(e)},FaceRecognitionNet}(L);function extendWithGender(e,n,i){return Object.assign({},e,{gender:n,genderProbability:i})}var X=function(){function MtcnnOptions(e){var n=void 0===e?{}:e,i=n.minFaceSize,o=n.scaleFactor,a=n.maxNumScales,s=n.scoreThresholds,c=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=i||20,this._scaleFactor=o||.709,this._maxNumScales=a||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=c,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(e){return"number"!=typeof e}))throw Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(e){return"number"!=typeof e})))throw Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(MtcnnOptions.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(MtcnnOptions.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(MtcnnOptions.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(MtcnnOptions.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(MtcnnOptions.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),MtcnnOptions}();function ssdMobilenetv1_extractParams_extractorsFactory(e,n){function extractDepthwiseConvParams(i,o){var a=g.yXz(e(9*i),[3,3,i,1]),s=g.RRF(e(i)),c=g.RRF(e(i)),u=g.RRF(e(i)),l=g.RRF(e(i));return n.push({paramPath:o+"/filters"},{paramPath:o+"/batch_norm_scale"},{paramPath:o+"/batch_norm_offset"},{paramPath:o+"/batch_norm_mean"},{paramPath:o+"/batch_norm_variance"}),{filters:a,batch_norm_scale:s,batch_norm_offset:c,batch_norm_mean:u,batch_norm_variance:l}}function extractConvParams(i,o,a,s,c){var u=g.yXz(e(i*o*a*a),[a,a,i,o]),l=g.RRF(e(o));return n.push({paramPath:s+"/filters"},{paramPath:s+"/"+(c?"batch_norm_offset":"bias")}),{filters:u,bias:l}}function extractPointwiseConvParams(e,n,i,o){var a=extractConvParams(e,n,i,o,!0);return{filters:a.filters,batch_norm_offset:a.bias}}function extractConvPairParams(e,n,i){return{depthwise_conv:extractDepthwiseConvParams(e,i+"/depthwise_conv"),pointwise_conv:extractPointwiseConvParams(e,n,1,i+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:extractPointwiseConvParams(3,32,3,"mobilenetv1/conv_0"),conv_1:extractConvPairParams(32,64,"mobilenetv1/conv_1"),conv_2:extractConvPairParams(64,128,"mobilenetv1/conv_2"),conv_3:extractConvPairParams(128,128,"mobilenetv1/conv_3"),conv_4:extractConvPairParams(128,256,"mobilenetv1/conv_4"),conv_5:extractConvPairParams(256,256,"mobilenetv1/conv_5"),conv_6:extractConvPairParams(256,512,"mobilenetv1/conv_6"),conv_7:extractConvPairParams(512,512,"mobilenetv1/conv_7"),conv_8:extractConvPairParams(512,512,"mobilenetv1/conv_8"),conv_9:extractConvPairParams(512,512,"mobilenetv1/conv_9"),conv_10:extractConvPairParams(512,512,"mobilenetv1/conv_10"),conv_11:extractConvPairParams(512,512,"mobilenetv1/conv_11"),conv_12:extractConvPairParams(512,1024,"mobilenetv1/conv_12"),conv_13:extractConvPairParams(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:extractPointwiseConvParams(1024,256,1,"prediction_layer/conv_0"),conv_1:extractPointwiseConvParams(256,512,3,"prediction_layer/conv_1"),conv_2:extractPointwiseConvParams(512,128,1,"prediction_layer/conv_2"),conv_3:extractPointwiseConvParams(128,256,3,"prediction_layer/conv_3"),conv_4:extractPointwiseConvParams(256,128,1,"prediction_layer/conv_4"),conv_5:extractPointwiseConvParams(128,256,3,"prediction_layer/conv_5"),conv_6:extractPointwiseConvParams(256,64,1,"prediction_layer/conv_6"),conv_7:extractPointwiseConvParams(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:extractConvParams(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:extractConvParams(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:extractConvParams(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:extractConvParams(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:extractConvParams(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:extractConvParams(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:extractConvParams(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:extractConvParams(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:extractConvParams(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:extractConvParams(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:extractConvParams(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:extractConvParams(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function ssdMobilenetv1_extractParams_extractParams(e){var n=[],i=extractWeightsFactory(e),o=i.extractWeights,a=i.getRemainingWeights,s=ssdMobilenetv1_extractParams_extractorsFactory(o,n),c=s.extractMobilenetV1Params,u=s.extractPredictionLayerParams,l=c(),f=u(),d=g.wOQ(o(20472),[1,5118,4]);if(n.push({paramPath:"output_layer/extra_dim"}),0!==a().length)throw Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:l,prediction_layer:f,output_layer:{extra_dim:d}},paramMappings:n}}function ssdMobilenetv1_extractParamsFromWeigthMap_extractorsFactory(e,n){var i=extractWeightEntryFactory(e,n);function extractPointwiseConvParams(e,n,o){return{filters:i(e+"/Conv2d_"+n+"_pointwise/weights",4,o+"/filters"),batch_norm_offset:i(e+"/Conv2d_"+n+"_pointwise/convolution_bn_offset",1,o+"/batch_norm_offset")}}function extractConvPairParams(e){var n="mobilenetv1/conv_"+e,o="MobilenetV1/Conv2d_"+e+"_depthwise",a=n+"/depthwise_conv";return{depthwise_conv:{filters:i(o+"/depthwise_weights",4,a+"/filters"),batch_norm_scale:i(o+"/BatchNorm/gamma",1,a+"/batch_norm_scale"),batch_norm_offset:i(o+"/BatchNorm/beta",1,a+"/batch_norm_offset"),batch_norm_mean:i(o+"/BatchNorm/moving_mean",1,a+"/batch_norm_mean"),batch_norm_variance:i(o+"/BatchNorm/moving_variance",1,a+"/batch_norm_variance")},pointwise_conv:extractPointwiseConvParams("MobilenetV1",e,n+"/pointwise_conv")}}function extractConvParams(e,n){return{filters:i(e+"/weights",4,n+"/filters"),bias:i(e+"/biases",1,n+"/bias")}}function extractBoxPredictorParams(e){return{box_encoding_predictor:extractConvParams("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:extractConvParams("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:extractPointwiseConvParams("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:extractConvPairParams(1),conv_2:extractConvPairParams(2),conv_3:extractConvPairParams(3),conv_4:extractConvPairParams(4),conv_5:extractConvPairParams(5),conv_6:extractConvPairParams(6),conv_7:extractConvPairParams(7),conv_8:extractConvPairParams(8),conv_9:extractConvPairParams(9),conv_10:extractConvPairParams(10),conv_11:extractConvPairParams(11),conv_12:extractConvPairParams(12),conv_13:extractConvPairParams(13)}},extractPredictionLayerParams:function(){return{conv_0:extractPointwiseConvParams("Prediction",0,"prediction_layer/conv_0"),conv_1:extractPointwiseConvParams("Prediction",1,"prediction_layer/conv_1"),conv_2:extractPointwiseConvParams("Prediction",2,"prediction_layer/conv_2"),conv_3:extractPointwiseConvParams("Prediction",3,"prediction_layer/conv_3"),conv_4:extractPointwiseConvParams("Prediction",4,"prediction_layer/conv_4"),conv_5:extractPointwiseConvParams("Prediction",5,"prediction_layer/conv_5"),conv_6:extractPointwiseConvParams("Prediction",6,"prediction_layer/conv_6"),conv_7:extractPointwiseConvParams("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:extractBoxPredictorParams(0),box_predictor_1:extractBoxPredictorParams(1),box_predictor_2:extractBoxPredictorParams(2),box_predictor_3:extractBoxPredictorParams(3),box_predictor_4:extractBoxPredictorParams(4),box_predictor_5:extractBoxPredictorParams(5)}}}}function ssdMobilenetv1_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e){var n=[],i=ssdMobilenetv1_extractParamsFromWeigthMap_extractorsFactory(e,n),o=i.extractMobilenetV1Params,a=i.extractPredictionLayerParams,s=e["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!isTensor(s,3))throw Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+s);var c={mobilenetv1:o(),prediction_layer:a(),output_layer:{extra_dim:s}};return disposeUnusedWeightTensors(e,n),{params:c,paramMappings:n}}function pointwiseConvLayer(e,n,i){return g.lub(function(){var o=g.Tek(e,n.filters,i,"same");return o=g.IHx(o,n.batch_norm_offset),g.iUl(o,0,6)})}function depthwiseConvLayer(e,n,i){return g.lub(function(){var o=g.B10(e,n.filters,i,"same");return o=g.tgs(o,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,.0010000000474974513),g.iUl(o,0,6)})}function getStridesForLayerIdx(e){return[2,4,6,12].some(function(n){return n===e})?[2,2]:[1,1]}function mobileNetV1(e,n){return g.lub(function(){var i=null,o=pointwiseConvLayer(e,n.conv_0,[2,2]);if([n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13].forEach(function(e,n){var a=n+1,s=getStridesForLayerIdx(a);o=pointwiseConvLayer(o=depthwiseConvLayer(o,e.depthwise_conv,s),e.pointwise_conv,[1,1]),11===a&&(i=o)}),null===i)throw Error("mobileNetV1 - output of conv layer 11 is null");return{out:o,conv11:i}})}function nonMaxSuppression_nonMaxSuppression(e,n,i,o,a){var s=Math.min(i,e.shape[0]),c=n.map(function(e,n){return{score:e,boxIndex:n}}).filter(function(e){return e.score>a}).sort(function(e,n){return n.score-e.score}),u=[];return c.forEach(function(n){if(!(u.length>=s)){for(var i=n.score,c=u.length-1;c>=0;--c){var l=IOU(e,n.boxIndex,u[c]);if(0!==l&&(n.score*=l<=o?1:0,n.score<=a))break}i===n.score&&u.push(n.boxIndex)}}),u}function IOU(e,n,i){var o=e.arraySync(),a=Math.min(o[n][0],o[n][2]),s=Math.min(o[n][1],o[n][3]),c=Math.max(o[n][0],o[n][2]),u=Math.max(o[n][1],o[n][3]),l=Math.min(o[i][0],o[i][2]),f=Math.min(o[i][1],o[i][3]),d=Math.max(o[i][0],o[i][2]),p=Math.max(o[i][1],o[i][3]),m=(c-a)*(u-s),g=(d-l)*(p-f);if(m<=0||g<=0)return 0;var v=Math.max(Math.min(c,d)-Math.max(a,l),0)*Math.max(Math.min(u,p)-Math.max(s,f),0);return v/(m+g-v)}function getCenterCoordinatesAndSizesLayer(e){var n=g.HHK(g.p4s(e,[1,0])),i=[g.luU(n[2],n[0]),g.luU(n[3],n[1])],o=[g.IHx(n[0],g.hiC(i[0],g.iD$(2))),g.IHx(n[1],g.hiC(i[1],g.iD$(2)))];return{sizes:i,centers:o}}function decodeBoxesLayer(e,n){var i=getCenterCoordinatesAndSizesLayer(e),o=i.sizes,a=i.centers,s=g.HHK(g.p4s(n,[1,0])),c=g.hiC(g.dC7(g.Qqt(g.hiC(s[2],g.iD$(5))),o[0]),g.iD$(2)),u=g.IHx(g.dC7(g.hiC(s[0],g.iD$(10)),o[0]),a[0]),l=g.hiC(g.dC7(g.Qqt(g.hiC(s[3],g.iD$(5))),o[1]),g.iD$(2)),f=g.IHx(g.dC7(g.hiC(s[1],g.iD$(10)),o[1]),a[1]);return g.p4s(g.knu([g.luU(u,c),g.luU(f,l),g.IHx(u,c),g.IHx(f,l)]),[1,0])}function outputLayer(e,n,i){return g.lub(function(){var o=e.shape[0],a=decodeBoxesLayer(g.XLQ(g.Gg6(i.extra_dim,[o,1,1]),[-1,4]),g.XLQ(e,[-1,4]));a=g.XLQ(a,[o,a.shape[0]/o,4]);var s=g.XD2(g.tPi(n,[0,0,1],[-1,-1,-1])),c=g.tPi(s,[0,0,0],[-1,-1,1]);return c=g.XLQ(c,[o,c.shape[1]]),{boxes:g.HHK(a),scores:g.HHK(c)}})}function boxPredictionLayer(e,n){return g.lub(function(){var i=e.shape[0];return{boxPredictionEncoding:g.XLQ(convLayer(e,n.box_encoding_predictor),[i,-1,1,4]),classPrediction:g.XLQ(convLayer(e,n.class_predictor),[i,-1,3])}})}function predictionLayer(e,n,i){return g.lub(function(){var o=pointwiseConvLayer(e,i.conv_0,[1,1]),a=pointwiseConvLayer(o,i.conv_1,[2,2]),s=pointwiseConvLayer(a,i.conv_2,[1,1]),c=pointwiseConvLayer(s,i.conv_3,[2,2]),u=pointwiseConvLayer(c,i.conv_4,[1,1]),l=pointwiseConvLayer(u,i.conv_5,[2,2]),f=pointwiseConvLayer(l,i.conv_6,[1,1]),d=pointwiseConvLayer(f,i.conv_7,[2,2]),p=boxPredictionLayer(n,i.box_predictor_0),m=boxPredictionLayer(e,i.box_predictor_1),v=boxPredictionLayer(a,i.box_predictor_2),y=boxPredictionLayer(c,i.box_predictor_3),b=boxPredictionLayer(l,i.box_predictor_4),_=boxPredictionLayer(d,i.box_predictor_5);return{boxPredictions:g.zoF([p.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding,y.boxPredictionEncoding,b.boxPredictionEncoding,_.boxPredictionEncoding],1),classPredictions:g.zoF([p.classPrediction,m.classPrediction,v.classPrediction,y.classPrediction,b.classPrediction,_.classPrediction],1)}})}var K=function(){function SsdMobilenetv1Options(e){var n=void 0===e?{}:e,i=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=i||.5,this._maxResults=o||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(SsdMobilenetv1Options.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(SsdMobilenetv1Options.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),SsdMobilenetv1Options}(),J=function(e){function SsdMobilenetv1(){return e.call(this,"SsdMobilenetv1")||this}return __extends(SsdMobilenetv1,e),SsdMobilenetv1.prototype.forwardInput=function(e){var n=this.params;if(!n)throw Error("SsdMobilenetv1 - load model before inference");return g.lub(function(){var i=e.toBatchTensor(512,!1).toFloat(),o=mobileNetV1(g.luU(g.dC7(i,g.iD$(.007843137718737125)),g.iD$(1)),n.mobilenetv1),a=predictionLayer(o.out,o.conv11,n.prediction_layer);return outputLayer(a.boxPredictions,a.classPredictions,n.output_layer)})},SsdMobilenetv1.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent()])]}})})},SsdMobilenetv1.prototype.locateFaces=function(e,n){return void 0===n&&(n={}),tslib_es6_awaiter(this,void 0,void 0,function(){var i,o,a,s,c,u,l,f,d,p,m,g,v,y,b,_,x,F,T,A;return tslib_es6_generator(this,function(S){switch(S.label){case 0:return o=(i=new K(n)).maxResults,a=i.minConfidence,[4,toNetInput(e)];case 1:for(s=S.sent(),u=(c=this.forwardInput(s)).boxes,l=c.scores,f=u[0],d=l[0],p=1;p<u.length;p++)u[p].dispose(),l[p].dispose();return v=(g=Array).from,[4,d.data()];case 2:return m=v.apply(g,[S.sent()]),y=nonMaxSuppression_nonMaxSuppression(f,m,o,.5,a),b=s.getReshapedInputDimensions(0),x=(_=s.inputSize)/b.width,F=_/b.height,T=f.arraySync(),A=y.map(function(e){var n=[Math.max(0,T[e][0]),Math.min(1,T[e][2])].map(function(e){return e*F}),i=n[0],o=n[1],a=[Math.max(0,T[e][1]),Math.min(1,T[e][3])].map(function(e){return e*x}),c=a[0],u=a[1];return new w(m[e],new P(c,i,u-c,o-i),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),d.dispose(),[2,A]}})})},SsdMobilenetv1.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},SsdMobilenetv1.prototype.extractParamsFromWeigthMap=function(e){return ssdMobilenetv1_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e)},SsdMobilenetv1.prototype.extractParams=function(e){return ssdMobilenetv1_extractParams_extractParams(e)},SsdMobilenetv1}(L);__extends(function(){return null!==a&&a.apply(this,arguments)||this},a=J);var Z=[new y(.738768,.874946),new y(2.42204,2.65704),new y(4.30971,7.04493),new y(10.246,4.59428),new y(12.6868,11.8741)],ee=[new y(1.603231,2.094468),new y(6.041143,7.080126),new y(2.882459,3.518061),new y(4.266906,5.178857),new y(9.041765,10.66308)],et=[117.001,114.697,97.404],isNumber=function(e){return"number"==typeof e};function validateConfig(e){if(!e)throw Error("invalid config: "+e);if("boolean"!=typeof e.withSeparableConvs)throw Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!isNumber(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(e){return"string"==typeof e}))throw Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(e){return e||{}}).every(function(e){return isNumber(e.x)&&isNumber(e.y)}))throw Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(isNumber)))throw Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function leaky(e){return g.lub(function(){var n=g.dC7(e,g.iD$(.10000000149011612));return g.IHx(g.UYe(g.luU(e,n)),n)})}function convWithBatchNorm(e,n){return g.lub(function(){var i=g.vku(e,[[0,0],[1,1],[1,1],[0,0]]);return i=g.Tek(i,n.conv.filters,[1,1],"valid"),i=g.luU(i,n.bn.sub),i=g.dC7(i,n.bn.truediv),leaky(i=g.IHx(i,n.conv.bias))})}function depthwiseSeparableConv_depthwiseSeparableConv(e,n){return g.lub(function(){var i=g.vku(e,[[0,0],[1,1],[1,1],[0,0]]);return i=g.U_I(i,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),leaky(i=g.IHx(i,n.bias))})}function tinyYolov2_extractParams_extractorsFactory(e,n){var i=extractConvParamsFactory(e,n);function extractBatchNormParams(i,o){var a=g.RRF(e(i)),s=g.RRF(e(i));return n.push({paramPath:o+"/sub"},{paramPath:o+"/truediv"}),{sub:a,truediv:s}}function extractConvWithBatchNormParams(e,n,o){return{conv:i(e,n,3,o+"/conv"),bn:extractBatchNormParams(n,o+"/bn")}}return{extractConvParams:i,extractConvWithBatchNormParams:extractConvWithBatchNormParams,extractSeparableConvParams:extractSeparableConvParamsFactory(e,n)}}function tinyYolov2_extractParams_extractParams(e,n,i,o){var a,s=extractWeightsFactory(e),c=s.extractWeights,u=s.getRemainingWeights,l=[],f=tinyYolov2_extractParams_extractorsFactory(c,l),d=f.extractConvParams,p=f.extractConvWithBatchNormParams,m=f.extractSeparableConvParams;if(n.withSeparableConvs){var g=o[0],v=o[1],y=o[2],b=o[3],_=o[4],x=o[5],w=o[6],P=o[7],F=o[8],T=n.isFirstLayerConv2d?d(g,v,3,"conv0"):m(g,v,"conv0"),A=m(v,y,"conv1"),S=m(y,b,"conv2"),k=m(b,_,"conv3"),C=m(_,x,"conv4"),E=m(x,w,"conv5"),B=P?m(w,P,"conv6"):void 0,D=F?m(P,F,"conv7"):void 0,M=d(F||P||w,5*i,1,"conv8");a={conv0:T,conv1:A,conv2:S,conv3:k,conv4:C,conv5:E,conv6:B,conv7:D,conv8:M}}else{var g=o[0],v=o[1],y=o[2],b=o[3],_=o[4],x=o[5],w=o[6],P=o[7],F=o[8],T=p(g,v,"conv0"),A=p(v,y,"conv1"),S=p(y,b,"conv2"),k=p(b,_,"conv3"),C=p(_,x,"conv4"),E=p(x,w,"conv5"),B=p(w,P,"conv6"),D=p(P,F,"conv7"),M=d(F,5*i,1,"conv8");a={conv0:T,conv1:A,conv2:S,conv3:k,conv4:C,conv5:E,conv6:B,conv7:D,conv8:M}}if(0!==u().length)throw Error("weights remaing after extract: "+u().length);return{params:a,paramMappings:l}}function tinyYolov2_extractParamsFromWeigthMap_extractorsFactory(e,n){var i=extractWeightEntryFactory(e,n);function extractBatchNormParams(e){return{sub:i(e+"/sub",1),truediv:i(e+"/truediv",1)}}function extractConvParams(e){return{filters:i(e+"/filters",4),bias:i(e+"/bias",1)}}function extractConvWithBatchNormParams(e){return{conv:extractConvParams(e+"/conv"),bn:extractBatchNormParams(e+"/bn")}}return{extractConvParams:extractConvParams,extractConvWithBatchNormParams:extractConvWithBatchNormParams,extractSeparableConvParams:loadSeparableConvParamsFactory(i)}}function tinyYolov2_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e,n){var i,o=[],a=tinyYolov2_extractParamsFromWeigthMap_extractorsFactory(e,o),s=a.extractConvParams,c=a.extractConvWithBatchNormParams,u=a.extractSeparableConvParams;if(n.withSeparableConvs){var l=n.filterSizes&&n.filterSizes.length||9;i={conv0:n.isFirstLayerConv2d?s("conv0"):u("conv0"),conv1:u("conv1"),conv2:u("conv2"),conv3:u("conv3"),conv4:u("conv4"),conv5:u("conv5"),conv6:l>7?u("conv6"):void 0,conv7:l>8?u("conv7"):void 0,conv8:s("conv8")}}else i={conv0:c("conv0"),conv1:c("conv1"),conv2:c("conv2"),conv3:c("conv3"),conv4:c("conv4"),conv5:c("conv5"),conv6:c("conv6"),conv7:c("conv7"),conv8:s("conv8")};return disposeUnusedWeightTensors(e,o),{params:i,paramMappings:o}}(u=p||(p={}))[u.XS=224]="XS",u[u.SM=320]="SM",u[u.MD=416]="MD",u[u.LG=608]="LG";var er=function(){function TinyYolov2Options(e){var n=void 0===e?{}:e,i=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=i||416,this._scoreThreshold=o||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(TinyYolov2Options.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(TinyYolov2Options.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),TinyYolov2Options}(),en=function(e){function TinyYolov2Base(n){var i=e.call(this,"TinyYolov2")||this;return validateConfig(n),i._config=n,i}return __extends(TinyYolov2Base,e),Object.defineProperty(TinyYolov2Base.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(TinyYolov2Base.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(TinyYolov2Base.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),TinyYolov2Base.prototype.runTinyYolov2=function(e,n){var i=convWithBatchNorm(e,n.conv0);return i=convWithBatchNorm(i=g._sB(i,[2,2],[2,2],"same"),n.conv1),i=convWithBatchNorm(i=g._sB(i,[2,2],[2,2],"same"),n.conv2),i=convWithBatchNorm(i=g._sB(i,[2,2],[2,2],"same"),n.conv3),i=convWithBatchNorm(i=g._sB(i,[2,2],[2,2],"same"),n.conv4),i=convWithBatchNorm(i=g._sB(i,[2,2],[2,2],"same"),n.conv5),i=convWithBatchNorm(i=g._sB(i,[2,2],[1,1],"same"),n.conv6),convLayer(i=convWithBatchNorm(i,n.conv7),n.conv8,"valid",!1)},TinyYolov2Base.prototype.runMobilenet=function(e,n){var i=this.config.isFirstLayerConv2d?leaky(convLayer(e,n.conv0,"valid",!1)):depthwiseSeparableConv_depthwiseSeparableConv(e,n.conv0);return i=depthwiseSeparableConv_depthwiseSeparableConv(i=g._sB(i,[2,2],[2,2],"same"),n.conv1),i=depthwiseSeparableConv_depthwiseSeparableConv(i=g._sB(i,[2,2],[2,2],"same"),n.conv2),i=depthwiseSeparableConv_depthwiseSeparableConv(i=g._sB(i,[2,2],[2,2],"same"),n.conv3),i=depthwiseSeparableConv_depthwiseSeparableConv(i=g._sB(i,[2,2],[2,2],"same"),n.conv4),i=depthwiseSeparableConv_depthwiseSeparableConv(i=g._sB(i,[2,2],[2,2],"same"),n.conv5),i=g._sB(i,[2,2],[1,1],"same"),i=n.conv6?depthwiseSeparableConv_depthwiseSeparableConv(i,n.conv6):i,convLayer(i=n.conv7?depthwiseSeparableConv_depthwiseSeparableConv(i,n.conv7):i,n.conv8,"valid",!1)},TinyYolov2Base.prototype.forwardInput=function(e,n){var i=this,o=this.params;if(!o)throw Error("TinyYolov2 - load model before inference");return g.lub(function(){var a=e.toBatchTensor(n,!1).toFloat();return a=(a=i.config.meanRgb?normalize(a,i.config.meanRgb):a).div(g.iD$(256)),i.config.withSeparableConvs?i.runMobilenet(a,o):i.runTinyYolov2(a,o)})},TinyYolov2Base.prototype.forward=function(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){var i;return tslib_es6_generator(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,toNetInput(e)];case 1:return[4,i.apply(this,[o.sent(),n])];case 2:return[2,o.sent()]}})})},TinyYolov2Base.prototype.detect=function(e,n){return void 0===n&&(n={}),tslib_es6_awaiter(this,void 0,void 0,function(){var i,o,a,s,c,u,l,f,d,p,m,v,y=this;return tslib_es6_generator(this,function(b){switch(b.label){case 0:return o=(i=new er(n)).inputSize,a=i.scoreThreshold,[4,toNetInput(e)];case 1:return s=b.sent(),[4,this.forwardInput(s,o)];case 2:return c=b.sent(),u=g.lub(function(){return g.HHK(c)[0].expandDims()}),l={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(u,s.getReshapedInputDimensions(0),a)];case 3:return f=b.sent(),c.dispose(),u.dispose(),d=f.map(function(e){return e.box}),p=f.map(function(e){return e.score}),m=f.map(function(e){return e.classScore}),v=f.map(function(e){return y.config.classes[e.label]}),[2,nonMaxSuppression(d.map(function(e){return e.rescale(o)}),p,this.config.iouThreshold,!0).map(function(e){return new x(p[e],m[e],v[e],d[e],l)})]}})})},TinyYolov2Base.prototype.getDefaultModelName=function(){return""},TinyYolov2Base.prototype.extractParamsFromWeigthMap=function(e){return tinyYolov2_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e,this.config)},TinyYolov2Base.prototype.extractParams=function(e){var n=this.config.filterSizes||TinyYolov2Base.DEFAULT_FILTER_SIZES,i=n?n.length:void 0;if(7!==i&&8!==i&&9!==i)throw Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return tinyYolov2_extractParams_extractParams(e,this.config,this.boxEncodingSize,n)},TinyYolov2Base.prototype.extractBoxes=function(e,n,i){return tslib_es6_awaiter(this,void 0,void 0,function(){var o,a,s,c,u,l,f,d,p,m,v,y,b,x,w,P,F,T,A,S,k,C,E,B,D,M,O,L,I,N=this;return tslib_es6_generator(this,function(R){switch(R.label){case 0:return c=(s=Math.max(o=n.width,a=n.height))/o,u=s/a,l=e.shape[1],f=this.config.anchors.length,p=(d=g.lub(function(){var n=e.reshape([l,l,f,N.boxEncodingSize]);return[n.slice([0,0,0,0],[l,l,f,4]),n.slice([0,0,0,4],[l,l,f,1]),N.withClassScores?g.XAC(n.slice([0,0,0,5],[l,l,f,N.config.classes.length]),3):g.iD$(0)]}))[0],m=d[1],v=d[2],y=[],[4,m.array()];case 1:return b=R.sent(),[4,p.array()];case 2:x=R.sent(),w=0,R.label=3;case 3:if(!(w<l))return[3,12];P=0,R.label=4;case 4:if(!(P<l))return[3,11];F=0,R.label=5;case 5:if(!(F<f))return[3,10];if(T=sigmoid(b[w][P][F][0]),!(!i||T>i))return[3,9];if(A=(P+sigmoid(x[w][P][F][0]))/l*c,S=(w+sigmoid(x[w][P][F][1]))/l*u,k=Math.exp(x[w][P][F][2])*this.config.anchors[F].x/l*c,C=Math.exp(x[w][P][F][3])*this.config.anchors[F].y/l*u,E=A-k/2,B=S-C/2,D={row:w,col:P,anchor:F},!this.withClassScores)return[3,7];return[4,this.extractPredictedClass(v,D)];case 6:return I=R.sent(),[3,8];case 7:I={classScore:1,label:0},R.label=8;case 8:O=(M=I).classScore,L=M.label,y.push(__assign({box:new _(E,B,E+k,B+C),score:T,classScore:T*O,label:L},D)),R.label=9;case 9:return F++,[3,5];case 10:return P++,[3,4];case 11:return w++,[3,3];case 12:return p.dispose(),m.dispose(),v.dispose(),[2,y]}})})},TinyYolov2Base.prototype.extractPredictedClass=function(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){var i,o,a,s;return tslib_es6_generator(this,function(c){switch(c.label){case 0:return i=n.row,o=n.col,a=n.anchor,[4,e.array()];case 1:return s=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(e,n){return s[i][o][a][n]}).map(function(e,n){return{classScore:e,label:n}}).reduce(function(e,n){return e.classScore>n.classScore?e:n})]}})})},TinyYolov2Base.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],TinyYolov2Base}(L),ei=function(e){function TinyYolov2(n){void 0===n&&(n=!0);var i=Object.assign({},{withSeparableConvs:n,iouThreshold:.4,classes:["face"]},n?{anchors:ee,meanRgb:et}:{anchors:Z,withClassScores:!0});return e.call(this,i)||this}return __extends(TinyYolov2,e),Object.defineProperty(TinyYolov2.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(TinyYolov2.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),TinyYolov2.prototype.locateFaces=function(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,this.detect(e,n)];case 1:return[2,i.sent().map(function(e){return new w(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},TinyYolov2.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},TinyYolov2.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},TinyYolov2}(en),eo=function(e){function TinyFaceDetectorOptions(){var n=null!==e&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return __extends(TinyFaceDetectorOptions,e),TinyFaceDetectorOptions}(er),ea=function(){function ComposableTask(){}return ComposableTask.prototype.then=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[i.sent()])]}})})},ComposableTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(e){throw Error("ComposableTask - run is not implemented")})})},ComposableTask}();function extendWithFaceDescriptor(e,n){return Object.assign({},e,{descriptor:n})}function extractAllFacesAndComputeResults(e,n,i,o,a){return void 0===a&&(a=function(e){return e.alignedRect}),tslib_es6_awaiter(this,void 0,void 0,function(){var s,c,u,l,f;return tslib_es6_generator(this,function(d){switch(d.label){case 0:if(s=e.map(function(e){return WithFaceLandmarks_isWithFaceLandmarks(e)?a(e):e.detection}),u=o)return[3,5];if(!(n instanceof g.esB))return[3,2];return[4,extractFaceTensors(n,s)];case 1:return l=d.sent(),[3,4];case 2:return[4,extractFaces(n,s)];case 3:l=d.sent(),d.label=4;case 4:u=l,d.label=5;case 5:return[4,i(c=u)];case 6:return f=d.sent(),c.forEach(function(e){return e instanceof g.esB&&e.dispose()}),[2,f]}})})}function extractSingleFaceAndComputeResult(e,n,i,o,a){return tslib_es6_awaiter(this,void 0,void 0,function(){var s=this;return tslib_es6_generator(this,function(c){return[2,extractAllFacesAndComputeResults([e],n,function(e){return tslib_es6_awaiter(s,void 0,void 0,function(){return tslib_es6_generator(this,function(n){return[2,i(e[0])]})})},o,a)]})})}function bgrToRgbTensor(e){return g.lub(function(){return g.knu(g.HHK(e,3).reverse(),3)})}function mtcnn_extractParams_extractorsFactory(e,n){var i=extractConvParamsFactory(e,n),o=extractFCParamsFactory(e,n);function extractPReluParams(i,o){var a=g.RRF(e(i));return n.push({paramPath:o}),a}function extractSharedParams(e,n,o){return void 0===o&&(o=!1),{conv1:i(e[0],e[1],3,n+"/conv1"),prelu1_alpha:extractPReluParams(e[1],n+"/prelu1_alpha"),conv2:i(e[1],e[2],3,n+"/conv2"),prelu2_alpha:extractPReluParams(e[2],n+"/prelu2_alpha"),conv3:i(e[2],e[3],o?2:3,n+"/conv3"),prelu3_alpha:extractPReluParams(e[3],n+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=extractSharedParams([3,10,16,32],"pnet"),n=i(32,2,1,"pnet/conv4_1"),o=i(32,4,1,"pnet/conv4_2");return __assign(__assign({},e),{conv4_1:n,conv4_2:o})},extractRNetParams:function(){var e=extractSharedParams([3,28,48,64],"rnet",!0),n=o(576,128,"rnet/fc1"),i=extractPReluParams(128,"rnet/prelu4_alpha"),a=o(128,2,"rnet/fc2_1"),s=o(128,4,"rnet/fc2_2");return __assign(__assign({},e),{fc1:n,prelu4_alpha:i,fc2_1:a,fc2_2:s})},extractONetParams:function(){var e=extractSharedParams([3,32,64,64],"onet"),n=i(64,128,2,"onet/conv4"),a=extractPReluParams(128,"onet/prelu4_alpha"),s=o(1152,256,"onet/fc1"),c=extractPReluParams(256,"onet/prelu5_alpha"),u=o(256,2,"onet/fc2_1"),l=o(256,4,"onet/fc2_2"),f=o(256,10,"onet/fc2_3");return __assign(__assign({},e),{conv4:n,prelu4_alpha:a,fc1:s,prelu5_alpha:c,fc2_1:u,fc2_2:l,fc2_3:f})}}}function mtcnn_extractParams_extractParams(e){var n=extractWeightsFactory(e),i=n.extractWeights,o=n.getRemainingWeights,a=[],s=mtcnn_extractParams_extractorsFactory(i,a),c=s.extractPNetParams,u=s.extractRNetParams,l=s.extractONetParams,f=c(),d=u(),p=l();if(0!==o().length)throw Error("weights remaing after extract: "+o().length);return{params:{pnet:f,rnet:d,onet:p},paramMappings:a}}function mtcnn_extractParamsFromWeigthMap_extractorsFactory(e,n){var i=extractWeightEntryFactory(e,n);function extractConvParams(e){return{filters:i(e+"/weights",4,e+"/filters"),bias:i(e+"/bias",1)}}function extractFCParams(e){return{weights:i(e+"/weights",2),bias:i(e+"/bias",1)}}function extractSharedParams(e){return{conv1:extractConvParams(e+"/conv1"),prelu1_alpha:i(e+"/prelu1_alpha",1),conv2:extractConvParams(e+"/conv2"),prelu2_alpha:i(e+"/prelu2_alpha",1),conv3:extractConvParams(e+"/conv3"),prelu3_alpha:i(e+"/prelu3_alpha",1)}}return{extractPNetParams:function(){var e=extractSharedParams("pnet"),n=extractConvParams("pnet/conv4_1"),i=extractConvParams("pnet/conv4_2");return __assign(__assign({},e),{conv4_1:n,conv4_2:i})},extractRNetParams:function(){var e=extractSharedParams("rnet"),n=extractFCParams("rnet/fc1"),o=i("rnet/prelu4_alpha",1),a=extractFCParams("rnet/fc2_1"),s=extractFCParams("rnet/fc2_2");return __assign(__assign({},e),{fc1:n,prelu4_alpha:o,fc2_1:a,fc2_2:s})},extractONetParams:function(){var e=extractSharedParams("onet"),n=extractConvParams("onet/conv4"),o=i("onet/prelu4_alpha",1),a=extractFCParams("onet/fc1"),s=i("onet/prelu5_alpha",1),c=extractFCParams("onet/fc2_1"),u=extractFCParams("onet/fc2_2"),l=extractFCParams("onet/fc2_3");return __assign(__assign({},e),{conv4:n,prelu4_alpha:o,fc1:a,prelu5_alpha:s,fc2_1:c,fc2_2:u,fc2_3:l})}}}function mtcnn_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e){var n=[],i=mtcnn_extractParamsFromWeigthMap_extractorsFactory(e,n),o=i.extractPNetParams,a=i.extractRNetParams,s=i.extractONetParams,c=o(),u=a(),l=s();return disposeUnusedWeightTensors(e,n),{params:{pnet:c,rnet:u,onet:l},paramMappings:n}}function getSizesForScale(e,n){return{height:Math.floor(n[0]*e),width:Math.floor(n[1]*e)}}function pyramidDown(e,n,i){for(var o=i[0],a=i[1],s=12/e,c=[],u=Math.min(o,a)*s,l=0;u>=12;)c.push(s*Math.pow(n,l)),u*=n,l+=1;return c}var es=function(e){function MtcnnBox(n,i,o,a){return e.call(this,{left:n,top:i,right:o,bottom:a},!0)||this}return __extends(MtcnnBox,e),MtcnnBox}(b);function normalize_normalize(e){return g.lub(function(){return g.dC7(g.luU(e,g.iD$(127.5)),g.iD$(.0078125))})}function prelu(e,n){return g.lub(function(){return g.IHx(g.UYe(e),g.dC7(n,g.W76(g.UYe(g.W76(e)))))})}function sharedLayer(e,n,i){return void 0===i&&(i=!1),g.lub(function(){var o=convLayer(e,n.conv1,"valid");return o=prelu(o,n.prelu1_alpha),o=prelu(o=convLayer(o=g._sB(o,i?[2,2]:[3,3],[2,2],"same"),n.conv2,"valid"),n.prelu2_alpha),o=prelu(o=convLayer(o=i?o:g._sB(o,[3,3],[2,2],"valid"),n.conv3,"valid"),n.prelu3_alpha)})}function PNet(e,n){return g.lub(function(){var i=sharedLayer(e,n,!0),o=convLayer(i,n.conv4_1,"valid"),a=g.dt4(g.Fp7(o,3),3);return{prob:g.XAC(g.luU(o,a),3),regions:convLayer(i,n.conv4_2,"valid")}})}function rescaleAndNormalize(e,n){return g.lub(function(){var i=getSizesForScale(n,e.shape.slice(1)),o=i.height,a=i.width,s=normalize_normalize(g.BHj.resizeBilinear(e,[o,a]));return g.p4s(s,[0,2,1,3])})}function extractBoundingBoxes(e,n,i,o){for(var a=[],s=e.arraySync(),c=0;c<e.shape[0];c++)for(var u=0;u<e.shape[1];u++)s[c][u]>=o&&a.push(new y(u,c));return a.map(function(e){var o=new _(Math.round((2*e.y+1)/i),Math.round((2*e.x+1)/i),Math.round((2*e.y+12)/i),Math.round((2*e.x+12)/i)),a=s[e.y][e.x],c=n.arraySync();return{cell:o,score:a,region:new es(c[e.y][e.x][0],c[e.y][e.x][1],c[e.y][e.x][2],c[e.y][e.x][3])}})}function stage1(e,n,i,o,a){a.stage1=[];var s=n.map(function(n){return g.lub(function(){var i={scale:n},a=rescaleAndNormalize(e,n),s=Date.now(),c=PNet(a,o),u=c.prob,l=c.regions;return i.pnet=Date.now()-s,{scoresTensor:g.HHK(g.HHK(u,3)[1])[0],regionsTensor:g.HHK(l)[0],scale:n,statsForScale:i}})}).map(function(e){var n=e.scoresTensor,o=e.regionsTensor,s=e.scale,c=e.statsForScale,u=extractBoundingBoxes(n,o,s,i);if(n.dispose(),o.dispose(),!u.length)return a.stage1.push(c),[];var l=Date.now(),f=nonMaxSuppression(u.map(function(e){return e.cell}),u.map(function(e){return e.score}),.5);return c.nms=Date.now()-l,c.numBoxes=f.length,a.stage1.push(c),f.map(function(e){return u[e]})}).reduce(function(e,n){return e.concat(n)},[]),c=[],u=[];if(s.length>0){var l=Date.now(),f=nonMaxSuppression(s.map(function(e){return e.cell}),s.map(function(e){return e.score}),.7);a.stage1_nms=Date.now()-l,u=f.map(function(e){return s[e].score}),c=f.map(function(e){return s[e]}).map(function(e){var n=e.cell,i=e.region;return new _(n.left+i.left*n.width,n.top+i.top*n.height,n.right+i.right*n.width,n.bottom+i.bottom*n.height).toSquare().round()})}return{boxes:c,scores:u}}function extractImagePatches(e,n,i){var o=i.width,a=i.height;return tslib_es6_awaiter(this,void 0,void 0,function(){var i,s,c,u=this;return tslib_es6_generator(this,function(l){switch(l.label){case 0:return i=getContext2dOrThrow(e),[4,Promise.all(n.map(function(n){return tslib_es6_awaiter(u,void 0,void 0,function(){var o,a,s,c,u,l,f,d;return tslib_es6_generator(this,function(p){return a=(o=n.padAtBorders(e.height,e.width)).y,s=o.ey,c=o.x,u=o.ex,l=c-1,f=a-1,d=i.getImageData(l,f,u-l,s-f),[2,B.isNodejs()?createCanvasFromMedia(d):createImageBitmap(d)]})})}))];case 1:return s=l.sent(),c=[],s.forEach(function(e){var n=getContext2dOrThrow(createCanvas({width:o,height:a}));n.drawImage(e,0,0,o,a);for(var i=n.getImageData(0,0,o,a).data,s=[],u=0;u<i.length;u+=4)s.push(i[u+2]),s.push(i[u+1]),s.push(i[u]);c.push(s)}),[2,c.map(function(e){return g.lub(function(){return normalize_normalize(g.p4s(g.yXz(e,[1,o,a,3]),[0,2,1,3]).toFloat())})})]}})})}function RNet(e,n){return g.lub(function(){var i=sharedLayer(e,n),o=prelu(fullyConnectedLayer(g.XLQ(i,[i.shape[0],n.fc1.weights.shape[0]]),n.fc1),n.prelu4_alpha),a=fullyConnectedLayer(o,n.fc2_1),s=g.dt4(g.Fp7(a,1),1),c=g.XAC(g.luU(a,s),1),u=fullyConnectedLayer(o,n.fc2_2);return{scores:g.HHK(c,1)[1],regions:u}})}function stage2(e,n,i,o,a){return tslib_es6_awaiter(this,void 0,void 0,function(){var s,c,u,l,f,d,p,m,v,y,b,_,x,w;return tslib_es6_generator(this,function(P){switch(P.label){case 0:return s=Date.now(),[4,extractImagePatches(e,n,{width:24,height:24})];case 1:return c=P.sent(),a.stage2_extractImagePatches=Date.now()-s,s=Date.now(),u=c.map(function(e){var n=RNet(e,o);return e.dispose(),n}),a.stage2_rnet=Date.now()-s,l=u.length>1?g.zoF(u.map(function(e){return e.scores})):u[0].scores,p=(d=Array).from,[4,l.data()];case 2:return f=p.apply(d,[P.sent()]),l.dispose(),v=(m=f.map(function(e,n){return{score:e,idx:n}}).filter(function(e){return e.score>i}).map(function(e){return e.idx})).map(function(e){return n[e]}),y=m.map(function(e){return f[e]}),b=[],_=[],v.length>0&&(s=Date.now(),x=nonMaxSuppression(v,y,.7),a.stage2_nms=Date.now()-s,w=x.map(function(e){var n=u[m[e]].regions.arraySync();return new es(n[0][0],n[0][1],n[0][2],n[0][3])}),_=x.map(function(e){return y[e]}),b=x.map(function(e,n){return v[e].calibrate(w[n])})),u.forEach(function(e){e.regions.dispose(),e.scores.dispose()}),[2,{boxes:b,scores:_}]}})})}function ONet(e,n){return g.lub(function(){var i=sharedLayer(e,n);i=prelu(i=convLayer(i=g._sB(i,[2,2],[2,2],"same"),n.conv4,"valid"),n.prelu4_alpha);var o=prelu(fullyConnectedLayer(g.XLQ(i,[i.shape[0],n.fc1.weights.shape[0]]),n.fc1),n.prelu5_alpha),a=fullyConnectedLayer(o,n.fc2_1),s=g.dt4(g.Fp7(a,1),1),c=g.XAC(g.luU(a,s),1),u=fullyConnectedLayer(o,n.fc2_2),l=fullyConnectedLayer(o,n.fc2_3);return{scores:g.HHK(c,1)[1],regions:u,points:l}})}function stage3(e,n,i,o,a){return tslib_es6_awaiter(this,void 0,void 0,function(){var s,c,u,l,f,d,p,m,v,b,_,x,w,P,F;return tslib_es6_generator(this,function(T){switch(T.label){case 0:return s=Date.now(),[4,extractImagePatches(e,n,{width:48,height:48})];case 1:return c=T.sent(),a.stage3_extractImagePatches=Date.now()-s,s=Date.now(),u=c.map(function(e){var n=ONet(e,o);return e.dispose(),n}),a.stage3_onet=Date.now()-s,l=u.length>1?g.zoF(u.map(function(e){return e.scores})):u[0].scores,p=(d=Array).from,[4,l.data()];case 2:return f=p.apply(d,[T.sent()]),l.dispose(),v=(m=f.map(function(e,n){return{score:e,idx:n}}).filter(function(e){return e.score>i}).map(function(e){return e.idx})).map(function(e){var n=u[e].regions.arraySync();return new es(n[0][0],n[0][1],n[0][2],n[0][3])}),b=m.map(function(e,i){return n[e].calibrate(v[i])}),_=m.map(function(e){return f[e]}),x=[],w=[],P=[],b.length>0&&(s=Date.now(),F=nonMaxSuppression(b,_,.7,!1),a.stage3_nms=Date.now()-s,x=F.map(function(e){return b[e]}),w=F.map(function(e){return _[e]}),P=F.map(function(e,n){return[,,,,,].fill(0).map(function(i,o){var a=u[e].points.arraySync();return new y(a[0][o]*(x[n].width+1)+x[n].left,a[0][o+5]*(x[n].height+1)+x[n].top)})})),u.forEach(function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()}),[2,{boxes:x,scores:w,points:P}]}})})}var ec=function(e){function Mtcnn(){return e.call(this,"Mtcnn")||this}return __extends(Mtcnn,e),Mtcnn.prototype.load=function(n){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(i){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},Mtcnn.prototype.loadFromDisk=function(n){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(i){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},Mtcnn.prototype.forwardInput=function(e,n){return void 0===n&&(n={}),tslib_es6_awaiter(this,void 0,void 0,function(){var i,o,a,s,c,u,l,f,d,p,m,v,b,_,x,F,A,S,k,C;return tslib_es6_generator(this,function(E){switch(E.label){case 0:if(!(i=this.params))throw Error("Mtcnn - load model before inference");if(!(o=e.canvases[0]))throw Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),c=g.lub(function(){return bgrToRgbTensor(g.dt4(g.Xhn.fromPixels(o)).toFloat())}),u=function(e){return c.dispose(),a.total=Date.now()-s,e},f=(l=c.shape.slice(1))[0],d=l[1],m=(p=new X(n)).minFaceSize,v=p.scaleFactor,b=p.maxNumScales,_=p.scoreThresholds,x=(p.scaleSteps||pyramidDown(m,v,[f,d])).filter(function(e){var n=getSizesForScale(e,[f,d]);return Math.min(n.width,n.height)>12}).slice(0,b),a.scales=x,a.pyramid=x.map(function(e){return getSizesForScale(e,[f,d])}),F=Date.now(),[4,stage1(c,x,_[0],i.pnet,a)];case 1:if(A=E.sent(),a.total_stage1=Date.now()-F,!A.boxes.length)return[2,u({results:[],stats:a})];return a.stage2_numInputBoxes=A.boxes.length,F=Date.now(),[4,stage2(o,A.boxes,_[1],i.rnet,a)];case 2:if(S=E.sent(),a.total_stage2=Date.now()-F,!S.boxes.length)return[2,u({results:[],stats:a})];return a.stage3_numInputBoxes=S.boxes.length,F=Date.now(),[4,stage3(o,S.boxes,_[2],i.onet,a)];case 3:return k=E.sent(),a.total_stage3=Date.now()-F,C=k.boxes.map(function(e,n){return WithFaceLandmarks_extendWithFaceLandmarks(WithFaceDetection_extendWithFaceDetection({},new w(k.scores[n],new P(e.left/d,e.top/f,e.width/d,e.height/f),{height:f,width:d})),new T(k.points[n].map(function(n){return n.sub(new y(e.left,e.top)).div(new y(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,u({results:C,stats:a})]}})})},Mtcnn.prototype.forward=function(e,n){return void 0===n&&(n={}),tslib_es6_awaiter(this,void 0,void 0,function(){var i;return tslib_es6_generator(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,toNetInput(e)];case 1:return[4,i.apply(this,[o.sent(),n])];case 2:return[2,o.sent().results]}})})},Mtcnn.prototype.forwardWithStats=function(e,n){return void 0===n&&(n={}),tslib_es6_awaiter(this,void 0,void 0,function(){var i;return tslib_es6_generator(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,toNetInput(e)];case 1:return[2,i.apply(this,[o.sent(),n])]}})})},Mtcnn.prototype.getDefaultModelName=function(){return"mtcnn_model"},Mtcnn.prototype.extractParamsFromWeigthMap=function(e){return mtcnn_extractParamsFromWeigthMap_extractParamsFromWeigthMap(e)},Mtcnn.prototype.extractParams=function(e){return mtcnn_extractParams_extractParams(e)},Mtcnn}(L),eu=[new y(1.603231,2.094468),new y(6.041143,7.080126),new y(2.882459,3.518061),new y(4.266906,5.178857),new y(9.041765,10.66308)],el=[117.001,114.697,97.404],ef=function(e){function TinyFaceDetector(){return e.call(this,{withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:eu,meanRgb:el,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})||this}return __extends(TinyFaceDetector,e),Object.defineProperty(TinyFaceDetector.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),TinyFaceDetector.prototype.locateFaces=function(e,n){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,this.detect(e,n)];case 1:return[2,i.sent().map(function(e){return new w(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},TinyFaceDetector.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},TinyFaceDetector.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},TinyFaceDetector}(en),ed={ssdMobilenetv1:new J,tinyFaceDetector:new ef,tinyYolov2:new ei,mtcnn:new ec,faceLandmark68Net:new G,faceLandmark68TinyNet:new Q,faceRecognitionNet:new $,faceExpressionNet:new j,ageGenderNet:new z};function extendWithAge(e,n){return Object.assign({},e,{age:n})}var eh=function(e){function PredictFaceExpressionsTaskBase(n,i,o){var a=e.call(this)||this;return a.parentTask=n,a.input=i,a.extractedFaces=o,a}return __extends(PredictFaceExpressionsTaskBase,e),PredictFaceExpressionsTaskBase}(ea),ep=function(e){function PredictAllFaceExpressionsTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictAllFaceExpressionsTask,e),PredictAllFaceExpressionsTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n,i=this;return tslib_es6_generator(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return[4,extractAllFacesAndComputeResults(e=o.sent(),this.input,function(e){return tslib_es6_awaiter(i,void 0,void 0,function(){return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(e){return ed.faceExpressionNet.predictExpressions(e)}))];case 1:return[2,n.sent()]}})})},this.extractedFaces)];case 2:return n=o.sent(),[2,e.map(function(e,i){return extendWithFaceExpressions(e,n[i])})]}})})},PredictAllFaceExpressionsTask.prototype.withAgeAndGender=function(){return new eb(this,this.input)},PredictAllFaceExpressionsTask}(eh),em=function(e){function PredictSingleFaceExpressionsTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictSingleFaceExpressionsTask,e),PredictSingleFaceExpressionsTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:if(!(e=i.sent()))return[2];return[4,extractSingleFaceAndComputeResult(e,this.input,function(e){return ed.faceExpressionNet.predictExpressions(e)},this.extractedFaces)];case 2:return n=i.sent(),[2,extendWithFaceExpressions(e,n)]}})})},PredictSingleFaceExpressionsTask.prototype.withAgeAndGender=function(){return new e_(this,this.input)},PredictSingleFaceExpressionsTask}(eh),eg=function(e){function PredictAllFaceExpressionsWithFaceAlignmentTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictAllFaceExpressionsWithFaceAlignmentTask,e),PredictAllFaceExpressionsWithFaceAlignmentTask.prototype.withAgeAndGender=function(){return new ex(this,this.input)},PredictAllFaceExpressionsWithFaceAlignmentTask.prototype.withFaceDescriptors=function(){return new eF(this,this.input)},PredictAllFaceExpressionsWithFaceAlignmentTask}(ep),ev=function(e){function PredictSingleFaceExpressionsWithFaceAlignmentTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictSingleFaceExpressionsWithFaceAlignmentTask,e),PredictSingleFaceExpressionsWithFaceAlignmentTask.prototype.withAgeAndGender=function(){return new ew(this,this.input)},PredictSingleFaceExpressionsWithFaceAlignmentTask.prototype.withFaceDescriptor=function(){return new eT(this,this.input)},PredictSingleFaceExpressionsWithFaceAlignmentTask}(em),ey=function(e){function PredictAgeAndGenderTaskBase(n,i,o){var a=e.call(this)||this;return a.parentTask=n,a.input=i,a.extractedFaces=o,a}return __extends(PredictAgeAndGenderTaskBase,e),PredictAgeAndGenderTaskBase}(ea),eb=function(e){function PredictAllAgeAndGenderTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictAllAgeAndGenderTask,e),PredictAllAgeAndGenderTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n,i=this;return tslib_es6_generator(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return[4,extractAllFacesAndComputeResults(e=o.sent(),this.input,function(e){return tslib_es6_awaiter(i,void 0,void 0,function(){return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(e){return ed.ageGenderNet.predictAgeAndGender(e)}))];case 1:return[2,n.sent()]}})})},this.extractedFaces)];case 2:return n=o.sent(),[2,e.map(function(e,i){var o=n[i],a=o.age;return extendWithAge(extendWithGender(e,o.gender,o.genderProbability),a)})]}})})},PredictAllAgeAndGenderTask.prototype.withFaceExpressions=function(){return new ep(this,this.input)},PredictAllAgeAndGenderTask}(ey),e_=function(e){function PredictSingleAgeAndGenderTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictSingleAgeAndGenderTask,e),PredictSingleAgeAndGenderTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n,i,o,a;return tslib_es6_generator(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:if(!(e=s.sent()))return[2];return[4,extractSingleFaceAndComputeResult(e,this.input,function(e){return ed.ageGenderNet.predictAgeAndGender(e)},this.extractedFaces)];case 2:return i=(n=s.sent()).age,o=n.gender,a=n.genderProbability,[2,extendWithAge(extendWithGender(e,o,a),i)]}})})},PredictSingleAgeAndGenderTask.prototype.withFaceExpressions=function(){return new em(this,this.input)},PredictSingleAgeAndGenderTask}(ey),ex=function(e){function PredictAllAgeAndGenderWithFaceAlignmentTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictAllAgeAndGenderWithFaceAlignmentTask,e),PredictAllAgeAndGenderWithFaceAlignmentTask.prototype.withFaceExpressions=function(){return new eg(this,this.input)},PredictAllAgeAndGenderWithFaceAlignmentTask.prototype.withFaceDescriptors=function(){return new eF(this,this.input)},PredictAllAgeAndGenderWithFaceAlignmentTask}(eb),ew=function(e){function PredictSingleAgeAndGenderWithFaceAlignmentTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictSingleAgeAndGenderWithFaceAlignmentTask,e),PredictSingleAgeAndGenderWithFaceAlignmentTask.prototype.withFaceExpressions=function(){return new ev(this,this.input)},PredictSingleAgeAndGenderWithFaceAlignmentTask.prototype.withFaceDescriptor=function(){return new eT(this,this.input)},PredictSingleAgeAndGenderWithFaceAlignmentTask}(e_),eP=function(e){function ComputeFaceDescriptorsTaskBase(n,i){var o=e.call(this)||this;return o.parentTask=n,o.input=i,o}return __extends(ComputeFaceDescriptorsTaskBase,e),ComputeFaceDescriptorsTaskBase}(ea),eF=function(e){function ComputeAllFaceDescriptorsTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(ComputeAllFaceDescriptorsTask,e),ComputeAllFaceDescriptorsTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return[4,extractAllFacesAndComputeResults(e=n.sent(),this.input,function(e){return Promise.all(e.map(function(e){return ed.faceRecognitionNet.computeFaceDescriptor(e)}))},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,n.sent().map(function(n,i){return extendWithFaceDescriptor(e[i],n)})]}})})},ComputeAllFaceDescriptorsTask.prototype.withFaceExpressions=function(){return new eg(this,this.input)},ComputeAllFaceDescriptorsTask.prototype.withAgeAndGender=function(){return new ex(this,this.input)},ComputeAllFaceDescriptorsTask}(eP),eT=function(e){function ComputeSingleFaceDescriptorTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(ComputeSingleFaceDescriptorTask,e),ComputeSingleFaceDescriptorTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:if(!(e=i.sent()))return[2];return[4,extractSingleFaceAndComputeResult(e,this.input,function(e){return ed.faceRecognitionNet.computeFaceDescriptor(e)},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return n=i.sent(),[2,extendWithFaceDescriptor(e,n)]}})})},ComputeSingleFaceDescriptorTask.prototype.withFaceExpressions=function(){return new ev(this,this.input)},ComputeSingleFaceDescriptorTask.prototype.withAgeAndGender=function(){return new ew(this,this.input)},ComputeSingleFaceDescriptorTask}(eP),eA=function(e){function DetectFaceLandmarksTaskBase(n,i,o){var a=e.call(this)||this;return a.parentTask=n,a.input=i,a.useTinyLandmarkNet=o,a}return __extends(DetectFaceLandmarksTaskBase,e),Object.defineProperty(DetectFaceLandmarksTaskBase.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?ed.faceLandmark68TinyNet:ed.faceLandmark68Net},enumerable:!0,configurable:!0}),DetectFaceLandmarksTaskBase}(ea),eS=function(e){function DetectAllFaceLandmarksTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(DetectAllFaceLandmarksTask,e),DetectAllFaceLandmarksTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n,i,o,a,s=this;return tslib_es6_generator(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:if(n=(e=c.sent()).map(function(e){return e.detection}),!(this.input instanceof g.esB))return[3,3];return[4,extractFaceTensors(this.input,n)];case 2:return o=c.sent(),[3,5];case 3:return[4,extractFaces(this.input,n)];case 4:o=c.sent(),c.label=5;case 5:return[4,Promise.all((i=o).map(function(e){return s.landmarkNet.detectLandmarks(e)}))];case 6:return a=c.sent(),i.forEach(function(e){return e instanceof g.esB&&e.dispose()}),[2,e.map(function(e,n){return WithFaceLandmarks_extendWithFaceLandmarks(e,a[n])})]}})})},DetectAllFaceLandmarksTask.prototype.withFaceExpressions=function(){return new eg(this,this.input)},DetectAllFaceLandmarksTask.prototype.withAgeAndGender=function(){return new ex(this,this.input)},DetectAllFaceLandmarksTask.prototype.withFaceDescriptors=function(){return new eF(this,this.input)},DetectAllFaceLandmarksTask}(eA),ek=function(e){function DetectSingleFaceLandmarksTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(DetectSingleFaceLandmarksTask,e),DetectSingleFaceLandmarksTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n,i,o,a;return tslib_es6_generator(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:if(!(e=s.sent()))return[2];if(n=e.detection,!(this.input instanceof g.esB))return[3,3];return[4,extractFaceTensors(this.input,[n])];case 2:return o=s.sent(),[3,5];case 3:return[4,extractFaces(this.input,[n])];case 4:o=s.sent(),s.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return a=s.sent(),i.forEach(function(e){return e instanceof g.esB&&e.dispose()}),[2,WithFaceLandmarks_extendWithFaceLandmarks(e,a)]}})})},DetectSingleFaceLandmarksTask.prototype.withFaceExpressions=function(){return new ev(this,this.input)},DetectSingleFaceLandmarksTask.prototype.withAgeAndGender=function(){return new ew(this,this.input)},DetectSingleFaceLandmarksTask.prototype.withFaceDescriptor=function(){return new eT(this,this.input)},DetectSingleFaceLandmarksTask}(eA),eC=function(e){function DetectFacesTaskBase(n,i){void 0===i&&(i=new K);var o=e.call(this)||this;return o.input=n,o.options=i,o}return __extends(DetectFacesTaskBase,e),DetectFacesTaskBase}(ea),eE=function(e){function DetectAllFacesTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(DetectAllFacesTask,e),DetectAllFacesTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n,i,o;return tslib_es6_generator(this,function(a){switch(a.label){case 0:if(e=this,n=e.input,!((i=e.options)instanceof X))return[3,2];return[4,ed.mtcnn.forward(n,i)];case 1:return[2,a.sent().map(function(e){return e.detection})];case 2:if(!(o=i instanceof eo?function(e){return ed.tinyFaceDetector.locateFaces(e,i)}:i instanceof K?function(e){return ed.ssdMobilenetv1.locateFaces(e,i)}:i instanceof er?function(e){return ed.tinyYolov2.locateFaces(e,i)}:null))throw Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(n)]}})})},DetectAllFacesTask.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(n){return tslib_es6_awaiter(e,void 0,void 0,function(){return tslib_es6_generator(this,function(e){switch(e.label){case 0:return[4,this.run()];case 1:return[2,n(e.sent().map(function(e){return WithFaceDetection_extendWithFaceDetection({},e)}))]}})})})},DetectAllFacesTask.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new eS(this.runAndExtendWithFaceDetections(),this.input,e)},DetectAllFacesTask.prototype.withFaceExpressions=function(){return new ep(this.runAndExtendWithFaceDetections(),this.input)},DetectAllFacesTask.prototype.withAgeAndGender=function(){return new eb(this.runAndExtendWithFaceDetections(),this.input)},DetectAllFacesTask}(eC);function detectFaces_detectAllFaces(e,n){return void 0===n&&(n=new K),new eE(e,n)}function euclideanDistance(e,n){if(e.length!==n.length)throw Error("euclideanDistance: arr1.length !== arr2.length");var i=Array.from(e),o=Array.from(n);return Math.sqrt(i.map(function(e,n){return e-o[n]}).reduce(function(e,n){return e+Math.pow(n,2)},0))}!function(e){function DetectSingleFaceTask(){return null!==e&&e.apply(this,arguments)||this}__extends(DetectSingleFaceTask,e),DetectSingleFaceTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,new eE(this.input,this.options)];case 1:return n=(e=i.sent())[0],e.forEach(function(e){e.score>n.score&&(n=e)}),[2,n]}})})},DetectSingleFaceTask.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(n){return tslib_es6_awaiter(e,void 0,void 0,function(){var e;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return[2,n((e=i.sent())?WithFaceDetection_extendWithFaceDetection({},e):void 0)]}})})})},DetectSingleFaceTask.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new ek(this.runAndExtendWithFaceDetection(),this.input,e)},DetectSingleFaceTask.prototype.withFaceExpressions=function(){return new em(this.runAndExtendWithFaceDetection(),this.input)},DetectSingleFaceTask.prototype.withAgeAndGender=function(){return new e_(this.runAndExtendWithFaceDetection(),this.input)}}(eC),function(){function FaceMatcher(e,n){void 0===n&&(n=.6),this._distanceThreshold=n;var i=Array.isArray(e)?e:[e];if(!i.length)throw Error("FaceRecognizer.constructor - expected atleast one input");var o=1,createUniqueLabel=function(){return"person "+o++};this._labeledDescriptors=i.map(function(e){if(e instanceof C)return e;if(e instanceof Float32Array)return new C(createUniqueLabel(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new C(createUniqueLabel(),[e.descriptor]);throw Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(FaceMatcher.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(FaceMatcher.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),FaceMatcher.prototype.computeMeanDistance=function(e,n){return n.map(function(n){return euclideanDistance(n,e)}).reduce(function(e,n){return e+n},0)/(n.length||1)},FaceMatcher.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(i){var o=i.descriptors;return new S(i.label,n.computeMeanDistance(e,o))}).reduce(function(e,n){return e.distance<n.distance?e:n})},FaceMatcher.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new S("unknown",n.distance)},FaceMatcher.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},FaceMatcher.fromJSON=function(e){return new FaceMatcher(e.labeledDescriptors.map(function(e){return C.fromJSON(e)}),e.distanceThreshold)}}()},9948:function(e){e.exports=function(e,n,i,o){var a=new Blob(void 0!==o?[o,e]:[e],{type:i||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,n);else{var s=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(a):window.webkitURL.createObjectURL(a),c=document.createElement("a");c.style.display="none",c.href=s,c.setAttribute("download",n),void 0===c.download&&c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),setTimeout(function(){document.body.removeChild(c),window.URL.revokeObjectURL(s)},200)}}},2898:function(e,n,i){"use strict";i.d(n,{Z:function(){return createLucideIcon}});var o=i(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,n)=>{let i=(0,o.forwardRef)(({color:i="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:u,children:l,...f},d)=>(0,o.createElement)("svg",{ref:d,...a,width:s,height:s,stroke:i,strokeWidth:u?24*Number(c)/Number(s):c,className:`lucide lucide-${toKebabCase(e)}`,...f},[...n.map(([e,n])=>(0,o.createElement)(e,n)),...(Array.isArray(l)?l:[l])||[]]));return i.displayName=`${e}`,i}},5817:function(e,n,i){"use strict";i.d(n,{Z:function(){return a}});var o=i(2898);let a=(0,o.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6264:function(e,n,i){"use strict";i.d(n,{Z:function(){return a}});var o=i(2898);let a=(0,o.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2601:function(e,n,i){"use strict";var o,a;e.exports=(null==(o=i.g.process)?void 0:o.env)&&"object"==typeof(null==(a=i.g.process)?void 0:a.env)?i.g.process:i(8960)},263:function(e){!function(){var n={675:function(e,n){"use strict";n.byteLength=byteLength,n.toByteArray=toByteArray,n.fromByteArray=fromByteArray;for(var i=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=s.length;c<u;++c)i[c]=s[c],o[s.charCodeAt(c)]=c;function getLens(e){var n=e.length;if(n%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=n);var o=i===n?0:4-i%4;return[i,o]}function byteLength(e){var n=getLens(e),i=n[0],o=n[1];return(i+o)*3/4-o}function _byteLength(e,n,i){return(n+i)*3/4-i}function toByteArray(e){var n,i,s=getLens(e),c=s[0],u=s[1],l=new a(_byteLength(e,c,u)),f=0,d=u>0?c-4:c;for(i=0;i<d;i+=4)n=o[e.charCodeAt(i)]<<18|o[e.charCodeAt(i+1)]<<12|o[e.charCodeAt(i+2)]<<6|o[e.charCodeAt(i+3)],l[f++]=n>>16&255,l[f++]=n>>8&255,l[f++]=255&n;return 2===u&&(n=o[e.charCodeAt(i)]<<2|o[e.charCodeAt(i+1)]>>4,l[f++]=255&n),1===u&&(n=o[e.charCodeAt(i)]<<10|o[e.charCodeAt(i+1)]<<4|o[e.charCodeAt(i+2)]>>2,l[f++]=n>>8&255,l[f++]=255&n),l}function tripletToBase64(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function encodeChunk(e,n,i){for(var o=[],a=n;a<i;a+=3)o.push(tripletToBase64((e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2])));return o.join("")}function fromByteArray(e){for(var n,o=e.length,a=o%3,s=[],c=0,u=o-a;c<u;c+=16383)s.push(encodeChunk(e,c,c+16383>u?u:c+16383));return 1===a?s.push(i[(n=e[o-1])>>2]+i[n<<4&63]+"=="):2===a&&s.push(i[(n=(e[o-2]<<8)+e[o-1])>>10]+i[n>>4&63]+i[n<<2&63]+"="),s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},72:function(e,n,i){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var o=i(675),a=i(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function typedArraySupport(){try{var e=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(e,n),42===e.foo()}catch(e){return!1}}function createBuffer(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,Buffer.prototype),n}function Buffer(e,n,i){if("number"==typeof e){if("string"==typeof n)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,n,i)}function from(e,n,i){if("string"==typeof e)return fromString(e,n);if(ArrayBuffer.isView(e))return fromArrayLike(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return fromArrayBuffer(e,n,i);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return Buffer.from(o,n,i);var a=fromObject(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),n,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function alloc(e,n,i){return(assertSize(e),e<=0)?createBuffer(e):void 0!==n?"string"==typeof i?createBuffer(e).fill(n,i):createBuffer(e).fill(n):createBuffer(e)}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromString(e,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!Buffer.isEncoding(n))throw TypeError("Unknown encoding: "+n);var i=0|byteLength(e,n),o=createBuffer(i),a=o.write(e,n);return a!==i&&(o=o.slice(0,a)),o}function fromArrayLike(e){for(var n=e.length<0?0:0|checked(e.length),i=createBuffer(n),o=0;o<n;o+=1)i[o]=255&e[o];return i}function fromArrayBuffer(e,n,i){var o;if(n<0||e.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(o=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),Buffer.prototype),o}function fromObject(e){if(Buffer.isBuffer(e)){var n,i=0|checked(e.length),o=createBuffer(i);return 0===o.length||e.copy(o,0,0,i),o}return void 0!==e.length?"number"!=typeof e.length||(n=e.length)!=n?createBuffer(0):fromArrayLike(e):"Buffer"===e.type&&Array.isArray(e.data)?fromArrayLike(e.data):void 0}function checked(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function byteLength(e,n){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===i)return 0;for(var a=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return base64ToBytes(e).length;default:if(a)return o?-1:utf8ToBytes(e).length;n=(""+n).toLowerCase(),a=!0}}function slowToString(e,n,i){var o=!1;if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(n>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,n,i);case"utf8":case"utf-8":return utf8Slice(this,n,i);case"ascii":return asciiSlice(this,n,i);case"latin1":case"binary":return latin1Slice(this,n,i);case"base64":return base64Slice(this,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,n,i);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function swap(e,n,i){var o=e[n];e[n]=e[i],e[i]=o}function bidirectionalIndexOf(e,n,i,o,a){var s;if(0===e.length)return -1;if("string"==typeof i?(o=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i)!=s&&(i=a?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(a)return -1;i=e.length-1}else if(i<0){if(!a)return -1;i=0}if("string"==typeof n&&(n=Buffer.from(n,o)),Buffer.isBuffer(n))return 0===n.length?-1:arrayIndexOf(e,n,i,o,a);if("number"==typeof n)return(n&=255,"function"==typeof Uint8Array.prototype.indexOf)?a?Uint8Array.prototype.indexOf.call(e,n,i):Uint8Array.prototype.lastIndexOf.call(e,n,i):arrayIndexOf(e,[n],i,o,a);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,n,i,o,a){var s,c=1,u=e.length,l=n.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||n.length<2)return -1;c=2,u/=2,l/=2,i/=2}function read(e,n){return 1===c?e[n]:e.readUInt16BE(n*c)}if(a){var f=-1;for(s=i;s<u;s++)if(read(e,s)===read(n,-1===f?0:s-f)){if(-1===f&&(f=s),s-f+1===l)return f*c}else -1!==f&&(s-=s-f),f=-1}else for(i+l>u&&(i=u-l),s=i;s>=0;s--){for(var d=!0,p=0;p<l;p++)if(read(e,s+p)!==read(n,p)){d=!1;break}if(d)return s}return -1}function hexWrite(e,n,i,o){i=Number(i)||0;var a=e.length-i;o?(o=Number(o))>a&&(o=a):o=a;var s=n.length;o>s/2&&(o=s/2);for(var c=0;c<o;++c){var u=parseInt(n.substr(2*c,2),16);if(u!=u)break;e[i+c]=u}return c}function utf8Write(e,n,i,o){return blitBuffer(utf8ToBytes(n,e.length-i),e,i,o)}function latin1Write(e,n,i,o){return blitBuffer(asciiToBytes(n),e,i,o)}function base64Write(e,n,i,o){return blitBuffer(base64ToBytes(n),e,i,o)}function ucs2Write(e,n,i,o){return blitBuffer(utf16leToBytes(n,e.length-i),e,i,o)}function base64Slice(e,n,i){return 0===n&&i===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(n,i))}function utf8Slice(e,n,i){i=Math.min(e.length,i);for(var o=[],a=n;a<i;){var s,c,u,l,f=e[a],d=null,p=f>239?4:f>223?3:f>191?2:1;if(a+p<=i)switch(p){case 1:f<128&&(d=f);break;case 2:(192&(s=e[a+1]))==128&&(l=(31&f)<<6|63&s)>127&&(d=l);break;case 3:s=e[a+1],c=e[a+2],(192&s)==128&&(192&c)==128&&(l=(15&f)<<12|(63&s)<<6|63&c)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:s=e[a+1],c=e[a+2],u=e[a+3],(192&s)==128&&(192&c)==128&&(192&u)==128&&(l=(15&f)<<18|(63&s)<<12|(63&c)<<6|63&u)>65535&&l<1114112&&(d=l)}null===d?(d=65533,p=1):d>65535&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|1023&d),o.push(d),a+=p}return decodeCodePointsArray(o)}function decodeCodePointsArray(e){var n=e.length;if(n<=4096)return String.fromCharCode.apply(String,e);for(var i="",o=0;o<n;)i+=String.fromCharCode.apply(String,e.slice(o,o+=4096));return i}function asciiSlice(e,n,i){var o="";i=Math.min(e.length,i);for(var a=n;a<i;++a)o+=String.fromCharCode(127&e[a]);return o}function latin1Slice(e,n,i){var o="";i=Math.min(e.length,i);for(var a=n;a<i;++a)o+=String.fromCharCode(e[a]);return o}function hexSlice(e,n,i){var o=e.length;(!n||n<0)&&(n=0),(!i||i<0||i>o)&&(i=o);for(var a="",s=n;s<i;++s)a+=u[e[s]];return a}function utf16leSlice(e,n,i){for(var o=e.slice(n,i),a="",s=0;s<o.length;s+=2)a+=String.fromCharCode(o[s]+256*o[s+1]);return a}function checkOffset(e,n,i){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+n>i)throw RangeError("Trying to access beyond buffer length")}function checkInt(e,n,i,o,a,s){if(!Buffer.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(n>a||n<s)throw RangeError('"value" argument is out of bounds');if(i+o>e.length)throw RangeError("Index out of range")}function checkIEEE754(e,n,i,o,a,s){if(i+o>e.length||i<0)throw RangeError("Index out of range")}function writeFloat(e,n,i,o,s){return n=+n,i>>>=0,s||checkIEEE754(e,n,i,4,34028234663852886e22,-34028234663852886e22),a.write(e,n,i,o,23,4),i+4}function writeDouble(e,n,i,o,s){return n=+n,i>>>=0,s||checkIEEE754(e,n,i,8,17976931348623157e292,-17976931348623157e292),a.write(e,n,i,o,52,8),i+8}n.Buffer=Buffer,n.SlowBuffer=SlowBuffer,n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(e,n,i){return from(e,n,i)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(e,n,i){return alloc(e,n,i)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,n){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(n,Uint8Array)&&(n=Buffer.from(n,n.offset,n.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var i=e.length,o=n.length,a=0,s=Math.min(i,o);a<s;++a)if(e[a]!==n[a]){i=e[a],o=n[a];break}return i<o?-1:o<i?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,n){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);if(void 0===n)for(i=0,n=0;i<e.length;++i)n+=e[i].length;var i,o=Buffer.allocUnsafe(n),a=0;for(i=0;i<e.length;++i){var s=e[i];if(isInstance(s,Uint8Array)&&(s=Buffer.from(s)),!Buffer.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(o,a),a+=s.length}return o},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)swap(this,n,n+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this},Buffer.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",i=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(Buffer.prototype[s]=Buffer.prototype.inspect),Buffer.prototype.compare=function(e,n,i,o,a){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===i&&(i=e?e.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),n<0||i>e.length||o<0||a>this.length)throw RangeError("out of range index");if(o>=a&&n>=i)return 0;if(o>=a)return -1;if(n>=i)return 1;if(n>>>=0,i>>>=0,o>>>=0,a>>>=0,this===e)return 0;for(var s=a-o,c=i-n,u=Math.min(s,c),l=this.slice(o,a),f=e.slice(n,i),d=0;d<u;++d)if(l[d]!==f[d]){s=l[d],c=f[d];break}return s<c?-1:c<s?1:0},Buffer.prototype.includes=function(e,n,i){return -1!==this.indexOf(e,n,i)},Buffer.prototype.indexOf=function(e,n,i){return bidirectionalIndexOf(this,e,n,i,!0)},Buffer.prototype.lastIndexOf=function(e,n,i){return bidirectionalIndexOf(this,e,n,i,!1)},Buffer.prototype.write=function(e,n,i,o){if(void 0===n)o="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)o=n,i=this.length,n=0;else if(isFinite(n))n>>>=0,isFinite(i)?(i>>>=0,void 0===o&&(o="utf8")):(o=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a,s,c=this.length-n;if((void 0===i||i>c)&&(i=c),e.length>0&&(i<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var u=!1;;)switch(o){case"hex":return hexWrite(this,e,n,i);case"utf8":case"utf-8":return utf8Write(this,e,n,i);case"ascii":return a=n,s=i,blitBuffer(asciiToBytes(e),this,a,s);case"latin1":case"binary":return latin1Write(this,e,n,i);case"base64":return base64Write(this,e,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,n,i);default:if(u)throw TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),u=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(e,n){var i=this.length;e=~~e,n=void 0===n?i:~~n,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),n<0?(n+=i)<0&&(n=0):n>i&&(n=i),n<e&&(n=e);var o=this.subarray(e,n);return Object.setPrototypeOf(o,Buffer.prototype),o},Buffer.prototype.readUIntLE=function(e,n,i){e>>>=0,n>>>=0,i||checkOffset(e,n,this.length);for(var o=this[e],a=1,s=0;++s<n&&(a*=256);)o+=this[e+s]*a;return o},Buffer.prototype.readUIntBE=function(e,n,i){e>>>=0,n>>>=0,i||checkOffset(e,n,this.length);for(var o=this[e+--n],a=1;n>0&&(a*=256);)o+=this[e+--n]*a;return o},Buffer.prototype.readUInt8=function(e,n){return e>>>=0,n||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,n){return e>>>=0,n||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,n){return e>>>=0,n||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,n){return e>>>=0,n||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,n){return e>>>=0,n||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,n,i){e>>>=0,n>>>=0,i||checkOffset(e,n,this.length);for(var o=this[e],a=1,s=0;++s<n&&(a*=256);)o+=this[e+s]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*n)),o},Buffer.prototype.readIntBE=function(e,n,i){e>>>=0,n>>>=0,i||checkOffset(e,n,this.length);for(var o=n,a=1,s=this[e+--o];o>0&&(a*=256);)s+=this[e+--o]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*n)),s},Buffer.prototype.readInt8=function(e,n){return(e>>>=0,n||checkOffset(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},Buffer.prototype.readInt16LE=function(e,n){e>>>=0,n||checkOffset(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},Buffer.prototype.readInt16BE=function(e,n){e>>>=0,n||checkOffset(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},Buffer.prototype.readInt32LE=function(e,n){return e>>>=0,n||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,n){return e>>>=0,n||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,n){return e>>>=0,n||checkOffset(e,4,this.length),a.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,n){return e>>>=0,n||checkOffset(e,4,this.length),a.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,n){return e>>>=0,n||checkOffset(e,8,this.length),a.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,n){return e>>>=0,n||checkOffset(e,8,this.length),a.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,n,i,o){if(e=+e,n>>>=0,i>>>=0,!o){var a=Math.pow(2,8*i)-1;checkInt(this,e,n,i,a,0)}var s=1,c=0;for(this[n]=255&e;++c<i&&(s*=256);)this[n+c]=e/s&255;return n+i},Buffer.prototype.writeUIntBE=function(e,n,i,o){if(e=+e,n>>>=0,i>>>=0,!o){var a=Math.pow(2,8*i)-1;checkInt(this,e,n,i,a,0)}var s=i-1,c=1;for(this[n+s]=255&e;--s>=0&&(c*=256);)this[n+s]=e/c&255;return n+i},Buffer.prototype.writeUInt8=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,1,255,0),this[n]=255&e,n+1},Buffer.prototype.writeUInt16LE=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,2,65535,0),this[n]=255&e,this[n+1]=e>>>8,n+2},Buffer.prototype.writeUInt16BE=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=255&e,n+2},Buffer.prototype.writeUInt32LE=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e,n+4},Buffer.prototype.writeUInt32BE=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},Buffer.prototype.writeIntLE=function(e,n,i,o){if(e=+e,n>>>=0,!o){var a=Math.pow(2,8*i-1);checkInt(this,e,n,i,a-1,-a)}var s=0,c=1,u=0;for(this[n]=255&e;++s<i&&(c*=256);)e<0&&0===u&&0!==this[n+s-1]&&(u=1),this[n+s]=(e/c>>0)-u&255;return n+i},Buffer.prototype.writeIntBE=function(e,n,i,o){if(e=+e,n>>>=0,!o){var a=Math.pow(2,8*i-1);checkInt(this,e,n,i,a-1,-a)}var s=i-1,c=1,u=0;for(this[n+s]=255&e;--s>=0&&(c*=256);)e<0&&0===u&&0!==this[n+s+1]&&(u=1),this[n+s]=(e/c>>0)-u&255;return n+i},Buffer.prototype.writeInt8=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=255&e,n+1},Buffer.prototype.writeInt16LE=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,2,32767,-32768),this[n]=255&e,this[n+1]=e>>>8,n+2},Buffer.prototype.writeInt16BE=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=255&e,n+2},Buffer.prototype.writeInt32LE=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,4,2147483647,-2147483648),this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4},Buffer.prototype.writeInt32BE=function(e,n,i){return e=+e,n>>>=0,i||checkInt(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},Buffer.prototype.writeFloatLE=function(e,n,i){return writeFloat(this,e,n,!0,i)},Buffer.prototype.writeFloatBE=function(e,n,i){return writeFloat(this,e,n,!1,i)},Buffer.prototype.writeDoubleLE=function(e,n,i){return writeDouble(this,e,n,!0,i)},Buffer.prototype.writeDoubleBE=function(e,n,i){return writeDouble(this,e,n,!1,i)},Buffer.prototype.copy=function(e,n,i,o){if(!Buffer.isBuffer(e))throw TypeError("argument should be a Buffer");if(i||(i=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<i&&(o=i),o===i||0===e.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(o<0)throw RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-i&&(o=e.length-n+i);var a=o-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,i,o);else if(this===e&&i<n&&n<o)for(var s=a-1;s>=0;--s)e[s+n]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,o),n);return a},Buffer.prototype.fill=function(e,n,i,o){if("string"==typeof e){if("string"==typeof n?(o=n,n=0,i=this.length):"string"==typeof i&&(o=i,i=this.length),void 0!==o&&"string"!=typeof o)throw TypeError("encoding must be a string");if("string"==typeof o&&!Buffer.isEncoding(o))throw TypeError("Unknown encoding: "+o);if(1===e.length){var a,s=e.charCodeAt(0);("utf8"===o&&s<128||"latin1"===o)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<i)throw RangeError("Out of range index");if(i<=n)return this;if(n>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(a=n;a<i;++a)this[a]=e;else{var c=Buffer.isBuffer(e)?e:Buffer.from(e,o),u=c.length;if(0===u)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<i-n;++a)this[a+n]=c[a%u]}return this};var c=/[^+/0-9A-Za-z-_]/g;function base64clean(e){if((e=(e=e.split("=")[0]).trim().replace(c,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function utf8ToBytes(e,n){n=n||1/0;for(var i,o=e.length,a=null,s=[],c=0;c<o;++c){if((i=e.charCodeAt(c))>55295&&i<57344){if(!a){if(i>56319||c+1===o){(n-=3)>-1&&s.push(239,191,189);continue}a=i;continue}if(i<56320){(n-=3)>-1&&s.push(239,191,189),a=i;continue}i=(a-55296<<10|i-56320)+65536}else a&&(n-=3)>-1&&s.push(239,191,189);if(a=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function asciiToBytes(e){for(var n=[],i=0;i<e.length;++i)n.push(255&e.charCodeAt(i));return n}function utf16leToBytes(e,n){for(var i,o,a=[],s=0;s<e.length&&!((n-=2)<0);++s)o=(i=e.charCodeAt(s))>>8,a.push(i%256),a.push(o);return a}function base64ToBytes(e){return o.toByteArray(base64clean(e))}function blitBuffer(e,n,i,o){for(var a=0;a<o&&!(a+i>=n.length)&&!(a>=e.length);++a)n[a+i]=e[a];return a}function isInstance(e,n){return e instanceof n||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===n.name}var u=function(){for(var e="0123456789abcdef",n=Array(256),i=0;i<16;++i)for(var o=16*i,a=0;a<16;++a)n[o+a]=e[i]+e[a];return n}()},783:function(e,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(e,n,i,o,a){var s,c,u=8*a-o-1,l=(1<<u)-1,f=l>>1,d=-7,p=i?a-1:0,m=i?-1:1,g=e[n+p];for(p+=m,s=g&(1<<-d)-1,g>>=-d,d+=u;d>0;s=256*s+e[n+p],p+=m,d-=8);for(c=s&(1<<-d)-1,s>>=-d,d+=o;d>0;c=256*c+e[n+p],p+=m,d-=8);if(0===s)s=1-f;else{if(s===l)return c?NaN:(g?-1:1)*(1/0);c+=Math.pow(2,o),s-=f}return(g?-1:1)*c*Math.pow(2,s-o)},n.write=function(e,n,i,o,a,s){var c,u,l,f=8*s-a-1,d=(1<<f)-1,p=d>>1,m=23===a?5960464477539062e-23:0,g=o?0:s-1,v=o?1:-1,y=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(u=isNaN(n)?1:0,c=d):(c=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-c))<1&&(c--,l*=2),c+p>=1?n+=m/l:n+=m*Math.pow(2,1-p),n*l>=2&&(c++,l/=2),c+p>=d?(u=0,c=d):c+p>=1?(u=(n*l-1)*Math.pow(2,a),c+=p):(u=n*Math.pow(2,p-1)*Math.pow(2,a),c=0));a>=8;e[i+g]=255&u,g+=v,u/=256,a-=8);for(c=c<<a|u,f+=a;f>0;e[i+g]=255&c,g+=v,c/=256,f-=8);e[i+g-v]|=128*y}}},i={};function __nccwpck_require__(e){var o=i[e];if(void 0!==o)return o.exports;var a=i[e]={exports:{}},s=!0;try{n[e](a,a.exports,__nccwpck_require__),s=!1}finally{s&&delete i[e]}return a.exports}__nccwpck_require__.ab="//";var o=__nccwpck_require__(72);e.exports=o}()},8960:function(e){!function(){var n={229:function(e){var n,i,o,a=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(n===setTimeout)return setTimeout(e,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(i){try{return n.call(null,e,0)}catch(i){return n.call(this,e,0)}}}function runClearTimeout(e){if(i===clearTimeout)return clearTimeout(e);if((i===defaultClearTimeout||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(n){try{return i.call(null,e)}catch(n){return i.call(this,e)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){i=defaultClearTimeout}}();var s=[],c=!1,u=-1;function cleanUpNextTick(){c&&o&&(c=!1,o.length?s=o.concat(s):u=-1,s.length&&drainQueue())}function drainQueue(){if(!c){var e=runTimeout(cleanUpNextTick);c=!0;for(var n=s.length;n;){for(o=s,s=[];++u<n;)o&&o[u].run();u=-1,n=s.length}o=null,c=!1,runClearTimeout(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}a.nextTick=function(e){var n=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];s.push(new Item(e,n)),1!==s.length||c||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=noop,a.addListener=noop,a.once=noop,a.off=noop,a.removeListener=noop,a.removeAllListeners=noop,a.emit=noop,a.prependListener=noop,a.prependOnceListener=noop,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},i={};function __nccwpck_require__(e){var o=i[e];if(void 0!==o)return o.exports;var a=i[e]={exports:{}},s=!0;try{n[e](a,a.exports,__nccwpck_require__),s=!1}finally{s&&delete i[e]}return a.exports}__nccwpck_require__.ab="//";var o=__nccwpck_require__(229);e.exports=o}()},1853:function(e,n,i){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=i(2265);function h(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n}var a="function"==typeof Object.is?Object.is:h,s=o.useState,c=o.useEffect,u=o.useLayoutEffect,l=o.useDebugValue;function q(e,n){var i=n(),o=s({inst:{value:i,getSnapshot:n}}),a=o[0].inst,f=o[1];return u(function(){a.value=i,a.getSnapshot=n,r(a)&&f({inst:a})},[e,i,n]),c(function(){return r(a)&&f({inst:a}),e(function(){r(a)&&f({inst:a})})},[e]),l(i),i}function r(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!a(e,i)}catch(e){return!0}}function t(e,n){return n()}var f="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?t:q;n.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:f},6272:function(e,n,i){"use strict";e.exports=i(1853)},4972:function(e,n,i){"use strict";function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}i.d(n,{g7:function(){return a}});var o=i(2265);function $6ed0406888f73fc4$var$setRef(e,n){"function"==typeof e?e(n):null!=e&&(e.current=n)}function $6ed0406888f73fc4$export$43e446d32b3d21af(...e){return n=>e.forEach(e=>$6ed0406888f73fc4$var$setRef(e,n))}let a=(0,o.forwardRef)((e,n)=>{let{children:i,...a}=e,c=o.Children.toArray(i),u=c.find($5e63c961fc1ce211$var$isSlottable);if(u){let e=u.props.children,i=c.map(n=>n!==u?n:o.Children.count(e)>1?o.Children.only(null):(0,o.isValidElement)(e)?e.props.children:null);return(0,o.createElement)(s,_extends({},a,{ref:n}),(0,o.isValidElement)(e)?(0,o.cloneElement)(e,void 0,i):null)}return(0,o.createElement)(s,_extends({},a,{ref:n}),i)});a.displayName="Slot";let s=(0,o.forwardRef)((e,n)=>{let{children:i,...a}=e;return(0,o.isValidElement)(i)?(0,o.cloneElement)(i,{...$5e63c961fc1ce211$var$mergeProps(a,i.props),ref:n?$6ed0406888f73fc4$export$43e446d32b3d21af(n,i.ref):i.ref}):o.Children.count(i)>1?o.Children.only(null):null});s.displayName="SlotClone";let $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:e})=>(0,o.createElement)(o.Fragment,null,e);function $5e63c961fc1ce211$var$isSlottable(e){return(0,o.isValidElement)(e)&&e.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(e,n){let i={...n};for(let o in n){let a=e[o],s=n[o],c=/^on[A-Z]/.test(o);c?a&&s?i[o]=(...e)=>{s(...e),a(...e)}:a&&(i[o]=a):"style"===o?i[o]={...a,...s}:"className"===o&&(i[o]=[a,s].filter(Boolean).join(" "))}return{...e,...i}}},8947:function(e,n,i){"use strict";i.d(n,{a:function(){return useQuery}});var o=i(6504),a=i(7156),s=i(8202),c=i(9492),u=i(3238);let QueryObserver=class QueryObserver extends c.l{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){let i=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),(0,o.VS)(i,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=i.queryKey),this.updateQuery();let s=this.hasListeners();s&&shouldFetchOptionally(this.currentQuery,a,this.options,i)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==a||this.options.enabled!==i.enabled||this.options.staleTime!==i.staleTime)&&this.updateStaleTimeout();let c=this.computeRefetchInterval();s&&(this.currentQuery!==a||this.options.enabled!==i.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)}getOptimisticResult(e){let n=this.client.getQueryCache().build(this.client,e),i=this.createResult(n,e);return shouldAssignObserverCurrentProperties(this,i,e)&&(this.currentResult=i,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),i}getCurrentResult(){return this.currentResult}trackResult(e){let n={};return Object.keys(e).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(i),e[i])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){let n=this.client.defaultQueryOptions(e),i=this.client.getQueryCache().build(this.client,n);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:null==(n=e.cancelRefetch)||n}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(n=n.catch(o.ZT)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),o.sk||this.currentResult.isStale||!(0,o.PN)(this.options.staleTime))return;let e=(0,o.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime);this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},e+1)}computeRefetchInterval(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!o.sk&&!1!==this.options.enabled&&(0,o.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||s.j.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){let i;let a=this.currentQuery,s=this.options,c=this.currentResult,l=this.currentResultState,f=this.currentResultOptions,d=e!==a,p=d?e.state:this.currentQueryInitialState,m=d?this.currentResult:this.previousQueryResult,{state:g}=e,{dataUpdatedAt:v,error:y,errorUpdatedAt:b,fetchStatus:_,status:x}=g,w=!1,P=!1;if(n._optimisticResults){let i=this.hasListeners(),o=!i&&shouldFetchOnMount(e,n),c=i&&shouldFetchOptionally(e,a,n,s);(o||c)&&(_=(0,u.Kw)(e.options.networkMode)?"fetching":"paused",v||(x="loading")),"isRestoring"===n._optimisticResults&&(_="idle")}if(n.keepPreviousData&&!g.dataUpdatedAt&&null!=m&&m.isSuccess&&"error"!==x)i=m.data,v=m.dataUpdatedAt,x=m.status,w=!0;else if(n.select&&void 0!==g.data){if(c&&g.data===(null==l?void 0:l.data)&&n.select===this.selectFn)i=this.selectResult;else try{this.selectFn=n.select,i=n.select(g.data),i=(0,o.oE)(null==c?void 0:c.data,i,n),this.selectResult=i,this.selectError=null}catch(e){this.selectError=e}}else i=g.data;if(void 0!==n.placeholderData&&void 0===i&&"loading"===x){let e;if(null!=c&&c.isPlaceholderData&&n.placeholderData===(null==f?void 0:f.placeholderData))e=c.data;else if(e="function"==typeof n.placeholderData?n.placeholderData():n.placeholderData,n.select&&void 0!==e)try{e=n.select(e),this.selectError=null}catch(e){this.selectError=e}void 0!==e&&(x="success",i=(0,o.oE)(null==c?void 0:c.data,e,n),P=!0)}this.selectError&&(y=this.selectError,i=this.selectResult,b=Date.now(),x="error");let F="fetching"===_,T="loading"===x,A="error"===x,S={status:x,fetchStatus:_,isLoading:T,isSuccess:"success"===x,isError:A,isInitialLoading:T&&F,data:i,dataUpdatedAt:v,error:y,errorUpdatedAt:b,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>p.dataUpdateCount||g.errorUpdateCount>p.errorUpdateCount,isFetching:F,isRefetching:F&&!T,isLoadingError:A&&0===g.dataUpdatedAt,isPaused:"paused"===_,isPlaceholderData:P,isPreviousData:w,isRefetchError:A&&0!==g.dataUpdatedAt,isStale:isStale(e,n),refetch:this.refetch,remove:this.remove};return S}updateResult(e){let n=this.currentResult,i=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,o.VS)(i,n))return;this.currentResult=i;let a={cache:!0};(null==e?void 0:e.listeners)!==!1&&(()=>{if(!n)return!0;let{notifyOnChangeProps:e}=this.options,i="function"==typeof e?e():e;if("all"===i||!i&&!this.trackedProps.size)return!0;let o=new Set(null!=i?i:this.trackedProps);return this.options.useErrorBoundary&&o.add("error"),Object.keys(this.currentResult).some(e=>{let i=this.currentResult[e]!==n[e];return i&&o.has(e)})})()&&(a.listeners=!0),this.notify({...a,...e})}updateQuery(){let e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;let n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==n||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){let n={};"success"===e.type?n.onSuccess=!e.manual:"error"!==e.type||(0,u.DV)(e.error)||(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){a.V.batch(()=>{var n,i,o,a,s,c,u,l;e.onSuccess?(null==(n=(i=this.options).onSuccess)||n.call(i,this.currentResult.data),null==(o=(a=this.options).onSettled)||o.call(a,this.currentResult.data,null)):e.onError&&(null==(s=(c=this.options).onError)||s.call(c,this.currentResult.error),null==(u=(l=this.options).onSettled)||u.call(l,void 0,this.currentResult.error)),e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}};function shouldLoadOnMount(e,n){return!1!==n.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===n.retryOnMount)}function shouldFetchOnMount(e,n){return shouldLoadOnMount(e,n)||e.state.dataUpdatedAt>0&&shouldFetchOn(e,n,n.refetchOnMount)}function shouldFetchOn(e,n,i){if(!1!==n.enabled){let o="function"==typeof i?i(e):i;return"always"===o||!1!==o&&isStale(e,n)}return!1}function shouldFetchOptionally(e,n,i,o){return!1!==i.enabled&&(e!==n||!1===o.enabled)&&(!i.suspense||"error"!==e.state.status)&&isStale(e,i)}function isStale(e,n){return e.isStaleByTime(n.staleTime)}function shouldAssignObserverCurrentProperties(e,n,i){return!i.keepPreviousData&&(void 0!==i.placeholderData?n.isPlaceholderData:!(0,o.VS)(e.getCurrentResult(),n))}var l=i(2265),f=i(6272);let d=f.useSyncExternalStore;function createValue(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}let p=l.createContext(createValue()),useQueryErrorResetBoundary=()=>l.useContext(p);var m=i(165);let g=l.createContext(!1),useIsRestoring=()=>l.useContext(g);function shouldThrowError(e,n){return"function"==typeof e?e(...n):!!e}g.Provider;let ensurePreventErrorBoundaryRetry=(e,n)=>{(e.suspense||e.useErrorBoundary)&&!n.isReset()&&(e.retryOnMount=!1)},useClearResetErrorBoundary=e=>{l.useEffect(()=>{e.clearReset()},[e])},getHasError=({result:e,errorResetBoundary:n,useErrorBoundary:i,query:o})=>e.isError&&!n.isReset()&&!e.isFetching&&shouldThrowError(i,[e.error,o]),ensureStaleTime=e=>{e.suspense&&"number"!=typeof e.staleTime&&(e.staleTime=1e3)},willFetch=(e,n)=>e.isLoading&&e.isFetching&&!n,shouldSuspend=(e,n,i)=>(null==e?void 0:e.suspense)&&willFetch(n,i),fetchOptimistic=(e,n,i)=>n.fetchOptimistic(e).then(({data:n})=>{null==e.onSuccess||e.onSuccess(n),null==e.onSettled||e.onSettled(n,null)}).catch(n=>{i.clearReset(),null==e.onError||e.onError(n),null==e.onSettled||e.onSettled(void 0,n)});function useBaseQuery(e,n){let i=(0,m.NL)({context:e.context}),o=useIsRestoring(),s=useQueryErrorResetBoundary(),c=i.defaultQueryOptions(e);c._optimisticResults=o?"isRestoring":"optimistic",c.onError&&(c.onError=a.V.batchCalls(c.onError)),c.onSuccess&&(c.onSuccess=a.V.batchCalls(c.onSuccess)),c.onSettled&&(c.onSettled=a.V.batchCalls(c.onSettled)),ensureStaleTime(c),ensurePreventErrorBoundaryRetry(c,s),useClearResetErrorBoundary(s);let[u]=l.useState(()=>new n(i,c)),f=u.getOptimisticResult(c);if(d(l.useCallback(e=>{let n=o?()=>void 0:u.subscribe(a.V.batchCalls(e));return u.updateResult(),n},[u,o]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),l.useEffect(()=>{u.setOptions(c,{listeners:!1})},[c,u]),shouldSuspend(c,f,o))throw fetchOptimistic(c,u,s);if(getHasError({result:f,errorResetBoundary:s,useErrorBoundary:c.useErrorBoundary,query:u.getCurrentQuery()}))throw f.error;return c.notifyOnChangeProps?f:u.trackResult(f)}function useQuery(e,n,i){let a=(0,o._v)(e,n,i);return useBaseQuery(a,QueryObserver)}},6061:function(e,n,i){"use strict";i.d(n,{j:function(){return cva}});var o=i(7042);let falsyToString=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,a=o.W,cva=(e,n)=>i=>{var o;if((null==n?void 0:n.variants)==null)return a(e,null==i?void 0:i.class,null==i?void 0:i.className);let{variants:s,defaultVariants:c}=n,u=Object.keys(s).map(e=>{let n=null==i?void 0:i[e],o=null==c?void 0:c[e];if(null===n)return null;let a=falsyToString(n)||falsyToString(o);return s[e][a]}),l=i&&Object.entries(i).reduce((e,n)=>{let[i,o]=n;return void 0===o||(e[i]=o),e},{}),f=null==n?void 0:null===(o=n.compoundVariants)||void 0===o?void 0:o.reduce((e,n)=>{let{class:i,className:o,...a}=n;return Object.entries(a).every(e=>{let[n,i]=e;return Array.isArray(i)?i.includes({...c,...l}[n]):({...c,...l})[n]===i})?[...e,i,o]:e},[]);return a(e,u,f,null==i?void 0:i.class,null==i?void 0:i.className)}},7042:function(e,n,i){"use strict";function r(e){var n,i,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e){if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(i=r(e[n]))&&(o&&(o+=" "),o+=i);else for(n in e)e[n]&&(o&&(o+=" "),o+=n)}return o}function clsx(){for(var e,n,i=0,o="";i<arguments.length;)(e=arguments[i++])&&(n=r(e))&&(o&&(o+=" "),o+=n);return o}i.d(n,{W:function(){return clsx}})},1865:function(e,n,i){"use strict";i.d(n,{cI:function(){return useForm}});var o=i(2265),isCheckBoxInput=e=>"checkbox"===e.type,isDateObject=e=>e instanceof Date,isNullOrUndefined=e=>null==e;let isObjectType=e=>"object"==typeof e;var isObject=e=>!isNullOrUndefined(e)&&!Array.isArray(e)&&isObjectType(e)&&!isDateObject(e),getEventValue=e=>isObject(e)&&e.target?isCheckBoxInput(e.target)?e.target.checked:e.target.value:e,getNodeParentName=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,isNameInFieldArray=(e,n)=>e.has(getNodeParentName(n)),isPlainObject=e=>{let n=e.constructor&&e.constructor.prototype;return isObject(n)&&n.hasOwnProperty("isPrototypeOf")},a="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function cloneObject(e){let n;let i=Array.isArray(e);if(e instanceof Date)n=new Date(e);else if(e instanceof Set)n=new Set(e);else if(!(!(a&&(e instanceof Blob||e instanceof FileList))&&(i||isObject(e))))return e;else if(n=i?[]:{},i||isPlainObject(e))for(let i in e)e.hasOwnProperty(i)&&(n[i]=cloneObject(e[i]));else n=e;return n}var compact=e=>Array.isArray(e)?e.filter(Boolean):[],isUndefined=e=>void 0===e,get=(e,n,i)=>{if(!n||!isObject(e))return i;let o=compact(n.split(/[,[\].]+?/)).reduce((e,n)=>isNullOrUndefined(e)?e:e[n],e);return isUndefined(o)||o===e?isUndefined(e[n])?i:e[n]:o},isBoolean=e=>"boolean"==typeof e;let s={BLUR:"blur",FOCUS_OUT:"focusout"},c={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},u={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};o.createContext(null);var getProxyFormState=(e,n,i,o=!0)=>{let a={defaultValues:n._defaultValues};for(let s in e)Object.defineProperty(a,s,{get:()=>(n._proxyFormState[s]!==c.all&&(n._proxyFormState[s]=!o||c.all),i&&(i[s]=!0),e[s])});return a},isEmptyObject=e=>isObject(e)&&!Object.keys(e).length,shouldRenderFormState=(e,n,i,o)=>{i(e);let{name:a,...s}=e;return isEmptyObject(s)||Object.keys(s).length>=Object.keys(n).length||Object.keys(s).find(e=>n[e]===(!o||c.all))},convertToArrayPayload=e=>Array.isArray(e)?e:[e];function useSubscribe(e){let n=o.useRef(e);n.current=e,o.useEffect(()=>{let i=!e.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return()=>{i&&i.unsubscribe()}},[e.disabled])}var isString=e=>"string"==typeof e,generateWatchOutput=(e,n,i,o,a)=>isString(e)?(o&&n.watch.add(e),get(i,e,a)):Array.isArray(e)?e.map(e=>(o&&n.watch.add(e),get(i,e))):(o&&(n.watchAll=!0),i),isKey=e=>/^\w*$/.test(e),stringToPath=e=>compact(e.replace(/["|']|\]/g,"").split(/\.|\[/));function set(e,n,i){let o=-1,a=isKey(n)?[n]:stringToPath(n),s=a.length,c=s-1;for(;++o<s;){let n=a[o],s=i;if(o!==c){let i=e[n];s=isObject(i)||Array.isArray(i)?i:isNaN(+a[o+1])?{}:[]}e[n]=s,e=e[n]}return e}var appendErrors=(e,n,i,o,a)=>n?{...i[e],types:{...i[e]&&i[e].types?i[e].types:{},[o]:a||!0}}:{};let focusFieldBy=(e,n,i)=>{for(let o of i||Object.keys(e)){let i=get(e,o);if(i){let{_f:e,...o}=i;if(e&&n(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else isObject(o)&&focusFieldBy(o,n)}}};var getValidationModes=e=>({isOnSubmit:!e||e===c.onSubmit,isOnBlur:e===c.onBlur,isOnChange:e===c.onChange,isOnAll:e===c.all,isOnTouch:e===c.onTouched}),isWatched=(e,n,i)=>!i&&(n.watchAll||n.watch.has(e)||[...n.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),updateFieldArrayRootError=(e,n,i)=>{let o=compact(get(e,i));return set(o,"root",n[i]),set(e,i,o),e},isFileInput=e=>"file"===e.type,isFunction=e=>"function"==typeof e,isHTMLElement=e=>{if(!a)return!1;let n=e?e.ownerDocument:0;return e instanceof(n&&n.defaultView?n.defaultView.HTMLElement:HTMLElement)},isMessage=e=>isString(e),isRadioInput=e=>"radio"===e.type,isRegex=e=>e instanceof RegExp;let l={value:!1,isValid:!1},f={value:!0,isValid:!0};var getCheckboxValue=e=>{if(Array.isArray(e)){if(e.length>1){let n=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:n,isValid:!!n.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!isUndefined(e[0].attributes.value)?isUndefined(e[0].value)||""===e[0].value?f:{value:e[0].value,isValid:!0}:f:l}return l};let d={isValid:!1,value:null};var getRadioValue=e=>Array.isArray(e)?e.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,d):d;function getValidateError(e,n,i="validate"){if(isMessage(e)||Array.isArray(e)&&e.every(isMessage)||isBoolean(e)&&!e)return{type:i,message:isMessage(e)?e:"",ref:n}}var getValueAndMessage=e=>isObject(e)&&!isRegex(e)?e:{value:e,message:""},validateField=async(e,n,i,o,a)=>{let{ref:s,refs:c,required:l,maxLength:f,minLength:d,min:p,max:m,pattern:g,validate:v,name:y,valueAsNumber:b,mount:_,disabled:x}=e._f,w=get(n,y);if(!_||x)return{};let P=c?c[0]:s,setCustomValidity=e=>{o&&P.reportValidity&&(P.setCustomValidity(isBoolean(e)?"":e||""),P.reportValidity())},F={},T=isRadioInput(s),A=isCheckBoxInput(s),S=(b||isFileInput(s))&&isUndefined(s.value)&&isUndefined(w)||isHTMLElement(s)&&""===s.value||""===w||Array.isArray(w)&&!w.length,k=appendErrors.bind(null,y,i,F),getMinMaxMessage=(e,n,i,o=u.maxLength,a=u.minLength)=>{let c=e?n:i;F[y]={type:e?o:a,message:c,ref:s,...k(e?o:a,c)}};if(a?!Array.isArray(w)||!w.length:l&&(!(T||A)&&(S||isNullOrUndefined(w))||isBoolean(w)&&!w||A&&!getCheckboxValue(c).isValid||T&&!getRadioValue(c).isValid)){let{value:e,message:n}=isMessage(l)?{value:!!l,message:l}:getValueAndMessage(l);if(e&&(F[y]={type:u.required,message:n,ref:P,...k(u.required,n)},!i))return setCustomValidity(n),F}if(!S&&(!isNullOrUndefined(p)||!isNullOrUndefined(m))){let e,n;let o=getValueAndMessage(m),a=getValueAndMessage(p);if(isNullOrUndefined(w)||isNaN(w)){let i=s.valueAsDate||new Date(w),convertTimeToDate=e=>new Date(new Date().toDateString()+" "+e),c="time"==s.type,u="week"==s.type;isString(o.value)&&w&&(e=c?convertTimeToDate(w)>convertTimeToDate(o.value):u?w>o.value:i>new Date(o.value)),isString(a.value)&&w&&(n=c?convertTimeToDate(w)<convertTimeToDate(a.value):u?w<a.value:i<new Date(a.value))}else{let i=s.valueAsNumber||(w?+w:w);isNullOrUndefined(o.value)||(e=i>o.value),isNullOrUndefined(a.value)||(n=i<a.value)}if((e||n)&&(getMinMaxMessage(!!e,o.message,a.message,u.max,u.min),!i))return setCustomValidity(F[y].message),F}if((f||d)&&!S&&(isString(w)||a&&Array.isArray(w))){let e=getValueAndMessage(f),n=getValueAndMessage(d),o=!isNullOrUndefined(e.value)&&w.length>+e.value,a=!isNullOrUndefined(n.value)&&w.length<+n.value;if((o||a)&&(getMinMaxMessage(o,e.message,n.message),!i))return setCustomValidity(F[y].message),F}if(g&&!S&&isString(w)){let{value:e,message:n}=getValueAndMessage(g);if(isRegex(e)&&!w.match(e)&&(F[y]={type:u.pattern,message:n,ref:s,...k(u.pattern,n)},!i))return setCustomValidity(n),F}if(v){if(isFunction(v)){let e=await v(w,n),o=getValidateError(e,P);if(o&&(F[y]={...o,...k(u.validate,o.message)},!i))return setCustomValidity(o.message),F}else if(isObject(v)){let e={};for(let o in v){if(!isEmptyObject(e)&&!i)break;let a=getValidateError(await v[o](w,n),P,o);a&&(e={...a,...k(o,a.message)},setCustomValidity(a.message),i&&(F[y]=e))}if(!isEmptyObject(e)&&(F[y]={ref:P,...e},!i))return F}}return setCustomValidity(!0),F};function baseGet(e,n){let i=n.slice(0,-1).length,o=0;for(;o<i;)e=isUndefined(e)?o++:e[n[o++]];return e}function isEmptyArray(e){for(let n in e)if(e.hasOwnProperty(n)&&!isUndefined(e[n]))return!1;return!0}function unset(e,n){let i=Array.isArray(n)?n:isKey(n)?[n]:stringToPath(n),o=1===i.length?e:baseGet(e,i),a=i.length-1,s=i[a];return o&&delete o[s],0!==a&&(isObject(o)&&isEmptyObject(o)||Array.isArray(o)&&isEmptyArray(o))&&unset(e,i.slice(0,-1)),e}function createSubject(){let e=[];return{get observers(){return e},next:n=>{for(let i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(e=>e!==n)}}),unsubscribe:()=>{e=[]}}}var isPrimitive=e=>isNullOrUndefined(e)||!isObjectType(e);function deepEqual(e,n){if(isPrimitive(e)||isPrimitive(n))return e===n;if(isDateObject(e)&&isDateObject(n))return e.getTime()===n.getTime();let i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(let a of i){let i=e[a];if(!o.includes(a))return!1;if("ref"!==a){let e=n[a];if(isDateObject(i)&&isDateObject(e)||isObject(i)&&isObject(e)||Array.isArray(i)&&Array.isArray(e)?!deepEqual(i,e):i!==e)return!1}}return!0}var isMultipleSelect=e=>"select-multiple"===e.type,isRadioOrCheckbox=e=>isRadioInput(e)||isCheckBoxInput(e),live=e=>isHTMLElement(e)&&e.isConnected,objectHasFunction=e=>{for(let n in e)if(isFunction(e[n]))return!0;return!1};function markFieldsDirty(e,n={}){let i=Array.isArray(e);if(isObject(e)||i)for(let i in e)Array.isArray(e[i])||isObject(e[i])&&!objectHasFunction(e[i])?(n[i]=Array.isArray(e[i])?[]:{},markFieldsDirty(e[i],n[i])):isNullOrUndefined(e[i])||(n[i]=!0);return n}function getDirtyFieldsFromDefaultValues(e,n,i){let o=Array.isArray(e);if(isObject(e)||o)for(let o in e)Array.isArray(e[o])||isObject(e[o])&&!objectHasFunction(e[o])?isUndefined(n)||isPrimitive(i[o])?i[o]=Array.isArray(e[o])?markFieldsDirty(e[o],[]):{...markFieldsDirty(e[o])}:getDirtyFieldsFromDefaultValues(e[o],isNullOrUndefined(n)?{}:n[o],i[o]):i[o]=!deepEqual(e[o],n[o]);return i}var getDirtyFields=(e,n)=>getDirtyFieldsFromDefaultValues(e,n,markFieldsDirty(n)),getFieldValueAs=(e,{valueAsNumber:n,valueAsDate:i,setValueAs:o})=>isUndefined(e)?e:n?""===e?NaN:e?+e:e:i&&isString(e)?new Date(e):o?o(e):e;function getFieldValue(e){let n=e.ref;return(e.refs?e.refs.every(e=>e.disabled):n.disabled)?void 0:isFileInput(n)?n.files:isRadioInput(n)?getRadioValue(e.refs).value:isMultipleSelect(n)?[...n.selectedOptions].map(({value:e})=>e):isCheckBoxInput(n)?getCheckboxValue(e.refs).value:getFieldValueAs(isUndefined(n.value)?e.ref.value:n.value,e)}var getResolverOptions=(e,n,i,o)=>{let a={};for(let i of e){let e=get(n,i);e&&set(a,i,e._f)}return{criteriaMode:i,names:[...e],fields:a,shouldUseNativeValidation:o}},getRuleValue=e=>isUndefined(e)?e:isRegex(e)?e.source:isObject(e)?isRegex(e.value)?e.value.source:e.value:e,hasValidation=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function schemaErrorLookup(e,n,i){let o=get(e,i);if(o||isKey(i))return{error:o,name:i};let a=i.split(".");for(;a.length;){let o=a.join("."),s=get(n,o),c=get(e,o);if(s&&!Array.isArray(s)&&i!==o)break;if(c&&c.type)return{name:o,error:c};a.pop()}return{name:i}}var skipValidation=(e,n,i,o,a)=>!a.isOnAll&&(!i&&a.isOnTouch?!(n||e):(i?o.isOnBlur:a.isOnBlur)?!e:(i?!o.isOnChange:!a.isOnChange)||e),unsetEmptyArray=(e,n)=>!compact(get(e,n)).length&&unset(e,n);let p={mode:c.onSubmit,reValidateMode:c.onChange,shouldFocusError:!0};function createFormControl(e={},n){let i,o={...p,...e},u={submitCount:0,isDirty:!1,isLoading:isFunction(o.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},l={},f=(isObject(o.defaultValues)||isObject(o.values))&&cloneObject(o.defaultValues||o.values)||{},d=o.shouldUnregister?{}:cloneObject(f),m={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},v=0,y={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:createSubject(),array:createSubject(),state:createSubject()},_=e.resetOptions&&e.resetOptions.keepDirtyValues,x=getValidationModes(o.mode),w=getValidationModes(o.reValidateMode),P=o.criteriaMode===c.all,debounce=e=>n=>{clearTimeout(v),v=setTimeout(e,n)},_updateValid=async e=>{if(y.isValid||e){let e=o.resolver?isEmptyObject((await _executeSchema()).errors):await executeBuiltInValidation(l,!0);e!==u.isValid&&b.state.next({isValid:e})}},_updateIsValidating=e=>y.isValidating&&b.state.next({isValidating:e}),updateErrors=(e,n)=>{set(u.errors,e,n),b.state.next({errors:u.errors})},updateValidAndValue=(e,n,i,o)=>{let a=get(l,e);if(a){let s=get(d,e,isUndefined(i)?get(f,e):i);isUndefined(s)||o&&o.defaultChecked||n?set(d,e,n?s:getFieldValue(a._f)):setFieldValue(e,s),m.mount&&_updateValid()}},updateTouchAndDirty=(e,n,i,o,a)=>{let s=!1,c=!1,l={name:e};if(!i||o){y.isDirty&&(c=u.isDirty,u.isDirty=l.isDirty=_getDirty(),s=c!==l.isDirty);let i=deepEqual(get(f,e),n);c=get(u.dirtyFields,e),i?unset(u.dirtyFields,e):set(u.dirtyFields,e,!0),l.dirtyFields=u.dirtyFields,s=s||y.dirtyFields&&!i!==c}if(i){let n=get(u.touchedFields,e);n||(set(u.touchedFields,e,i),l.touchedFields=u.touchedFields,s=s||y.touchedFields&&n!==i)}return s&&a&&b.state.next(l),s?l:{}},shouldRenderByError=(n,o,a,s)=>{let c=get(u.errors,n),l=y.isValid&&isBoolean(o)&&u.isValid!==o;if(e.delayError&&a?(i=debounce(()=>updateErrors(n,a)))(e.delayError):(clearTimeout(v),i=null,a?set(u.errors,n,a):unset(u.errors,n)),(a?!deepEqual(c,a):c)||!isEmptyObject(s)||l){let e={...s,...l&&isBoolean(o)?{isValid:o}:{},errors:u.errors,name:n};u={...u,...e},b.state.next(e)}_updateIsValidating(!1)},_executeSchema=async e=>o.resolver(d,o.context,getResolverOptions(e||g.mount,l,o.criteriaMode,o.shouldUseNativeValidation)),executeSchemaAndUpdateState=async e=>{let{errors:n}=await _executeSchema(e);if(e)for(let i of e){let e=get(n,i);e?set(u.errors,i,e):unset(u.errors,i)}else u.errors=n;return n},executeBuiltInValidation=async(e,n,i={valid:!0})=>{for(let a in e){let s=e[a];if(s){let{_f:e,...a}=s;if(e){let a=g.array.has(e.name),c=await validateField(s,d,P,o.shouldUseNativeValidation&&!n,a);if(c[e.name]&&(i.valid=!1,n))break;n||(get(c,e.name)?a?updateFieldArrayRootError(u.errors,c,e.name):set(u.errors,e.name,c[e.name]):unset(u.errors,e.name))}a&&await executeBuiltInValidation(a,n,i)}}return i.valid},_getDirty=(e,n)=>(e&&n&&set(d,e,n),!deepEqual(getValues(),f)),_getWatch=(e,n,i)=>generateWatchOutput(e,g,{...m.mount?d:isUndefined(n)?f:isString(e)?{[e]:n}:n},i,n),setFieldValue=(e,n,i={})=>{let o=get(l,e),a=n;if(o){let i=o._f;i&&(i.disabled||set(d,e,getFieldValueAs(n,i)),a=isHTMLElement(i.ref)&&isNullOrUndefined(n)?"":n,isMultipleSelect(i.ref)?[...i.ref.options].forEach(e=>e.selected=a.includes(e.value)):i.refs?isCheckBoxInput(i.ref)?i.refs.length>1?i.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(a)?!!a.find(n=>n===e.value):a===e.value)):i.refs[0]&&(i.refs[0].checked=!!a):i.refs.forEach(e=>e.checked=e.value===a):isFileInput(i.ref)?i.ref.value="":(i.ref.value=a,i.ref.type||b.values.next({name:e,values:{...d}})))}(i.shouldDirty||i.shouldTouch)&&updateTouchAndDirty(e,a,i.shouldTouch,i.shouldDirty,!0),i.shouldValidate&&trigger(e)},setValues=(e,n,i)=>{for(let o in n){let a=n[o],s=`${e}.${o}`,c=get(l,s);!g.array.has(e)&&isPrimitive(a)&&(!c||c._f)||isDateObject(a)?setFieldValue(s,a,i):setValues(s,a,i)}},setValue=(e,i,o={})=>{let a=get(l,e),s=g.array.has(e),c=cloneObject(i);set(d,e,c),s?(b.array.next({name:e,values:{...d}}),(y.isDirty||y.dirtyFields)&&o.shouldDirty&&b.state.next({name:e,dirtyFields:getDirtyFields(f,d),isDirty:_getDirty(e,c)})):!a||a._f||isNullOrUndefined(c)?setFieldValue(e,c,o):setValues(e,c,o),isWatched(e,g)&&b.state.next({...u}),b.values.next({name:e,values:{...d}}),m.mount||n()},onChange=async e=>{let n=e.target,a=n.name,c=!0,f=get(l,a);if(f){let p,m;let v=n.type?getFieldValue(f._f):getEventValue(e),_=e.type===s.BLUR||e.type===s.FOCUS_OUT,F=!hasValidation(f._f)&&!o.resolver&&!get(u.errors,a)&&!f._f.deps||skipValidation(_,get(u.touchedFields,a),u.isSubmitted,w,x),T=isWatched(a,g,_);set(d,a,v),_?(f._f.onBlur&&f._f.onBlur(e),i&&i(0)):f._f.onChange&&f._f.onChange(e);let A=updateTouchAndDirty(a,v,_,!1),S=!isEmptyObject(A)||T;if(_||b.values.next({name:a,type:e.type,values:{...d}}),F)return y.isValid&&_updateValid(),S&&b.state.next({name:a,...T?{}:A});if(!_&&T&&b.state.next({...u}),_updateIsValidating(!0),o.resolver){let{errors:e}=await _executeSchema([a]),n=schemaErrorLookup(u.errors,l,a),i=schemaErrorLookup(e,l,n.name||a);p=i.error,a=i.name,m=isEmptyObject(e)}else p=(await validateField(f,d,P,o.shouldUseNativeValidation))[a],(c=Number.isNaN(v)||v===get(d,a,v))&&(p?m=!1:y.isValid&&(m=await executeBuiltInValidation(l,!0)));c&&(f._f.deps&&trigger(f._f.deps),shouldRenderByError(a,m,p,A))}},trigger=async(e,n={})=>{let i,a;let s=convertToArrayPayload(e);if(_updateIsValidating(!0),o.resolver){let n=await executeSchemaAndUpdateState(isUndefined(e)?e:s);i=isEmptyObject(n),a=e?!s.some(e=>get(n,e)):i}else e?((a=(await Promise.all(s.map(async e=>{let n=get(l,e);return await executeBuiltInValidation(n&&n._f?{[e]:n}:n)}))).every(Boolean))||u.isValid)&&_updateValid():a=i=await executeBuiltInValidation(l);return b.state.next({...!isString(e)||y.isValid&&i!==u.isValid?{}:{name:e},...o.resolver||!e?{isValid:i}:{},errors:u.errors,isValidating:!1}),n.shouldFocus&&!a&&focusFieldBy(l,e=>e&&get(u.errors,e),e?s:g.mount),a},getValues=e=>{let n={...f,...m.mount?d:{}};return isUndefined(e)?n:isString(e)?get(n,e):e.map(e=>get(n,e))},getFieldState=(e,n)=>({invalid:!!get((n||u).errors,e),isDirty:!!get((n||u).dirtyFields,e),isTouched:!!get((n||u).touchedFields,e),error:get((n||u).errors,e)}),setError=(e,n,i)=>{let o=(get(l,e,{_f:{}})._f||{}).ref;set(u.errors,e,{...n,ref:o}),b.state.next({name:e,errors:u.errors,isValid:!1}),i&&i.shouldFocus&&o&&o.focus&&o.focus()},unregister=(e,n={})=>{for(let i of e?convertToArrayPayload(e):g.mount)g.mount.delete(i),g.array.delete(i),n.keepValue||(unset(l,i),unset(d,i)),n.keepError||unset(u.errors,i),n.keepDirty||unset(u.dirtyFields,i),n.keepTouched||unset(u.touchedFields,i),o.shouldUnregister||n.keepDefaultValue||unset(f,i);b.values.next({values:{...d}}),b.state.next({...u,...n.keepDirty?{isDirty:_getDirty()}:{}}),n.keepIsValid||_updateValid()},_updateDisabledField=({disabled:e,name:n,field:i,fields:o})=>{if(isBoolean(e)){let a=e?void 0:get(d,n,getFieldValue(i?i._f:get(o,n)._f));set(d,n,a),updateTouchAndDirty(n,a,!1,!1,!0)}},register=(e,n={})=>{let i=get(l,e),a=isBoolean(n.disabled);return set(l,e,{...i||{},_f:{...i&&i._f?i._f:{ref:{name:e}},name:e,mount:!0,...n}}),g.mount.add(e),i?_updateDisabledField({field:i,disabled:n.disabled,name:e}):updateValidAndValue(e,!0,n.value),{...a?{disabled:n.disabled}:{},...o.progressive?{required:!!n.required,min:getRuleValue(n.min),max:getRuleValue(n.max),minLength:getRuleValue(n.minLength),maxLength:getRuleValue(n.maxLength),pattern:getRuleValue(n.pattern)}:{},name:e,onChange,onBlur:onChange,ref:a=>{if(a){register(e,n),i=get(l,e);let o=isUndefined(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,s=isRadioOrCheckbox(o),c=i._f.refs||[];(s?c.find(e=>e===o):o===i._f.ref)||(set(l,e,{_f:{...i._f,...s?{refs:[...c.filter(live),o,...Array.isArray(get(f,e))?[{}]:[]],ref:{type:o.type,name:e}}:{ref:o}}}),updateValidAndValue(e,!1,void 0,o))}else(i=get(l,e,{}))._f&&(i._f.mount=!1),(o.shouldUnregister||n.shouldUnregister)&&!(isNameInFieldArray(g.array,e)&&m.action)&&g.unMount.add(e)}}},_focusError=()=>o.shouldFocusError&&focusFieldBy(l,e=>e&&get(u.errors,e),g.mount),handleSubmit=(e,n)=>async i=>{i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let a=cloneObject(d);if(b.state.next({isSubmitting:!0}),o.resolver){let{errors:e,values:n}=await _executeSchema();u.errors=e,a=n}else await executeBuiltInValidation(l);unset(u.errors,"root"),isEmptyObject(u.errors)?(b.state.next({errors:{}}),await e(a,i)):(n&&await n({...u.errors},i),_focusError(),setTimeout(_focusError)),b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(u.errors),submitCount:u.submitCount+1,errors:u.errors})},_reset=(i,o={})=>{let s=i?cloneObject(i):f,c=cloneObject(s),p=i&&!isEmptyObject(i)?c:f;if(o.keepDefaultValues||(f=s),!o.keepValues){if(o.keepDirtyValues||_)for(let e of g.mount)get(u.dirtyFields,e)?set(p,e,get(d,e)):setValue(e,get(p,e));else{if(a&&isUndefined(i))for(let e of g.mount){let n=get(l,e);if(n&&n._f){let e=Array.isArray(n._f.refs)?n._f.refs[0]:n._f.ref;if(isHTMLElement(e)){let n=e.closest("form");if(n){n.reset();break}}}}l={}}d=e.shouldUnregister?o.keepDefaultValues?cloneObject(f):{}:cloneObject(p),b.array.next({values:{...p}}),b.values.next({values:{...p}})}g={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},m.mount||n(),m.mount=!y.isValid||!!o.keepIsValid,m.watch=!!e.shouldUnregister,b.state.next({submitCount:o.keepSubmitCount?u.submitCount:0,isDirty:o.keepDirty?u.isDirty:!!(o.keepDefaultValues&&!deepEqual(i,f)),isSubmitted:!!o.keepIsSubmitted&&u.isSubmitted,dirtyFields:o.keepDirtyValues?u.dirtyFields:o.keepDefaultValues&&i?getDirtyFields(f,i):{},touchedFields:o.keepTouched?u.touchedFields:{},errors:o.keepErrors?u.errors:{},isSubmitSuccessful:!!o.keepIsSubmitSuccessful&&u.isSubmitSuccessful,isSubmitting:!1})},reset=(e,n)=>_reset(isFunction(e)?e(d):e,n);return{control:{register,unregister,getFieldState,handleSubmit,setError,_executeSchema,_getWatch,_getDirty,_updateValid,_removeUnmounted:()=>{for(let e of g.unMount){let n=get(l,e);n&&(n._f.refs?n._f.refs.every(e=>!live(e)):!live(n._f.ref))&&unregister(e)}g.unMount=new Set},_updateFieldArray:(e,n=[],i,o,a=!0,s=!0)=>{if(o&&i){if(m.action=!0,s&&Array.isArray(get(l,e))){let n=i(get(l,e),o.argA,o.argB);a&&set(l,e,n)}if(s&&Array.isArray(get(u.errors,e))){let n=i(get(u.errors,e),o.argA,o.argB);a&&set(u.errors,e,n),unsetEmptyArray(u.errors,e)}if(y.touchedFields&&s&&Array.isArray(get(u.touchedFields,e))){let n=i(get(u.touchedFields,e),o.argA,o.argB);a&&set(u.touchedFields,e,n)}y.dirtyFields&&(u.dirtyFields=getDirtyFields(f,d)),b.state.next({name:e,isDirty:_getDirty(e,n),dirtyFields:u.dirtyFields,errors:u.errors,isValid:u.isValid})}else set(d,e,n)},_updateDisabledField,_getFieldArray:n=>compact(get(m.mount?d:f,n,e.shouldUnregister?get(f,n,[]):[])),_reset,_resetDefaultValues:()=>isFunction(o.defaultValues)&&o.defaultValues().then(e=>{reset(e,o.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:e=>{u={...u,...e}},_subjects:b,_proxyFormState:y,get _fields(){return l},get _formValues(){return d},get _state(){return m},set _state(value){m=value},get _defaultValues(){return f},get _names(){return g},set _names(value){g=value},get _formState(){return u},set _formState(value){u=value},get _options(){return o},set _options(value){o={...o,...value}}},trigger,register,handleSubmit,watch:(e,n)=>isFunction(e)?b.values.subscribe({next:i=>e(_getWatch(void 0,n),i)}):_getWatch(e,n,!0),setValue,getValues,reset,resetField:(e,n={})=>{get(l,e)&&(isUndefined(n.defaultValue)?setValue(e,get(f,e)):(setValue(e,n.defaultValue),set(f,e,n.defaultValue)),n.keepTouched||unset(u.touchedFields,e),n.keepDirty||(unset(u.dirtyFields,e),u.isDirty=n.defaultValue?_getDirty(e,get(f,e)):_getDirty()),!n.keepError&&(unset(u.errors,e),y.isValid&&_updateValid()),b.state.next({...u}))},clearErrors:e=>{e&&convertToArrayPayload(e).forEach(e=>unset(u.errors,e)),b.state.next({errors:e?u.errors:{}})},unregister,setError,setFocus:(e,n={})=>{let i=get(l,e),o=i&&i._f;if(o){let e=o.refs?o.refs[0]:o.ref;e.focus&&(e.focus(),n.shouldSelect&&e.select())}},getFieldState}}function useForm(e={}){let n=o.useRef(),i=o.useRef(),[a,s]=o.useState({isDirty:!1,isValidating:!1,isLoading:isFunction(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:isFunction(e.defaultValues)?void 0:e.defaultValues});n.current||(n.current={...createFormControl(e,()=>s(e=>({...e}))),formState:a});let c=n.current.control;return c._options=e,useSubscribe({subject:c._subjects.state,next:e=>{shouldRenderFormState(e,c._proxyFormState,c._updateFormState,!0)&&s({...c._formState})}}),o.useEffect(()=>{e.values&&!deepEqual(e.values,i.current)?(c._reset(e.values,c._options.resetOptions),i.current=e.values):c._resetDefaultValues()},[e.values,c]),o.useEffect(()=>{c._state.mount||(c._updateValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),n.current.formState=getProxyFormState(a,c),n.current}},3986:function(e,n,i){"use strict";function createClassUtils(e){var n=createClassMap(e),i=e.conflictingClassGroups,o=e.conflictingClassGroupModifiers,a=void 0===o?{}:o;return{getClassGroupId:function(e){var i=e.split("-");return""===i[0]&&1!==i.length&&i.shift(),getGroupRecursive(i,n)||getGroupIdForArbitraryProperty(e)},getConflictingClassGroupIds:function(e,n){var o=i[e]||[];return n&&a[e]?[].concat(o,a[e]):o}}}function getGroupRecursive(e,n){if(0===e.length)return n.classGroupId;var i=e[0],o=n.nextPart.get(i),a=o?getGroupRecursive(e.slice(1),o):void 0;if(a)return a;if(0!==n.validators.length){var s=e.join("-");return n.validators.find(function(e){return(0,e.validator)(s)})?.classGroupId}}i.d(n,{m:function(){return p}});var o=/^\[(.+)\]$/;function getGroupIdForArbitraryProperty(e){if(o.test(e)){var n=o.exec(e)[1],i=n?.substring(0,n.indexOf(":"));if(i)return"arbitrary.."+i}}function createClassMap(e){var n=e.theme,i=e.prefix,o={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(e.classGroups),i).forEach(function(e){var i=e[0];processClassesRecursively(e[1],o,i,n)}),o}function processClassesRecursively(e,n,i,o){e.forEach(function(e){if("string"==typeof e){(""===e?n:getPart(n,e)).classGroupId=i;return}if("function"==typeof e){if(isThemeGetter(e)){processClassesRecursively(e(o),n,i,o);return}n.validators.push({validator:e,classGroupId:i});return}Object.entries(e).forEach(function(e){var a=e[0];processClassesRecursively(e[1],getPart(n,a),i,o)})})}function getPart(e,n){var i=e;return n.split("-").forEach(function(e){i.nextPart.has(e)||i.nextPart.set(e,{nextPart:new Map,validators:[]}),i=i.nextPart.get(e)}),i}function isThemeGetter(e){return e.isThemeGetter}function getPrefixedClassGroupEntries(e,n){return n?e.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?n+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){return[n+e[0],e[1]]})):e})]}):e}function createLruCache(e){if(e<1)return{get:function(){},set:function(){}};var n=0,i=new Map,o=new Map;function update(a,s){i.set(a,s),++n>e&&(n=0,o=i,i=new Map)}return{get:function(e){var n=i.get(e);return void 0!==n?n:void 0!==(n=o.get(e))?(update(e,n),n):void 0},set:function(e,n){i.has(e)?i.set(e,n):update(e,n)}}}function createSplitModifiers(e){var n=e.separator||":",i=1===n.length,o=n[0],a=n.length;return function(e){for(var s,c=[],u=0,l=0,f=0;f<e.length;f++){var d=e[f];if(0===u){if(d===o&&(i||e.slice(f,f+a)===n)){c.push(e.slice(l,f)),l=f+a;continue}if("/"===d){s=f;continue}}"["===d?u++:"]"===d&&u--}var p=0===c.length?e:e.substring(l),m=p.startsWith("!"),g=m?p.substring(1):p;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:s&&s>l?s-l:void 0}}}function sortModifiers(e){if(e.length<=1)return e;var n=[],i=[];return e.forEach(function(e){"["===e[0]?(n.push.apply(n,i.sort().concat([e])),i=[]):i.push(e)}),n.push.apply(n,i.sort()),n}function createConfigUtils(e){return{cache:createLruCache(e.cacheSize),splitModifiers:createSplitModifiers(e),...createClassUtils(e)}}var a=/\s+/;function mergeClassList(e,n){var i=n.splitModifiers,o=n.getClassGroupId,s=n.getConflictingClassGroupIds,c=new Set;return e.trim().split(a).map(function(e){var n=i(e),a=n.modifiers,s=n.hasImportantModifier,c=n.baseClassName,u=n.maybePostfixModifierPosition,l=o(u?c.substring(0,u):c),f=!!u;if(!l){if(!u||!(l=o(c)))return{isTailwindClass:!1,originalClassName:e};f=!1}var d=sortModifiers(a).join(":");return{isTailwindClass:!0,modifierId:s?d+"!":d,classGroupId:l,originalClassName:e,hasPostfixModifier:f}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var n=e.modifierId,i=e.classGroupId,o=e.hasPostfixModifier,a=n+i;return!c.has(a)&&(c.add(a),s(i,o).forEach(function(e){return c.add(n+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" ")}function twJoin(){for(var e,n,i=0,o="";i<arguments.length;)(e=arguments[i++])&&(n=toValue(e))&&(o&&(o+=" "),o+=n);return o}function toValue(e){if("string"==typeof e)return e;for(var n,i="",o=0;o<e.length;o++)e[o]&&(n=toValue(e[o]))&&(i&&(i+=" "),i+=n);return i}function createTailwindMerge(){for(var e,n,i,o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var c=initTailwindMerge;function initTailwindMerge(o){var s=a[0];return n=(e=createConfigUtils(a.slice(1).reduce(function(e,n){return n(e)},s()))).cache.get,i=e.cache.set,c=tailwindMerge,tailwindMerge(o)}function tailwindMerge(o){var a=n(o);if(a)return a;var s=mergeClassList(o,e);return i(o,s),s}return function(){return c(twJoin.apply(null,arguments))}}function fromTheme(e){var themeGetter=function(n){return n[e]||[]};return themeGetter.isThemeGetter=!0,themeGetter}var s=/^\[(?:([a-z-]+):)?(.+)\]$/i,c=/^\d+\/\d+$/,u=new Set(["px","full","screen"]),l=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,f=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,d=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function isLength(e){return isNumber(e)||u.has(e)||c.test(e)||isArbitraryLength(e)}function isArbitraryLength(e){return getIsArbitraryValue(e,"length",isLengthOnly)}function isArbitrarySize(e){return getIsArbitraryValue(e,"size",isNever)}function isArbitraryPosition(e){return getIsArbitraryValue(e,"position",isNever)}function isArbitraryUrl(e){return getIsArbitraryValue(e,"url",isUrl)}function isArbitraryNumber(e){return getIsArbitraryValue(e,"number",isNumber)}function isNumber(e){return!Number.isNaN(Number(e))}function isPercent(e){return e.endsWith("%")&&isNumber(e.slice(0,-1))}function isInteger(e){return isIntegerOnly(e)||getIsArbitraryValue(e,"number",isIntegerOnly)}function isArbitraryValue(e){return s.test(e)}function isAny(){return!0}function isTshirtSize(e){return l.test(e)}function isArbitraryShadow(e){return getIsArbitraryValue(e,"",isShadow)}function getIsArbitraryValue(e,n,i){var o=s.exec(e);return!!o&&(o[1]?o[1]===n:i(o[2]))}function isLengthOnly(e){return f.test(e)}function isNever(){return!1}function isUrl(e){return e.startsWith("url(")}function isIntegerOnly(e){return Number.isInteger(Number(e))}function isShadow(e){return d.test(e)}var p=createTailwindMerge(function(){var e=fromTheme("colors"),n=fromTheme("spacing"),i=fromTheme("blur"),o=fromTheme("brightness"),a=fromTheme("borderColor"),s=fromTheme("borderRadius"),c=fromTheme("borderSpacing"),u=fromTheme("borderWidth"),l=fromTheme("contrast"),f=fromTheme("grayscale"),d=fromTheme("hueRotate"),p=fromTheme("invert"),m=fromTheme("gap"),g=fromTheme("gradientColorStops"),v=fromTheme("gradientColorStopPositions"),y=fromTheme("inset"),b=fromTheme("margin"),_=fromTheme("opacity"),x=fromTheme("padding"),w=fromTheme("saturate"),P=fromTheme("scale"),F=fromTheme("sepia"),T=fromTheme("skew"),A=fromTheme("space"),S=fromTheme("translate"),getOverscroll=function(){return["auto","contain","none"]},getOverflow=function(){return["auto","hidden","clip","visible","scroll"]},getSpacingWithAutoAndArbitrary=function(){return["auto",isArbitraryValue,n]},getSpacingWithArbitrary=function(){return[isArbitraryValue,n]},getLengthWithEmpty=function(){return["",isLength]},getNumberWithAutoAndArbitrary=function(){return["auto",isNumber,isArbitraryValue]},getPositions=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},getLineStyles=function(){return["solid","dashed","dotted","double","none"]},getBlendModes=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},getAlign=function(){return["start","end","center","between","around","evenly","stretch"]},getZeroAndEmpty=function(){return["","0",isArbitraryValue]},getBreaks=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},getNumber=function(){return[isNumber,isArbitraryNumber]},getNumberAndArbitrary=function(){return[isNumber,isArbitraryValue]};return{cacheSize:500,theme:{colors:[isAny],spacing:[isLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:getNumber(),borderColor:[e],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:getSpacingWithArbitrary(),borderWidth:getLengthWithEmpty(),contrast:getNumber(),grayscale:getZeroAndEmpty(),hueRotate:getNumberAndArbitrary(),invert:getZeroAndEmpty(),gap:getSpacingWithArbitrary(),gradientColorStops:[e],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:getSpacingWithAutoAndArbitrary(),margin:getSpacingWithAutoAndArbitrary(),opacity:getNumber(),padding:getSpacingWithArbitrary(),saturate:getNumber(),scale:getNumber(),sepia:getZeroAndEmpty(),skew:getNumberAndArbitrary(),space:getSpacingWithArbitrary(),translate:getSpacingWithArbitrary()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":getBreaks()}],"break-before":[{"break-before":getBreaks()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(getPositions(),[isArbitraryValue])}],overflow:[{overflow:getOverflow()}],"overflow-x":[{"overflow-x":getOverflow()}],"overflow-y":[{"overflow-y":getOverflow()}],overscroll:[{overscroll:getOverscroll()}],"overscroll-x":[{"overscroll-x":getOverscroll()}],"overscroll-y":[{"overscroll-y":getOverscroll()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger]}],basis:[{basis:getSpacingWithAutoAndArbitrary()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:getZeroAndEmpty()}],shrink:[{shrink:getZeroAndEmpty()}],order:[{order:["first","last","none",isInteger]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger]},isArbitraryValue]}],"col-start":[{"col-start":getNumberWithAutoAndArbitrary()}],"col-end":[{"col-end":getNumberWithAutoAndArbitrary()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger]},isArbitraryValue]}],"row-start":[{"row-start":getNumberWithAutoAndArbitrary()}],"row-end":[{"row-end":getNumberWithAutoAndArbitrary()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(getAlign())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(getAlign(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(getAlign(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",isArbitraryValue,n]}],"min-w":[{"min-w":["min","max","fit",isArbitraryValue,isLength]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize,isArbitraryValue]}],h:[{h:[isArbitraryValue,n,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",isArbitraryValue,isLength]}],"max-h":[{"max-h":[isArbitraryValue,n,"min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isArbitraryValue,isLength]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(getLineStyles(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength]}],"underline-offset":[{"underline-offset":["auto",isArbitraryValue,isLength]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:getSpacingWithArbitrary()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(getPositions(),[isArbitraryPosition])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryUrl]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[].concat(getLineStyles(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:getLineStyles()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(getLineStyles())}],"outline-offset":[{"outline-offset":[isArbitraryValue,isLength]}],"outline-w":[{outline:[isLength]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:getLengthWithEmpty()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[isLength]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":getBlendModes()}],"bg-blend":[{"bg-blend":getBlendModes()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[o]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[w]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:getNumberAndArbitrary()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:getNumberAndArbitrary()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":getSpacingWithArbitrary()}],"scroll-mx":[{"scroll-mx":getSpacingWithArbitrary()}],"scroll-my":[{"scroll-my":getSpacingWithArbitrary()}],"scroll-ms":[{"scroll-ms":getSpacingWithArbitrary()}],"scroll-me":[{"scroll-me":getSpacingWithArbitrary()}],"scroll-mt":[{"scroll-mt":getSpacingWithArbitrary()}],"scroll-mr":[{"scroll-mr":getSpacingWithArbitrary()}],"scroll-mb":[{"scroll-mb":getSpacingWithArbitrary()}],"scroll-ml":[{"scroll-ml":getSpacingWithArbitrary()}],"scroll-p":[{"scroll-p":getSpacingWithArbitrary()}],"scroll-px":[{"scroll-px":getSpacingWithArbitrary()}],"scroll-py":[{"scroll-py":getSpacingWithArbitrary()}],"scroll-ps":[{"scroll-ps":getSpacingWithArbitrary()}],"scroll-pe":[{"scroll-pe":getSpacingWithArbitrary()}],"scroll-pt":[{"scroll-pt":getSpacingWithArbitrary()}],"scroll-pr":[{"scroll-pr":getSpacingWithArbitrary()}],"scroll-pb":[{"scroll-pb":getSpacingWithArbitrary()}],"scroll-pl":[{"scroll-pl":getSpacingWithArbitrary()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryNumber]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}})}}]);